---
main:
  run: |
    if (m.$end) $.goTo("exercise");
    else {
      set((m) => {
        m.chat.stopBlock = locales.get("not_now");
        m.$canRun = false;
        m.$canEdit = false;
      });
    }
  run-after-messages: |
    $.goTo("question");
  messages:
  - como dije, cada registro puede almacenar un solo byte
  - asÃ­ que sus valores estÃ¡n siempre entre 0 ($00) y 255 ($FF)
  - no puedes, por ejemplo, guardar el nÃºmero 260 en ellos ğŸ‘®
  responses: []

question:
  messages:
  - Â¿quÃ© pensÃ¡s que pasarÃ­a si usÃ¡ramos `ADC` para calcular 200 + 60?
  responses:
  - (*) [A] serÃ­a igual a 2ï¸âƒ£ 6ï¸âƒ£ 0ï¸âƒ£ [a260]
  - (*) [A] serÃ­a igual a 2ï¸âƒ£ 5ï¸âƒ£ 5ï¸âƒ£ [a255]
  - (*) [A] serÃ­a igual a 4ï¸âƒ£ [a4]
  - (*) lanzarÃ­a un error âš ï¸ [error]
  - (*) Â¿la CPU explota? ğŸ’¥ [explodes]

a260:
  messages:
  - nop, su valor mÃ¡ximo es 255, asÃ­ que eso no es posible ğŸ‘®
  - intenta de nuevo
  - ...question
  responses:
  - ...question

a255:
  messages:
  - eso tendrÃ­a sentido, pero no es lo que sucede ğŸ‘
  - intenta de nuevo
  - ...question
  responses:
  - ...question

error:
  messages:
  - las CPUs no <tiran errores> ğŸ™„
  - intenta de nuevo
  - ...question
  responses:
  - ...question

explodes:
  messages:
  - ğŸ’¥ ğŸ’¥ ğŸ’¥
  - eso explicarÃ­a los problemas de temperatura de mi PC ğŸŒ¡ï¸
  - probablemente es un programa intentando desbordar los registros de CPU
  - no, intenta de nuevo
  - ...question
  responses:
  - ...question

a4:
  messages:
  - Â¡correcto! âœ”ï¸
  - pero en realidad el procesador no es tonto
  - le notifica al programa que el valor no calzÃ³ bien
  - cargando la Bandera Carry en 1
  responses:
  - Â¿quÃ© es una bandera? ğŸ [flags]

flags:
  run-after-messages: |
    set((m) => m.$canRun = true);
  messages:
  - es un booleano (valor de 1 bit) que carga el procesador
  - da informaciÃ³n sobre la instrucciÃ³n anterior
  - hay 5 banderas, asÃ­ que todas viven en un solo byte
  - intenta ejecutar el cÃ³digo â©
  events:
  - end [carry]

carry:
  messages:
  - ahora puedes ver en el depurador que la Bandera Carry estÃ¡ en 1
  responses:
  - (*) wow, Â¿alguna otra bandera Ãºtil? [exercise]
  - (*) momento, Â¿todo este tiempo podrÃ­as haber estado escribiendo nÃºmeros en decimal? ğŸ˜¤ [decimal]

decimal:
  messages:
  - "Â¡sÃ­! `LDA #200` es lo mismo que `LDA #$C8`"
  - "ğŸ“  asÃ­ que, resÃºmen rÃ¡pido:"
  - "#$20 representa al nÃºmero 32 (decimal) o $20 (hexadecimal)"
  - "#20 representa al nÃºmero 20 (decimal) o $14 (hexadecimal)"
  - "$20 representa al 33avo byte en memoria, con la direcciÃ³n 32 (decimal) o $20 (hexadecimal)"
  - "20 representa al 21avo byte en memoria, con la direcciÃ³n 20 (decimal) o $14 (hexadecimal)"
  responses:
  - ...carry

exercise:
  run-after-messages: |
    set((m) => {
      m.$end = true;
      m.chat.stopBlock = null;
      m.$canEdit = true;
    });
  messages:
  - yep, estÃ¡ la Bandera Zero, que todas las instrucciones la ponen en 1 cuando el resultado es cero
  - sin eliminar el cÃ³digo actual, intenta sustraer 4 a [A], con la instrucciÃ³n `SBC`
  - funciona igual que `ADC`, pero resta en lugar de sumar
  - luego de la instrucciÃ³n, la Bandera Zero deberÃ­a estar en 1 ğŸ˜Š
  - cuando estÃ© listo, ejecuta el comando `test`
  responses:
  - ...carry
