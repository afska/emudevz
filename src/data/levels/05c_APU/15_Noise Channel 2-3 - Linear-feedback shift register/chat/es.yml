---
main:
  messages:
  - la generaciÃ³n de ruido es un poco mÃ¡s compleja que una llamada a ```javascript random()```
  - "aquÃ­ hay un documento que lo describe:"
  - ğŸ“„  ~/docs/apu/noise_generation.es.md~
  - lÃ©elo y dime si tienes alguna pregunta
  responses:
  - Â¿la salida es el volumen? Â¿quÃ©? [volume]

volume:
  messages:
  - sÃ­, el ğŸ’¥  Canal Ruido no genera "ondas" reales
  - sus samples son o el <nivel de volumen> o 0
  - y eso depende del bit 0 del <registro de desplazamiento>
  - todavÃ­a no tenemos una envolvente, asÃ­ que seguiremos asumiendo un volumen constante
  responses:
  - suena bien, puedo programar esto [exercise]

exercise:
  messages:
  - Â¡genial!
  - |-
      ğŸ“š  implementa en ğŸŒªï¸  `NoiseForm`:
      **onLoad()**:
        **->** usa ```javascript this.addField(...)``` para definir 2 campos: `periodId`, `mode`
        (usa ğŸ“„  ~/docs/apu/audio_registers.es.md~ como referencia)
      **onWrite(value)**:
        **->** asigna el valor con ```javascript this.setValue(...)```
  - |-
      ğŸ“š  implementa en ğŸ’¥  `NoiseChannel`:
      **constructor(apu)**:
        **->** asigna ```javascript this.shift = 1```
        **->** asigna ```javascript this.dividerCount = 0```
      **sample(value)**:
        **->** haz que el <return temprano> tambiÃ©n revise ```javascript !(this.shift & 1)```
          (el sample de salida es 0 si el primer bit del <registro de desplazamiento> es 0)
        **->** cambia el <valor de retorno principal> de ```javascript Math.floor(...)``` a solo `volume`
      **step()**:
        **->** incrementa el <contador del divisor>
        **->** si el <contador del divisor> alcanza ```javascript noisePeriods[this.registers.form.periodId]```:
          (puedes obtener `noisePeriods` de ğŸ“„  ~/lib/apu/noisePeriods.js~)
          **->** reinicia el <contador del divisor>
        **->** si no:
          **->** retorna
        
        **->** actualiza ```javascript this.shift``` usando la lÃ³gica descrita aquÃ­:
          ğŸ“„  ~/docs/apu/noise_generation.es.md~
  responses: []
