---
main:
  messages:
  - Â¿recuerdas cÃ³mo los juegos escriben en VRAM?
  - <{PPUAddr_PPUData.png}>
  - ellos tambiÃ©n pueden <leer> desde VRAM, leyendo de ğŸ“¦  PPUData en lugar de escribir
  - "esta operaciÃ³n tambiÃ©n incrementa la direcciÃ³n en ğŸ“  PPUAddr, y tiene un pequeÃ±o truco:"
  - todas las lecturas estÃ¡n <retrasadas> por 1, excepto para la secciÃ³n Palette RAM y sus espejos
  responses:
  - Â¿cÃ³mo podemos implementar el retraso? âŒ› [exercise]

exercise:
  messages:
  - simple, cuando se solicita una <lectura>, lees en un buffer, pero luego retornas el <valor anterior> de ese buffer
  - |-
    ğŸ“š  implementa estos mÃ©todos en ğŸ“¦  `PPUData`:
    **onLoad()**:
      **->** inicializa ```javascript this.buffer = 0```
    **onRead()**:
      **->** guarda ```javascript this.buffer``` en una variable llamada `data`
      **->** lee desde la direcciÃ³n PPU ```javascript ppuAddr.address``` y guarda el resultado en ```javascript this.buffer```
      **->** si la direcciÃ³n estÃ¡ entre $3F00 y $3FFF, asigna ```javascript data = this.buffer``` (omite el buffer)
      **->** llama a ```javascript this._incrementAddress()```
      **->** retorna `data`
  responses:
  - (*) Â¿cÃ³mo puedo acceder a PPUAddr? [ppuaddr]

ppuaddr:
  messages:
  - recuerda que los registros tienen ```javascript this.ppu```
  - asÃ­ que puedes acceder a la instancia ğŸ“  PPUAddr con ```javascript this.ppu.registers.ppuAddr```
  responses:
  - ...exercise
