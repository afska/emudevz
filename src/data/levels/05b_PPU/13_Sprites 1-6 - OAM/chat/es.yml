main:
  messages:
  - ahora que nuestro emulador es capaz de acceder a la ğŸ›¸ ğŸ“–  OAM
  - Â¡estamos listos para leer ğŸ›¸  sprites!
  responses:
  - Â¿quÃ© hay en la OAM? [oam]

oam:
  messages:
  - "aquÃ­ tienes un documento que explica el formato de la tabla OAM:"
  - ğŸ“„  ~/docs/ppu/sprite_rendering.es.md~
  - "tambiÃ©n deberÃ­as hacer uso de mi clase `Sprite`:"
  - ğŸ“„  ~/lib/ppu/Sprite.js~
  - se encarga de algunas cosas como analizar los atributos
  responses:
  - gracias, pero todavÃ­a necesito leer la OAM, Â¿verdad? [implement]

implement:
  messages:
  - correcto âœ…
  - ğŸ“š  crea una clase ğŸ›¸  `SpriteRenderer`
  - ğŸ“š  su constructor debe recibir y asignar una propiedad `ppu` con la instancia PPU
  - |-
    ğŸ“š  haz este cambio en la clase ğŸ–¥ï¸  `PPU`:
    **constructor**:
      **->** instancia el renderizador de sprites:
        ```javascript this.spriteRenderer = new SpriteRenderer(this)```
        (Â¡recuerda importarlo si lo definiste en otro archivo!)
  - |-
    ğŸ“š  ahora, en la clase ğŸ›¸  `SpriteRenderer`, define:
    **_createSprite(id)**:
      **->** retorna una nueva instancia de `Sprite`, leyendo el Ã­ndice OAM `id`
      (Â¡recuerda agregar 1 a la coordenada Y!)
  responses:
  - Â¿por quÃ© deberÃ­a agregar 1 a la coordenada Y? â• [addone]
  - Â¿cÃ³mo sÃ© si el sprite es ~8x8~ o ~8x16~? ğŸ“ [spritesize]
  - Â¿cÃ³mo sÃ© el id de tile o el id de la pattern table? ğŸ•Šï¸ ğŸ“– [patterntable]

addone:
  messages:
  - porque los datos de los sprites se retrasan por una lÃ­nea de exploraciÃ³n ğŸ’¤
  - en el hardware real, los sprites se dibujan una lÃ­nea mÃ¡s abajo de la coordenada Y que los juegos establecen en el OAM
  - es decir, si el byte 0 de una entrada de OAM se establece en 0, se dibuja en la lÃ­nea 1
  - y no hay forma de dibujar un sprite comenzando desde la lÃ­nea 0
  responses:
  - ...implement

spritesize:
  messages:
  - eso es una configuraciÃ³n global, configurada en ğŸ›ï¸  PPUCtrl
  - cuando ```javascript ppu.registers.ppuCtrl.spriteSize === 1```, los sprites deben usar el modo ~8x16~
  responses:
  - ...implement

patterntable:
  messages:
  - en modo ~8x8~, el id de tile es el `byte1` de la entrada OAM, y el id de pattern table es ```javascript ppu.registers.ppuCtrl.sprite8x8PatternTableId```
  - en modo ~8x16~, the id de tile es ```javascript (byte1 & 0b11111110)``` y el id de pattern table es ```javascript (byte1 & 0b00000001)```
  responses:
  - ...implement
