main:
  messages:
  - the ðŸŽ­  ~PPUMask~ video register ($2001) lets programs enable or disable parts of the rendering
  - check out again ðŸ“„  ~/docs/ppu/video_registers.en.md~
  - ðŸ›ï¸  the ~m~ and ~M~ bits controls whether the first 8px column should be visible or not for backgrounds and sprites respectively
  - ðŸžï¸  ~b~ enables background rendering
  - ðŸ›¸  and ~s~ enables sprite rendering
  responses:
  - (*) why would a game want to disable rendering? [why]
  - let's do it [lets]

why:
  messages:
  - for example, to fill VRAM faster using VDraw time, hiding possible glitches result of not doing it on ðŸï¸  VBlank
  - games typically write $00 outside gameplay to do that
  - and then $1E to enable rendering during gameplay
  responses:
  - ...main

lets:
  messages:
  - ðŸ“š  _-_in `PPUMask`, implement the `onLoad()` method, using `addField(...)` to map the mentioned bits_--_
  - |-
    _-_use these names:_--_
      _-_`showBackgroundInFirst8Pixels`_--_
      _-_`showSpritesInFirst8Pixels`_--_
      _-_`showBackground`_--_
      _-_`showSprites`_--_
  - |-
    ðŸ“š  _-_also, add these methods:_--_
      *_-_*onWrite(value)**:_--_
        *_-_*->** calls ~this.setValue(value)~_--_
      *_-_*isRenderingEnabled()**:_--_
        *_-_*->** returns ~this.showBackground || this.showSprites~_--_
  - |-
    ðŸ“š  _-_in `PPU`, you want to <not do anything> if the rendering is disabled:_--_
      _-_```javascript if (!this.registers.ppuMask.isRenderingEnabled())
        return;```_--_
    _-_add that at the beginning of both `onPreLine` and `onVisibleLine`!_--_
  - |-
    ðŸ“š  _-_only call `BackgroundRenderer::renderScanline` if `showBackground` is enabled,_--_
    _-_and only call `SpriteRenderer::renderScanline` if `showSprites` is enabled_--_
  responses:
  - shouldn't I also change the renderers? [renderers]

renderers:
  messages:
  - yup, let's see...
  - |-
    ðŸ“š  _-_in `BackgroundRenderer`, change `renderScanline()`:_--_
    _-_if `showBackgroundInFirst8Pixels` is off and `x < 8`, just plot (with `PPU::plotBG(...)`) the backdrop color, increment ~x~, and ~continue~! don't process further!_--_
    _-_(remember that the backdrop color is `this.ppu.getColor(0, 0)`)_--_
  - |-
    ðŸ“š  _-_in `SpriteRenderer`, change `_render(...)`..._--_
    _-_you need a similar logic:_--_
    _-_```javascript if (!this.ppu.registers.ppuMask.showSpritesInFirst8Pixels && x < 8)
      continue;```_--_
    _-_in the sprite-0 hit `if`, add `showBackground` and `showSprites` as conditions: if one of them is disabled, it shouldn't be triggered!_--_
  responses: []
