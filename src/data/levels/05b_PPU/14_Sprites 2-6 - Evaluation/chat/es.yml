main:
  messages:
  - en cada scanline, el renderizador de sprites realiza una evaluaciÃ³n de sprites ğŸ•µï¸
  - prepara los sprites que necesitan ser renderizados
  responses:
  - mhm... Â¿cÃ³mo lo sabe? [how]

how:
  messages:
  - escanea toda la tabla OAM, comprobando si cada sprite debe dibujarse en la scanline actual (basado en ~x~, ~y~, y ~height~)
  - elige los primeros 8 sprites
  - despuÃ©s de encontrar 8 (el nÃºmero mÃ¡ximo de sprites por scanline), si encuentra <mÃ¡s> sprites visibles, la ğŸ  bandera de sprite overflow (bit 5 de ğŸ“Š  PPUStatus) se enciende para notificar el error al desarrollador del juego
  - los sprites con identificadores mÃ¡s bajos se renderizan encima de los sprites con identificadores mÃ¡s altos, Â¡asÃ­ que deberÃ­as invertir la lista de sprites elegidos!
  responses:
  - ok creo que lo entendÃ­ [exercise]
  - (*) Â¿solo 8 sprites por scanline? [only8]

only8:
  messages:
  - sÃ­
  - pero los juegos hacen algunos trucos para evitar este lÃ­mite
  - por ejemplo, los hacen parpadear para dar la ilusiÃ³n de que hay mÃ¡s sprites en la misma lÃ­nea
  responses:
  - ...how

exercise:
  messages:
  - |-
    ğŸ“š  genial, implementa el siguiente mÃ©todo en ğŸ›¸  `SpriteRenderer`:
    **_evaluate()**:
      **->** define un array `sprites`
      **->** para cada id de sprite posible (~0-63~):
        **->** crea un `sprite` usando ```javascript this._createSprite(...)```
        **->** si el `sprite` debe renderizarse en la scanline actual, y `sprites` tiene menos de 9 elementos:
          **->** si `sprites` tiene menos de 8 elementos:
            **->** agrega `sprite` al array `sprites`
          **->** de lo contrario:
            **->** asigna ```javascript this.ppu.registers.ppuStatus.spriteOverflow = 1```
            **->** detiene el bucle
      **->** retorna `sprites` en orden inverso
  - ğŸ“š  ademÃ¡s, necesitas reiniciar `spriteOverflow` a 0 en ~scanline=-1; cycle=1~, como lo hiciste anteriormente con `isInVBlankInterval`
  - hazlo en `PPU::_onPreLine()`
  responses:
  - (*) Â¿cÃ³mo sÃ© si un sprite debe ser renderizado? [visible]

visible:
  messages:
  - hay un mÃ©todo para verificar esto en mi biblioteca Sprite
  - usa ```javascript sprite.shouldRenderInScanline(this.ppu.scanline)```
  responses:
  - ...exercise
