main:
  run: |
    set((m) => m.chat.winOnEnd = true);
  messages:
  - ok, llegÃ³ el momento
  - creo que ya es hora de que lo sepas
  responses:
  - Â¿quÃ©? [what]

what:
  messages:
  - en realidad soy...
  - el creador de BrokenNEEES
  - ha sido difÃ­cil desde que la <IA> tomÃ³ el control y la mayorÃ­a de los esfuerzos de programaciÃ³n manual desaparecieron
  - extraÃ±o mucho la <programaciÃ³n manual>
  - querÃ­a lograr que alguien por ahÃ­ disfrutara de programar tanto como yo
  - entonces te encontrÃ©, y tu interÃ©s por la emulaciÃ³n me dio ganas de ayudar
  - el emulador en realidad no estÃ¡ <roto>, esos eran errores que dejÃ© a propÃ³sito ğŸ˜…
  - la idea era tener una excusa para enseÃ±ar algo que me apasiona
  - es por eso que siempre tengo algo de cÃ³digo listo para impulsarte un poco mÃ¡s
  - espero que no te moleste
  responses:
  - Â¿por quÃ© fingir errores? [why]
  - entonces, Â¿quÃ© sigue? [integrate]

why:
  messages:
  - no se aprende el alma de un emulador leyendo, se aprende haciÃ©ndolo
  - Â¡y poder jugar sin errores es una gran motivaciÃ³n! ğŸ‘¾
  responses:
  - (*) entonces, Â¿la "NEEES real" tambiÃ©n era tu emulador? [real]
  - bien, Â¿quÃ© sigue? [integrate]

real:
  messages:
  - ğŸ˜… ğŸ¤£ â˜ ï¸
  responses:
  - ...why

integrate:
  run: |
    {{Top}}.load(null, "rom");
  messages:
  - voy a darte control total del ğŸ•¹ï¸  Emulador
  - veamos...
  run-after-messages: |
    level.startEffect("earthquake");
    setTimeout(() => {
      bus.emit("patching-end");
    }, 500);
  events: 
  - patching-end [done]

done:
  run: |
    level.stopEffect();
    book.unlock("useConsole");
  messages:
  - âœ…  Â¡listo!
  - <! ğŸ•¹ï¸  NEEES integrada.
  - ahora el Ã­cono ğŸ•¹ï¸  del emulador brillarÃ¡ âœ¨
  - si lo activas, el frontend buscarÃ¡ una clase `Emulator` en ğŸ“„  ~/code/index.js~
  - y no quedarÃ¡ rastro alguno de BrokenNEEES
  responses:
  - Â¡pero no tengo esa clase! [exercise]

exercise:
  messages:
  - sÃ­, voy a entregarte el cÃ³digo que falta
  - tendrÃ¡s control total al menos del ğŸŒ€  nÃºcleo del emulador
  - |-
    ğŸ“š  crea archivos de cÃ³digo a partir de estas plantillas:
      ğŸ“„  ~/tmpl/Emulator.js~
      ğŸ“„  ~/tmpl/saveStates.js~
      ğŸ“„  ~/tmpl/mappers/mappers.js~
      ğŸ“„  ~/tmpl/mappers/0_NROM.js~
  - ğŸ“š  importa `Emulator.js` y exporta el objeto bajo la clave `Emulator` en ğŸ“„  ~/code/index.js~
  - ten en cuenta que, al hacerlo, solo funcionarÃ¡n los juegos <NROM> (mapper 0)
  - corregirÃ¡s eso en el capÃ­tulo de ğŸ—œï¸  Mappers
  responses:
  - (*) Â¿y las pruebas? ğŸ§ª [tests]
  - â–¶ï¸  continuar [end]

tests:
  messages:
  - Â¿quieres las pruebas unitarias? ğŸ¤”
  - sÃ­, si mÃ¡s adelante mejoras el emulador, supongo que pueden servir para asegurarte de que todo funcione bien
  - |-
    y por supuesto, tendrÃ¡s que actualizarlas en algÃºn momento, asÃ­ que aquÃ­ estÃ¡n:
      ğŸ“„  ~/tmpl/tests/apu.test.js~
      ğŸ“„  ~/tmpl/tests/bus.test.js~
      ğŸ“„  ~/tmpl/tests/cartridge.test.js~
      ğŸ“„  ~/tmpl/tests/cpu.test.js~
      ğŸ“„  ~/tmpl/tests/cpu_addressing_modes_1.test.js~
      ğŸ“„  ~/tmpl/tests/cpu_addressing_modes_2.test.js~
      ğŸ“„  ~/tmpl/tests/cpu_instructions_1.test.js~
      ğŸ“„  ~/tmpl/tests/cpu_instructions_2.test.js~
      ğŸ“„  ~/tmpl/tests/cpu_instructions_3.test.js~
      ğŸ“„  ~/tmpl/tests/cpu_instructions_4.test.js~
      ğŸ“„  ~/tmpl/tests/cpu_instructions_5.test.js~
      ğŸ“„  ~/tmpl/tests/ppu.test.js~
  responses:
  - ...exercise
