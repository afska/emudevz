---
main:
  run: |
    if (level.hasStoredContent) $.goTo("exercise");
    else {
      set((m) => {
        m.chat.stopBlock = locales.get("not_now");
        m.$canRun = false;
        m.$canEdit = false;
      });
    }
  messages:
  - entonces, con el combo `LDA` + `STA` puedes escribir en memoria âœï¸
  - "hay instrucciones similares que usan los registros [X] e [Y]:"
  - "`LDX`, `STX`, `LDY` y `STY`"
  - ahora vamos a usar las variantes [X], solo por diversiÃ³n ğŸ‘¾
  responses:
  - Â¿quÃ© pasa si quiero <leer> de la memoria? ğŸ“– [read]

read:
  messages:
  - "puedes pasarle una direcciÃ³n de memoria a `LDX`, tan solo omitiendo el prefijo #"
  - p. ej. la instrucciÃ³n `LDX $4080` cargarÃ¡ en [X] lo que sea que estÃ© en la direcciÃ³n de memoria $4080
  - <{LDX_memory.png}>
  responses:
  - Â¿y despuÃ©s quÃ©? ğŸ¤” [then]

then:
  messages:
  - una vez que cargas algo en un registro, puedes hacer lo que tÃº quieras
  - algo comÃºn es mutar el valor y copiarlo a otro registro
  - Â¡o a otra ubicaciÃ³n de memoria! ğŸ
  - "`INX`, por ejemplo, incrementa el valor en [X]"
  responses:
  - Â¿puedo probarlo? [tryit]

tryit:
  run-after-messages: |
    set((m) => m.$canRun = true);
  messages:
  - sÃ­, hay un $10 ya cargado en $4085
  - ejecuta el cÃ³digo actual y mira quÃ© ocurre â©
  events:
  - end [result]

result:
  messages:
  - Â¿ves? el programa leyÃ³ ese $10
  - lo incrementÃ³ 3 veces
  - y escribiÃ³ el resultado en $4086 ğŸ˜
  responses:
  - suena como mucho trabajo, Â¿quÃ© pasa si quiero incrementarlo 8 veces? [8times]

8times:
  messages:
  - "en ese caso, escribes:"
  - INX
  - INX
  - INX
  - INX
  - INX
  - INX
  - INX
  - INX
  - nah, mentira ğŸ˜‚
  - hay una instrucciÃ³n para sumar
  - "puedes escribir `ADC #$08` para incrementar [A] ocho veces"
  responses:
  - uff ğŸ˜… [iknow]
  - pero... [iknow]

iknow:
  run-after-messages: |
    $.goTo("exercise");
  messages:
  - ya sÃ©, dije [A] en vez de [X]
  - "`ADC` solo funciona con [A] ğŸ¤·"
  - mmm...
  responses: []

exercise:
  run: |
    level.fillContentFromTemp();
    set((m) => {
      m.chat.stopBlock = null;
      m.$canRun = true;
      m.$canEdit = true;
      m.content.useTemp = false;
    });
  messages:
  - vamos a refactorizar el cÃ³digo ğŸ’¡
  - ğŸ“š  _-_haz que use `ADC` en vez de 3 instrucciones de incremento_--_
  - _-_(recuerda reemplazar `LDX` y `STX` por `LDA` y `STA`)_--_
  - _-_cuando estÃ© listo, ejecuta el comando `test`_--_
  responses: []
