---
main:
  run: |
    set((m) => m.chat.winOnEnd = true);
  messages:
  - "`JSR` y `RTS` (\"Jump to Subroutine\" y \"Return from Subroutine\") son un dÃºo dinÃ¡mico que verÃ¡s que se usan mucho juntos"
  - "`JSR` salta a otra parte del cÃ³digo, y `RTS` retorna a la posiciÃ³n anterior"
  - Â¡es bÃ¡sicamente como llamar a una funciÃ³n y retornar! ğŸ“
  - revisa el ejemplo â©
  responses:
  - Â¿cÃ³mo sabe a dÃ³nde retornar? ğŸ˜² [where]

where:
  messages:
  - bueno, `JSR` pone la direcciÃ³n de la siguiente instrucciÃ³n (menos 1) en la pila antes de saltar a la ubicaciÃ³n dada
  - luego, `RTS` saca esta direcciÃ³n, le suma 1, y salta a esa ubicaciÃ³n
  - el cÃ³digo de ejemplo ilustra cÃ³mo se pueden usar ambos para crear cÃ³digo modular ğŸ—ƒï¸
  - <{JSR_RTS.png}>
  responses:
  - (*) Â¿por quÃ© no usaste los nombres de las etiquetas? [label]
  - Â¡genial! [awesome]

label:
  messages:
  - el ensamblador que encontrÃ© no soporta eso ğŸ˜”
  - pero eso es posible con otros ensambladores
  - y `JSR @init` generarÃ­a el mismo cÃ³digo mÃ¡quina que `JSR $4029`
  responses:
  - ...where

awesome:
  messages:
  - ya aprendimos suficiente lenguaje ensamblador para 6502
  - saltemos al capÃ­tulo siguiente, asÃ­ podemos empezar a programar nuestro emulador ğŸ™ƒ
  responses:
  - "`JMP @nextChapter` [end]"
