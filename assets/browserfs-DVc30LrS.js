var __defProp=Object.defineProperty;var __name=(target,value)=>__defProp(target,"name",{value,configurable:!0});import{g as getDefaultExportFromCjs}from"./index-DESlWkup.js";function _mergeNamespaces(n,m){for(var i=0;i<m.length;i++){const e=m[i];if(typeof e!="string"&&!Array.isArray(e)){for(const k in e)if(k!=="default"&&!(k in n)){const d=Object.getOwnPropertyDescriptor(e,k);d&&Object.defineProperty(n,k,d.get?d:{enumerable:!0,get:__name(()=>e[k],"get")})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}__name(_mergeNamespaces,"_mergeNamespaces");var browserfs$3={exports:{}},browserfs$2=browserfs$3.exports,hasRequiredBrowserfs;function requireBrowserfs(){return hasRequiredBrowserfs||(hasRequiredBrowserfs=1,(function(module,exports){__name((function(root,factory){module.exports=factory()}),"webpackUniversalModuleDefinition")(browserfs$2,function(){return(function(modules){var installedModules={};function __webpack_require__(moduleId){if(installedModules[moduleId])return installedModules[moduleId].exports;var module2=installedModules[moduleId]={exports:{},id:moduleId,loaded:!1};return modules[moduleId].call(module2.exports,module2,module2.exports,__webpack_require__),module2.loaded=!0,module2.exports}return __name(__webpack_require__,"__webpack_require__"),__webpack_require__.m=modules,__webpack_require__.c=installedModules,__webpack_require__.p="",__webpack_require__(0)})([function(module2,exports2,__webpack_require__){(function(Buffer2,global,module3,process){"use strict";Object.defineProperty(exports2,"__esModule",{value:!0});var buffer=__webpack_require__(2),path=__webpack_require__(9),ErrorCode;(function(ErrorCode2){ErrorCode2[ErrorCode2.EPERM=1]="EPERM",ErrorCode2[ErrorCode2.ENOENT=2]="ENOENT",ErrorCode2[ErrorCode2.EIO=5]="EIO",ErrorCode2[ErrorCode2.EBADF=9]="EBADF",ErrorCode2[ErrorCode2.EACCES=13]="EACCES",ErrorCode2[ErrorCode2.EBUSY=16]="EBUSY",ErrorCode2[ErrorCode2.EEXIST=17]="EEXIST",ErrorCode2[ErrorCode2.ENOTDIR=20]="ENOTDIR",ErrorCode2[ErrorCode2.EISDIR=21]="EISDIR",ErrorCode2[ErrorCode2.EINVAL=22]="EINVAL",ErrorCode2[ErrorCode2.EFBIG=27]="EFBIG",ErrorCode2[ErrorCode2.ENOSPC=28]="ENOSPC",ErrorCode2[ErrorCode2.EROFS=30]="EROFS",ErrorCode2[ErrorCode2.ENOTEMPTY=39]="ENOTEMPTY",ErrorCode2[ErrorCode2.ENOTSUP=95]="ENOTSUP"})(ErrorCode||(ErrorCode={}));var ErrorStrings={};ErrorStrings[ErrorCode.EPERM]="Operation not permitted.",ErrorStrings[ErrorCode.ENOENT]="No such file or directory.",ErrorStrings[ErrorCode.EIO]="Input/output error.",ErrorStrings[ErrorCode.EBADF]="Bad file descriptor.",ErrorStrings[ErrorCode.EACCES]="Permission denied.",ErrorStrings[ErrorCode.EBUSY]="Resource busy or locked.",ErrorStrings[ErrorCode.EEXIST]="File exists.",ErrorStrings[ErrorCode.ENOTDIR]="File is not a directory.",ErrorStrings[ErrorCode.EISDIR]="File is a directory.",ErrorStrings[ErrorCode.EINVAL]="Invalid argument.",ErrorStrings[ErrorCode.EFBIG]="File is too big.",ErrorStrings[ErrorCode.ENOSPC]="No space left on disk.",ErrorStrings[ErrorCode.EROFS]="Cannot modify a read-only file system.",ErrorStrings[ErrorCode.ENOTEMPTY]="Directory is not empty.",ErrorStrings[ErrorCode.ENOTSUP]="Operation is not supported.";var ApiError=(function(Error2){function ApiError2(type,message,path$$1){message===void 0&&(message=ErrorStrings[type]),Error2.call(this,message),this.syscall="",this.errno=type,this.code=ErrorCode[type],this.path=path$$1,this.stack=new Error2().stack,this.message="Error: "+this.code+": "+message+(this.path?", '"+this.path+"'":"")}return __name(ApiError2,"ApiError2"),Error2&&(ApiError2.__proto__=Error2),ApiError2.prototype=Object.create(Error2&&Error2.prototype),ApiError2.prototype.constructor=ApiError2,ApiError2.fromJSON=__name(function(json){var err=new ApiError2(0);return err.errno=json.errno,err.code=json.code,err.path=json.path,err.stack=json.stack,err.message=json.message,err},"fromJSON"),ApiError2.fromBuffer=__name(function(buffer$$1,i2){return i2===void 0&&(i2=0),ApiError2.fromJSON(JSON.parse(buffer$$1.toString("utf8",i2+4,i2+4+buffer$$1.readUInt32LE(i2))))},"fromBuffer"),ApiError2.FileError=__name(function(code,p){return new ApiError2(code,ErrorStrings[code],p)},"FileError"),ApiError2.ENOENT=__name(function(path$$1){return this.FileError(ErrorCode.ENOENT,path$$1)},"ENOENT"),ApiError2.EEXIST=__name(function(path$$1){return this.FileError(ErrorCode.EEXIST,path$$1)},"EEXIST"),ApiError2.EISDIR=__name(function(path$$1){return this.FileError(ErrorCode.EISDIR,path$$1)},"EISDIR"),ApiError2.ENOTDIR=__name(function(path$$1){return this.FileError(ErrorCode.ENOTDIR,path$$1)},"ENOTDIR"),ApiError2.EPERM=__name(function(path$$1){return this.FileError(ErrorCode.EPERM,path$$1)},"EPERM"),ApiError2.ENOTEMPTY=__name(function(path$$1){return this.FileError(ErrorCode.ENOTEMPTY,path$$1)},"ENOTEMPTY"),ApiError2.prototype.toString=__name(function(){return this.message},"toString"),ApiError2.prototype.toJSON=__name(function(){return{errno:this.errno,code:this.code,path:this.path,stack:this.stack,message:this.message}},"toJSON"),ApiError2.prototype.writeToBuffer=__name(function(buffer$$1,i2){buffer$$1===void 0&&(buffer$$1=Buffer2.alloc(this.bufferSize())),i2===void 0&&(i2=0);var bytesWritten=buffer$$1.write(JSON.stringify(this.toJSON()),i2+4);return buffer$$1.writeUInt32LE(bytesWritten,i2),buffer$$1},"writeToBuffer"),ApiError2.prototype.bufferSize=__name(function(){return 4+Buffer2.byteLength(JSON.stringify(this.toJSON()))},"bufferSize"),ApiError2})(Error),api_error=Object.freeze({get ErrorCode(){return ErrorCode},ErrorStrings,ApiError}),ActionType;(function(ActionType2){ActionType2[ActionType2.NOP=0]="NOP",ActionType2[ActionType2.THROW_EXCEPTION=1]="THROW_EXCEPTION",ActionType2[ActionType2.TRUNCATE_FILE=2]="TRUNCATE_FILE",ActionType2[ActionType2.CREATE_FILE=3]="CREATE_FILE"})(ActionType||(ActionType={}));var FileFlag=__name(function FileFlag2(flagStr){if(this.flagStr=flagStr,FileFlag2.validFlagStrs.indexOf(flagStr)<0)throw new ApiError(ErrorCode.EINVAL,"Invalid flag: "+flagStr)},"FileFlag2");FileFlag.getFileFlag=__name(function(flagStr){return FileFlag.flagCache.hasOwnProperty(flagStr)?FileFlag.flagCache[flagStr]:FileFlag.flagCache[flagStr]=new FileFlag(flagStr)},"getFileFlag"),FileFlag.prototype.getFlagString=__name(function(){return this.flagStr},"getFlagString"),FileFlag.prototype.isReadable=__name(function(){return this.flagStr.indexOf("r")!==-1||this.flagStr.indexOf("+")!==-1},"isReadable"),FileFlag.prototype.isWriteable=__name(function(){return this.flagStr.indexOf("w")!==-1||this.flagStr.indexOf("a")!==-1||this.flagStr.indexOf("+")!==-1},"isWriteable"),FileFlag.prototype.isTruncating=__name(function(){return this.flagStr.indexOf("w")!==-1},"isTruncating"),FileFlag.prototype.isAppendable=__name(function(){return this.flagStr.indexOf("a")!==-1},"isAppendable"),FileFlag.prototype.isSynchronous=__name(function(){return this.flagStr.indexOf("s")!==-1},"isSynchronous"),FileFlag.prototype.isExclusive=__name(function(){return this.flagStr.indexOf("x")!==-1},"isExclusive"),FileFlag.prototype.pathExistsAction=__name(function(){return this.isExclusive()?ActionType.THROW_EXCEPTION:this.isTruncating()?ActionType.TRUNCATE_FILE:ActionType.NOP},"pathExistsAction"),FileFlag.prototype.pathNotExistsAction=__name(function(){return(this.isWriteable()||this.isAppendable())&&this.flagStr!=="r+"?ActionType.CREATE_FILE:ActionType.THROW_EXCEPTION},"pathNotExistsAction"),FileFlag.flagCache={},FileFlag.validFlagStrs=["r","r+","rs","rs+","w","wx","w+","wx+","a","ax","a+","ax+"];var FileType;(function(FileType2){FileType2[FileType2.FILE=32768]="FILE",FileType2[FileType2.DIRECTORY=16384]="DIRECTORY",FileType2[FileType2.SYMLINK=40960]="SYMLINK"})(FileType||(FileType={}));var Stats=__name(function(itemType,size,mode,atime,mtime,ctime){if(atime===void 0&&(atime=new Date),mtime===void 0&&(mtime=new Date),ctime===void 0&&(ctime=new Date),this.size=size,this.atime=atime,this.mtime=mtime,this.ctime=ctime,this.dev=0,this.ino=0,this.rdev=0,this.nlink=1,this.blksize=4096,this.uid=0,this.gid=0,this.birthtime=new Date(0),this.fileData=null,mode)this.mode=mode;else switch(itemType){case FileType.FILE:this.mode=420;break;case FileType.DIRECTORY:default:this.mode=511}this.blocks=Math.ceil(size/512),this.mode<4096&&(this.mode|=itemType)},"Stats2");Stats.fromBuffer=__name(function(buffer$$1){var size=buffer$$1.readUInt32LE(0),mode=buffer$$1.readUInt32LE(4),atime=buffer$$1.readDoubleLE(8),mtime=buffer$$1.readDoubleLE(16),ctime=buffer$$1.readDoubleLE(24);return new Stats(mode&61440,size,mode&4095,new Date(atime),new Date(mtime),new Date(ctime))},"fromBuffer"),Stats.prototype.toBuffer=__name(function(){var buffer$$1=Buffer2.alloc(32);return buffer$$1.writeUInt32LE(this.size,0),buffer$$1.writeUInt32LE(this.mode,4),buffer$$1.writeDoubleLE(this.atime.getTime(),8),buffer$$1.writeDoubleLE(this.mtime.getTime(),16),buffer$$1.writeDoubleLE(this.ctime.getTime(),24),buffer$$1},"toBuffer"),Stats.prototype.clone=__name(function(){return new Stats(this.mode&61440,this.size,this.mode&4095,this.atime,this.mtime,this.ctime)},"clone"),Stats.prototype.isFile=__name(function(){return(this.mode&61440)===FileType.FILE},"isFile"),Stats.prototype.isDirectory=__name(function(){return(this.mode&61440)===FileType.DIRECTORY},"isDirectory"),Stats.prototype.isSymbolicLink=__name(function(){return(this.mode&61440)===FileType.SYMLINK},"isSymbolicLink"),Stats.prototype.chmod=__name(function(mode){this.mode=this.mode&61440|mode},"chmod"),Stats.prototype.isSocket=__name(function(){return!1},"isSocket"),Stats.prototype.isBlockDevice=__name(function(){return!1},"isBlockDevice"),Stats.prototype.isCharacterDevice=__name(function(){return!1},"isCharacterDevice"),Stats.prototype.isFIFO=__name(function(){return!1},"isFIFO");var wrapCb=__name(function(cb,numArgs){return cb},"wrapCb");function assertRoot(fs2){if(fs2)return fs2;throw new ApiError(ErrorCode.EIO,"Initialize BrowserFS with a file system using BrowserFS.initialize(filesystem)")}__name(assertRoot,"assertRoot");function normalizeMode(mode,def){switch(typeof mode){case"number":return mode;case"string":var trueMode=parseInt(mode,8);return isNaN(trueMode)?def:trueMode;default:return def}}__name(normalizeMode,"normalizeMode");function normalizeTime(time){if(time instanceof Date)return time;if(typeof time=="number")return new Date(time*1e3);throw new ApiError(ErrorCode.EINVAL,"Invalid time.")}__name(normalizeTime,"normalizeTime");function normalizePath(p){if(p.indexOf("\0")>=0)throw new ApiError(ErrorCode.EINVAL,"Path must be a string without null bytes.");if(p==="")throw new ApiError(ErrorCode.EINVAL,"Path must not be empty.");return path.resolve(p)}__name(normalizePath,"normalizePath");function normalizeOptions(options,defEnc,defFlag,defMode){switch(typeof options){case"object":return{encoding:typeof options.encoding<"u"?options.encoding:defEnc,flag:typeof options.flag<"u"?options.flag:defFlag,mode:normalizeMode(options.mode,defMode)};case"string":return{encoding:options,flag:defFlag,mode:defMode};default:return{encoding:defEnc,flag:defFlag,mode:defMode}}}__name(normalizeOptions,"normalizeOptions");function nopCb(){}__name(nopCb,"nopCb");var FS=__name(function(){this.F_OK=0,this.R_OK=4,this.W_OK=2,this.X_OK=1,this.root=null,this.fdMap={},this.nextFd=100},"FS2");FS.prototype.initialize=__name(function(rootFS){if(!rootFS.constructor.isAvailable())throw new ApiError(ErrorCode.EINVAL,"Tried to instantiate BrowserFS with an unavailable file system.");return this.root=rootFS},"initialize2"),FS.prototype._toUnixTimestamp=__name(function(time){if(typeof time=="number")return time;if(time instanceof Date)return time.getTime()/1e3;throw new Error("Cannot parse time: "+time)},"_toUnixTimestamp"),FS.prototype.getRootFS=__name(function(){return this.root?this.root:null},"getRootFS"),FS.prototype.rename=__name(function(oldPath,newPath,cb){cb===void 0&&(cb=nopCb);var newCb=wrapCb(cb,1);try{assertRoot(this.root).rename(normalizePath(oldPath),normalizePath(newPath),newCb)}catch(e){newCb(e)}},"rename"),FS.prototype.renameSync=__name(function(oldPath,newPath){assertRoot(this.root).renameSync(normalizePath(oldPath),normalizePath(newPath))},"renameSync"),FS.prototype.exists=__name(function(path$$1,cb){cb===void 0&&(cb=nopCb);var newCb=wrapCb(cb,1);try{return assertRoot(this.root).exists(normalizePath(path$$1),newCb)}catch{return newCb(!1)}},"exists"),FS.prototype.existsSync=__name(function(path$$1){try{return assertRoot(this.root).existsSync(normalizePath(path$$1))}catch{return!1}},"existsSync"),FS.prototype.stat=__name(function(path$$1,cb){cb===void 0&&(cb=nopCb);var newCb=wrapCb(cb,2);try{return assertRoot(this.root).stat(normalizePath(path$$1),!1,newCb)}catch(e){return newCb(e)}},"stat"),FS.prototype.statSync=__name(function(path$$1){return assertRoot(this.root).statSync(normalizePath(path$$1),!1)},"statSync"),FS.prototype.lstat=__name(function(path$$1,cb){cb===void 0&&(cb=nopCb);var newCb=wrapCb(cb,2);try{return assertRoot(this.root).stat(normalizePath(path$$1),!0,newCb)}catch(e){return newCb(e)}},"lstat"),FS.prototype.lstatSync=__name(function(path$$1){return assertRoot(this.root).statSync(normalizePath(path$$1),!0)},"lstatSync"),FS.prototype.truncate=__name(function(path$$1,arg2,cb){arg2===void 0&&(arg2=0),cb===void 0&&(cb=nopCb);var len=0;typeof arg2=="function"?cb=arg2:typeof arg2=="number"&&(len=arg2);var newCb=wrapCb(cb,1);try{if(len<0)throw new ApiError(ErrorCode.EINVAL);return assertRoot(this.root).truncate(normalizePath(path$$1),len,newCb)}catch(e){return newCb(e)}},"truncate"),FS.prototype.truncateSync=__name(function(path$$1,len){if(len===void 0&&(len=0),len<0)throw new ApiError(ErrorCode.EINVAL);return assertRoot(this.root).truncateSync(normalizePath(path$$1),len)},"truncateSync"),FS.prototype.unlink=__name(function(path$$1,cb){cb===void 0&&(cb=nopCb);var newCb=wrapCb(cb,1);try{return assertRoot(this.root).unlink(normalizePath(path$$1),newCb)}catch(e){return newCb(e)}},"unlink"),FS.prototype.unlinkSync=__name(function(path$$1){return assertRoot(this.root).unlinkSync(normalizePath(path$$1))},"unlinkSync"),FS.prototype.open=__name(function(path$$1,flag,arg2,cb){var this$1$1=this;cb===void 0&&(cb=nopCb);var mode=normalizeMode(arg2,420);cb=typeof arg2=="function"?arg2:cb;var newCb=wrapCb(cb,2);try{assertRoot(this.root).open(normalizePath(path$$1),FileFlag.getFileFlag(flag),mode,function(e,file){file?newCb(e,this$1$1.getFdForFile(file)):newCb(e)})}catch(e){newCb(e)}},"open"),FS.prototype.openSync=__name(function(path$$1,flag,mode){return mode===void 0&&(mode=420),this.getFdForFile(assertRoot(this.root).openSync(normalizePath(path$$1),FileFlag.getFileFlag(flag),normalizeMode(mode,420)))},"openSync"),FS.prototype.readFile=__name(function(filename,arg2,cb){arg2===void 0&&(arg2={}),cb===void 0&&(cb=nopCb);var options=normalizeOptions(arg2,null,"r",null);cb=typeof arg2=="function"?arg2:cb;var newCb=wrapCb(cb,2);try{var flag=FileFlag.getFileFlag(options.flag);return flag.isReadable()?assertRoot(this.root).readFile(normalizePath(filename),options.encoding,flag,newCb):newCb(new ApiError(ErrorCode.EINVAL,"Flag passed to readFile must allow for reading."))}catch(e){return newCb(e)}},"readFile"),FS.prototype.readFileSync=__name(function(filename,arg2){arg2===void 0&&(arg2={});var options=normalizeOptions(arg2,null,"r",null),flag=FileFlag.getFileFlag(options.flag);if(!flag.isReadable())throw new ApiError(ErrorCode.EINVAL,"Flag passed to readFile must allow for reading.");return assertRoot(this.root).readFileSync(normalizePath(filename),options.encoding,flag)},"readFileSync"),FS.prototype.writeFile=__name(function(filename,data,arg3,cb){arg3===void 0&&(arg3={}),cb===void 0&&(cb=nopCb);var options=normalizeOptions(arg3,"utf8","w",420);cb=typeof arg3=="function"?arg3:cb;var newCb=wrapCb(cb,1);try{var flag=FileFlag.getFileFlag(options.flag);return flag.isWriteable()?assertRoot(this.root).writeFile(normalizePath(filename),data,options.encoding,flag,options.mode,newCb):newCb(new ApiError(ErrorCode.EINVAL,"Flag passed to writeFile must allow for writing."))}catch(e){return newCb(e)}},"writeFile"),FS.prototype.writeFileSync=__name(function(filename,data,arg3){var options=normalizeOptions(arg3,"utf8","w",420),flag=FileFlag.getFileFlag(options.flag);if(!flag.isWriteable())throw new ApiError(ErrorCode.EINVAL,"Flag passed to writeFile must allow for writing.");return assertRoot(this.root).writeFileSync(normalizePath(filename),data,options.encoding,flag,options.mode)},"writeFileSync"),FS.prototype.appendFile=__name(function(filename,data,arg3,cb){cb===void 0&&(cb=nopCb);var options=normalizeOptions(arg3,"utf8","a",420);cb=typeof arg3=="function"?arg3:cb;var newCb=wrapCb(cb,1);try{var flag=FileFlag.getFileFlag(options.flag);if(!flag.isAppendable())return newCb(new ApiError(ErrorCode.EINVAL,"Flag passed to appendFile must allow for appending."));assertRoot(this.root).appendFile(normalizePath(filename),data,options.encoding,flag,options.mode,newCb)}catch(e){newCb(e)}},"appendFile"),FS.prototype.appendFileSync=__name(function(filename,data,arg3){var options=normalizeOptions(arg3,"utf8","a",420),flag=FileFlag.getFileFlag(options.flag);if(!flag.isAppendable())throw new ApiError(ErrorCode.EINVAL,"Flag passed to appendFile must allow for appending.");return assertRoot(this.root).appendFileSync(normalizePath(filename),data,options.encoding,flag,options.mode)},"appendFileSync"),FS.prototype.fstat=__name(function(fd,cb){cb===void 0&&(cb=nopCb);var newCb=wrapCb(cb,2);try{var file=this.fd2file(fd);file.stat(newCb)}catch(e){newCb(e)}},"fstat"),FS.prototype.fstatSync=__name(function(fd){return this.fd2file(fd).statSync()},"fstatSync"),FS.prototype.close=__name(function(fd,cb){var this$1$1=this;cb===void 0&&(cb=nopCb);var newCb=wrapCb(cb,1);try{this.fd2file(fd).close(function(e){e||this$1$1.closeFd(fd),newCb(e)})}catch(e){newCb(e)}},"close"),FS.prototype.closeSync=__name(function(fd){this.fd2file(fd).closeSync(),this.closeFd(fd)},"closeSync"),FS.prototype.ftruncate=__name(function(fd,arg2,cb){cb===void 0&&(cb=nopCb);var length=typeof arg2=="number"?arg2:0;cb=typeof arg2=="function"?arg2:cb;var newCb=wrapCb(cb,1);try{var file=this.fd2file(fd);if(length<0)throw new ApiError(ErrorCode.EINVAL);file.truncate(length,newCb)}catch(e){newCb(e)}},"ftruncate"),FS.prototype.ftruncateSync=__name(function(fd,len){len===void 0&&(len=0);var file=this.fd2file(fd);if(len<0)throw new ApiError(ErrorCode.EINVAL);file.truncateSync(len)},"ftruncateSync"),FS.prototype.fsync=__name(function(fd,cb){cb===void 0&&(cb=nopCb);var newCb=wrapCb(cb,1);try{this.fd2file(fd).sync(newCb)}catch(e){newCb(e)}},"fsync"),FS.prototype.fsyncSync=__name(function(fd){this.fd2file(fd).syncSync()},"fsyncSync"),FS.prototype.fdatasync=__name(function(fd,cb){cb===void 0&&(cb=nopCb);var newCb=wrapCb(cb,1);try{this.fd2file(fd).datasync(newCb)}catch(e){newCb(e)}},"fdatasync"),FS.prototype.fdatasyncSync=__name(function(fd){this.fd2file(fd).datasyncSync()},"fdatasyncSync"),FS.prototype.write=__name(function(fd,arg2,arg3,arg4,arg5,cb){cb===void 0&&(cb=nopCb);var buffer$$1,offset,length,position=null;if(typeof arg2=="string"){var encoding="utf8";switch(typeof arg3){case"function":cb=arg3;break;case"number":position=arg3,encoding=typeof arg4=="string"?arg4:"utf8",cb=typeof arg5=="function"?arg5:cb;break;default:return cb=typeof arg4=="function"?arg4:typeof arg5=="function"?arg5:cb,cb(new ApiError(ErrorCode.EINVAL,"Invalid arguments."))}buffer$$1=Buffer2.from(arg2,encoding),offset=0,length=buffer$$1.length}else buffer$$1=arg2,offset=arg3,length=arg4,position=typeof arg5=="number"?arg5:null,cb=typeof arg5=="function"?arg5:cb;var newCb=wrapCb(cb,3);try{var file=this.fd2file(fd);position==null&&(position=file.getPos()),file.write(buffer$$1,offset,length,position,newCb)}catch(e){newCb(e)}},"write"),FS.prototype.writeSync=__name(function(fd,arg2,arg3,arg4,arg5){var buffer$$1,offset=0,length,position;if(typeof arg2=="string"){position=typeof arg3=="number"?arg3:null;var encoding=typeof arg4=="string"?arg4:"utf8";offset=0,buffer$$1=Buffer2.from(arg2,encoding),length=buffer$$1.length}else buffer$$1=arg2,offset=arg3,length=arg4,position=typeof arg5=="number"?arg5:null;var file=this.fd2file(fd);return position==null&&(position=file.getPos()),file.writeSync(buffer$$1,offset,length,position)},"writeSync"),FS.prototype.read=__name(function(fd,arg2,arg3,arg4,arg5,cb){cb===void 0&&(cb=nopCb);var position,offset,length,buffer$$1,newCb;if(typeof arg2=="number"){length=arg2,position=arg3;var encoding=arg4;cb=typeof arg5=="function"?arg5:cb,offset=0,buffer$$1=Buffer2.alloc(length),newCb=wrapCb(function(err,bytesRead,buf){if(err)return cb(err);cb(err,buf.toString(encoding),bytesRead)},3)}else buffer$$1=arg2,offset=arg3,length=arg4,position=arg5,newCb=wrapCb(cb,3);try{var file=this.fd2file(fd);position==null&&(position=file.getPos()),file.read(buffer$$1,offset,length,position,newCb)}catch(e){newCb(e)}},"read"),FS.prototype.readSync=__name(function(fd,arg2,arg3,arg4,arg5){var shenanigans=!1,buffer$$1,offset,length,position,encoding="utf8";typeof arg2=="number"?(length=arg2,position=arg3,encoding=arg4,offset=0,buffer$$1=Buffer2.alloc(length),shenanigans=!0):(buffer$$1=arg2,offset=arg3,length=arg4,position=arg5);var file=this.fd2file(fd);position==null&&(position=file.getPos());var rv=file.readSync(buffer$$1,offset,length,position);return shenanigans?[buffer$$1.toString(encoding),rv]:rv},"readSync"),FS.prototype.fchown=__name(function(fd,uid,gid,callback){callback===void 0&&(callback=nopCb);var newCb=wrapCb(callback,1);try{this.fd2file(fd).chown(uid,gid,newCb)}catch(e){newCb(e)}},"fchown"),FS.prototype.fchownSync=__name(function(fd,uid,gid){this.fd2file(fd).chownSync(uid,gid)},"fchownSync"),FS.prototype.fchmod=__name(function(fd,mode,cb){var newCb=wrapCb(cb,1);try{var numMode=typeof mode=="string"?parseInt(mode,8):mode;this.fd2file(fd).chmod(numMode,newCb)}catch(e){newCb(e)}},"fchmod"),FS.prototype.fchmodSync=__name(function(fd,mode){var numMode=typeof mode=="string"?parseInt(mode,8):mode;this.fd2file(fd).chmodSync(numMode)},"fchmodSync"),FS.prototype.futimes=__name(function(fd,atime,mtime,cb){cb===void 0&&(cb=nopCb);var newCb=wrapCb(cb,1);try{var file=this.fd2file(fd);typeof atime=="number"&&(atime=new Date(atime*1e3)),typeof mtime=="number"&&(mtime=new Date(mtime*1e3)),file.utimes(atime,mtime,newCb)}catch(e){newCb(e)}},"futimes"),FS.prototype.futimesSync=__name(function(fd,atime,mtime){this.fd2file(fd).utimesSync(normalizeTime(atime),normalizeTime(mtime))},"futimesSync"),FS.prototype.rmdir=__name(function(path$$1,cb){cb===void 0&&(cb=nopCb);var newCb=wrapCb(cb,1);try{path$$1=normalizePath(path$$1),assertRoot(this.root).rmdir(path$$1,newCb)}catch(e){newCb(e)}},"rmdir"),FS.prototype.rmdirSync=__name(function(path$$1){return path$$1=normalizePath(path$$1),assertRoot(this.root).rmdirSync(path$$1)},"rmdirSync"),FS.prototype.mkdir=__name(function(path$$1,mode,cb){cb===void 0&&(cb=nopCb),typeof mode=="function"&&(cb=mode,mode=511);var newCb=wrapCb(cb,1);try{path$$1=normalizePath(path$$1),assertRoot(this.root).mkdir(path$$1,mode,newCb)}catch(e){newCb(e)}},"mkdir"),FS.prototype.mkdirSync=__name(function(path$$1,mode){assertRoot(this.root).mkdirSync(normalizePath(path$$1),normalizeMode(mode,511))},"mkdirSync"),FS.prototype.readdir=__name(function(path$$1,cb){cb===void 0&&(cb=nopCb);var newCb=wrapCb(cb,2);try{path$$1=normalizePath(path$$1),assertRoot(this.root).readdir(path$$1,newCb)}catch(e){newCb(e)}},"readdir"),FS.prototype.readdirSync=__name(function(path$$1){return path$$1=normalizePath(path$$1),assertRoot(this.root).readdirSync(path$$1)},"readdirSync"),FS.prototype.link=__name(function(srcpath,dstpath,cb){cb===void 0&&(cb=nopCb);var newCb=wrapCb(cb,1);try{srcpath=normalizePath(srcpath),dstpath=normalizePath(dstpath),assertRoot(this.root).link(srcpath,dstpath,newCb)}catch(e){newCb(e)}},"link"),FS.prototype.linkSync=__name(function(srcpath,dstpath){return srcpath=normalizePath(srcpath),dstpath=normalizePath(dstpath),assertRoot(this.root).linkSync(srcpath,dstpath)},"linkSync"),FS.prototype.symlink=__name(function(srcpath,dstpath,arg3,cb){cb===void 0&&(cb=nopCb);var type=typeof arg3=="string"?arg3:"file";cb=typeof arg3=="function"?arg3:cb;var newCb=wrapCb(cb,1);try{if(type!=="file"&&type!=="dir")return newCb(new ApiError(ErrorCode.EINVAL,"Invalid type: "+type));srcpath=normalizePath(srcpath),dstpath=normalizePath(dstpath),assertRoot(this.root).symlink(srcpath,dstpath,type,newCb)}catch(e){newCb(e)}},"symlink"),FS.prototype.symlinkSync=__name(function(srcpath,dstpath,type){if(!type)type="file";else if(type!=="file"&&type!=="dir")throw new ApiError(ErrorCode.EINVAL,"Invalid type: "+type);return srcpath=normalizePath(srcpath),dstpath=normalizePath(dstpath),assertRoot(this.root).symlinkSync(srcpath,dstpath,type)},"symlinkSync"),FS.prototype.readlink=__name(function(path$$1,cb){cb===void 0&&(cb=nopCb);var newCb=wrapCb(cb,2);try{path$$1=normalizePath(path$$1),assertRoot(this.root).readlink(path$$1,newCb)}catch(e){newCb(e)}},"readlink"),FS.prototype.readlinkSync=__name(function(path$$1){return path$$1=normalizePath(path$$1),assertRoot(this.root).readlinkSync(path$$1)},"readlinkSync"),FS.prototype.chown=__name(function(path$$1,uid,gid,cb){cb===void 0&&(cb=nopCb);var newCb=wrapCb(cb,1);try{path$$1=normalizePath(path$$1),assertRoot(this.root).chown(path$$1,!1,uid,gid,newCb)}catch(e){newCb(e)}},"chown"),FS.prototype.chownSync=__name(function(path$$1,uid,gid){path$$1=normalizePath(path$$1),assertRoot(this.root).chownSync(path$$1,!1,uid,gid)},"chownSync"),FS.prototype.lchown=__name(function(path$$1,uid,gid,cb){cb===void 0&&(cb=nopCb);var newCb=wrapCb(cb,1);try{path$$1=normalizePath(path$$1),assertRoot(this.root).chown(path$$1,!0,uid,gid,newCb)}catch(e){newCb(e)}},"lchown"),FS.prototype.lchownSync=__name(function(path$$1,uid,gid){path$$1=normalizePath(path$$1),assertRoot(this.root).chownSync(path$$1,!0,uid,gid)},"lchownSync"),FS.prototype.chmod=__name(function(path$$1,mode,cb){cb===void 0&&(cb=nopCb);var newCb=wrapCb(cb,1);try{var numMode=normalizeMode(mode,-1);if(numMode<0)throw new ApiError(ErrorCode.EINVAL,"Invalid mode.");assertRoot(this.root).chmod(normalizePath(path$$1),!1,numMode,newCb)}catch(e){newCb(e)}},"chmod"),FS.prototype.chmodSync=__name(function(path$$1,mode){var numMode=normalizeMode(mode,-1);if(numMode<0)throw new ApiError(ErrorCode.EINVAL,"Invalid mode.");path$$1=normalizePath(path$$1),assertRoot(this.root).chmodSync(path$$1,!1,numMode)},"chmodSync"),FS.prototype.lchmod=__name(function(path$$1,mode,cb){cb===void 0&&(cb=nopCb);var newCb=wrapCb(cb,1);try{var numMode=normalizeMode(mode,-1);if(numMode<0)throw new ApiError(ErrorCode.EINVAL,"Invalid mode.");assertRoot(this.root).chmod(normalizePath(path$$1),!0,numMode,newCb)}catch(e){newCb(e)}},"lchmod"),FS.prototype.lchmodSync=__name(function(path$$1,mode){var numMode=normalizeMode(mode,-1);if(numMode<1)throw new ApiError(ErrorCode.EINVAL,"Invalid mode.");assertRoot(this.root).chmodSync(normalizePath(path$$1),!0,numMode)},"lchmodSync"),FS.prototype.utimes=__name(function(path$$1,atime,mtime,cb){cb===void 0&&(cb=nopCb);var newCb=wrapCb(cb,1);try{assertRoot(this.root).utimes(normalizePath(path$$1),normalizeTime(atime),normalizeTime(mtime),newCb)}catch(e){newCb(e)}},"utimes"),FS.prototype.utimesSync=__name(function(path$$1,atime,mtime){assertRoot(this.root).utimesSync(normalizePath(path$$1),normalizeTime(atime),normalizeTime(mtime))},"utimesSync"),FS.prototype.realpath=__name(function(path$$1,arg2,cb){cb===void 0&&(cb=nopCb);var cache=typeof arg2=="object"?arg2:{};cb=typeof arg2=="function"?arg2:nopCb;var newCb=wrapCb(cb,2);try{path$$1=normalizePath(path$$1),assertRoot(this.root).realpath(path$$1,cache,newCb)}catch(e){newCb(e)}},"realpath"),FS.prototype.realpathSync=__name(function(path$$1,cache){return cache===void 0&&(cache={}),path$$1=normalizePath(path$$1),assertRoot(this.root).realpathSync(path$$1,cache)},"realpathSync"),FS.prototype.watchFile=__name(function(filename,arg2,listener){throw listener===void 0&&(listener=nopCb),new ApiError(ErrorCode.ENOTSUP)},"watchFile"),FS.prototype.unwatchFile=__name(function(filename,listener){throw listener===void 0&&(listener=nopCb),new ApiError(ErrorCode.ENOTSUP)},"unwatchFile"),FS.prototype.watch=__name(function(filename,arg2,listener){throw listener===void 0&&(listener=nopCb),new ApiError(ErrorCode.ENOTSUP)},"watch"),FS.prototype.access=__name(function(path$$1,arg2,cb){throw cb===void 0&&(cb=nopCb),new ApiError(ErrorCode.ENOTSUP)},"access"),FS.prototype.accessSync=__name(function(path$$1,mode){throw new ApiError(ErrorCode.ENOTSUP)},"accessSync"),FS.prototype.createReadStream=__name(function(path$$1,options){throw new ApiError(ErrorCode.ENOTSUP)},"createReadStream"),FS.prototype.createWriteStream=__name(function(path$$1,options){throw new ApiError(ErrorCode.ENOTSUP)},"createWriteStream"),FS.prototype.wrapCallbacks=__name(function(cbWrapper){wrapCb=cbWrapper},"wrapCallbacks"),FS.prototype.getFdForFile=__name(function(file){var fd=this.nextFd++;return this.fdMap[fd]=file,fd},"getFdForFile"),FS.prototype.fd2file=__name(function(fd){var rv=this.fdMap[fd];if(rv)return rv;throw new ApiError(ErrorCode.EBADF,"Invalid file descriptor.")},"fd2file"),FS.prototype.closeFd=__name(function(fd){delete this.fdMap[fd]},"closeFd"),FS.Stats=Stats;var fs=new FS,_fsMock={},fsProto=FS.prototype;Object.keys(fsProto).forEach(function(key){typeof fs[key]=="function"?_fsMock[key]=function(){return fs[key].apply(fs,arguments)}:_fsMock[key]=fs[key]}),_fsMock.changeFSModule=function(newFs){fs=newFs},_fsMock.getFSModule=function(){return fs},_fsMock.FS=FS;function _min(d0,d1,d2,bx,ay){return d0<d1||d2<d1?d0>d2?d2+1:d0+1:bx===ay?d1:d1+1}__name(_min,"_min");function levenshtein(a,b){if(a===b)return 0;if(a.length>b.length){var tmp=a;a=b,b=tmp}for(var la=a.length,lb=b.length;la>0&&a.charCodeAt(la-1)===b.charCodeAt(lb-1);)la--,lb--;for(var offset=0;offset<la&&a.charCodeAt(offset)===b.charCodeAt(offset);)offset++;if(la-=offset,lb-=offset,la===0||lb===1)return lb;for(var vector=new Array(la<<1),y=0;y<la;)vector[la+y]=a.charCodeAt(offset+y),vector[y]=++y;var x,d0,d1,d2,d3;for(x=0;x+3<lb;)for(var bx0=b.charCodeAt(offset+(d0=x)),bx1=b.charCodeAt(offset+(d1=x+1)),bx2=b.charCodeAt(offset+(d2=x+2)),bx3=b.charCodeAt(offset+(d3=x+3)),dd$1=x+=4,y$1=0;y$1<la;){var ay=vector[la+y$1],dy=vector[y$1];d0=_min(dy,d0,d1,bx0,ay),d1=_min(d0,d1,d2,bx1,ay),d2=_min(d1,d2,d3,bx2,ay),dd$1=_min(d2,d3,dd$1,bx3,ay),vector[y$1++]=dd$1,d3=d2,d2=d1,d1=d0,d0=dy}for(var dd=0;x<lb;){var bx0$1=b.charCodeAt(offset+(d0=x));dd=++x;for(var y$2=0;y$2<la;y$2++){var dy$1=vector[y$2];vector[y$2]=dd=dy$1<d0||dd<d0?dy$1>dd?dd+1:dy$1+1:bx0$1===vector[la+y$2]?d0:d0+1,d0=dy$1}}return dd}__name(levenshtein,"levenshtein");function deprecationMessage(print,fsName,opts){print&&console.warn("["+fsName+"] Direct file system constructor usage is deprecated for this file system, and will be removed in the next major version. Please use the '"+fsName+".Create("+JSON.stringify(opts)+", callback)' method instead. See https://github.com/jvilk/BrowserFS/issues/176 for more details.")}__name(deprecationMessage,"deprecationMessage");var isIE=typeof navigator<"u"&&!!(/(msie) ([\w.]+)/.exec(navigator.userAgent.toLowerCase())||navigator.userAgent.indexOf("Trident")!==-1),isWebWorker=typeof window>"u";function fail(){throw new Error("BFS has reached an impossible code path; please file a bug.")}__name(fail,"fail");function mkdirpSync(p,mode,fs2){fs2.existsSync(p)||(mkdirpSync(path.dirname(p),mode,fs2),fs2.mkdirSync(p,mode))}__name(mkdirpSync,"mkdirpSync");function buffer2ArrayBuffer(buff){var u8=buffer2Uint8array(buff),u8offset=u8.byteOffset,u8Len=u8.byteLength;return u8offset===0&&u8Len===u8.buffer.byteLength?u8.buffer:u8.buffer.slice(u8offset,u8offset+u8Len)}__name(buffer2ArrayBuffer,"buffer2ArrayBuffer");function buffer2Uint8array(buff){return buff instanceof Uint8Array?buff:new Uint8Array(buff)}__name(buffer2Uint8array,"buffer2Uint8array");function arrayish2Buffer(arr){return arr instanceof Buffer2?arr:arr instanceof Uint8Array?uint8Array2Buffer(arr):Buffer2.from(arr)}__name(arrayish2Buffer,"arrayish2Buffer");function uint8Array2Buffer(u8){return u8 instanceof Buffer2?u8:u8.byteOffset===0&&u8.byteLength===u8.buffer.byteLength?arrayBuffer2Buffer(u8.buffer):Buffer2.from(u8.buffer,u8.byteOffset,u8.byteLength)}__name(uint8Array2Buffer,"uint8Array2Buffer");function arrayBuffer2Buffer(ab){return Buffer2.from(ab)}__name(arrayBuffer2Buffer,"arrayBuffer2Buffer");function copyingSlice(buff,start,end){if(start===void 0&&(start=0),end===void 0&&(end=buff.length),start<0||end<0||end>buff.length||start>end)throw new TypeError("Invalid slice bounds on buffer of length "+buff.length+": ["+start+", "+end+"]");if(buff.length===0)return emptyBuffer();var u8=buffer2Uint8array(buff),s0=buff[0],newS0=(s0+1)%255;return buff[0]=newS0,u8[0]===newS0?(u8[0]=s0,uint8Array2Buffer(u8.slice(start,end))):(buff[0]=s0,uint8Array2Buffer(u8.subarray(start,end)))}__name(copyingSlice,"copyingSlice");var emptyBuff=null;function emptyBuffer(){return emptyBuff||(emptyBuff=Buffer2.alloc(0))}__name(emptyBuffer,"emptyBuffer");function bufferValidator(v,cb){Buffer2.isBuffer(v)?cb():cb(new ApiError(ErrorCode.EINVAL,"option must be a Buffer."))}__name(bufferValidator,"bufferValidator");function checkOptions(fsType,opts,cb){var optsInfo=fsType.Options,fsName=fsType.Name,pendingValidators=0,callbackCalled=!1,loopEnded=!1;function validatorCallback(e){callbackCalled||(e&&(callbackCalled=!0,cb(e)),pendingValidators--,pendingValidators===0&&loopEnded&&cb())}__name(validatorCallback,"validatorCallback");var loop=__name(function(optName2){if(optsInfo.hasOwnProperty(optName2)){var opt=optsInfo[optName2],providedValue=opts[optName2];if(providedValue==null){if(!opt.optional){var incorrectOptions=Object.keys(opts).filter(function(o){return!(o in optsInfo)}).map(function(a){return{str:a,distance:levenshtein(optName2,a)}}).filter(function(o){return o.distance<5}).sort(function(a,b){return a.distance-b.distance});return callbackCalled?{}:(callbackCalled=!0,{v:cb(new ApiError(ErrorCode.EINVAL,"["+fsName+"] Required option '"+optName2+"' not provided."+(incorrectOptions.length>0?" You provided unrecognized option '"+incorrectOptions[0].str+"'; perhaps you meant to type '"+optName2+"'.":"")+`
Option description: `+opt.description))})}}else{var typeMatches=!1;if(Array.isArray(opt.type)?typeMatches=opt.type.indexOf(typeof providedValue)!==-1:typeMatches=typeof providedValue===opt.type,typeMatches)opt.validator&&(pendingValidators++,opt.validator(providedValue,validatorCallback));else return callbackCalled?{}:(callbackCalled=!0,{v:cb(new ApiError(ErrorCode.EINVAL,"["+fsName+"] Value provided for option "+optName2+" is not the proper type. Expected "+(Array.isArray(opt.type)?"one of {"+opt.type.join(", ")+"}":opt.type)+", but received "+typeof providedValue+`
Option description: `+opt.description))})}}},"loop");for(var optName in optsInfo){var returned=loop(optName);if(returned)return returned.v}loopEnded=!0,pendingValidators===0&&!callbackCalled&&cb()}__name(checkOptions,"checkOptions");var BFSUtils=Object.freeze({deprecationMessage,isIE,isWebWorker,fail,mkdirpSync,buffer2ArrayBuffer,buffer2Uint8array,arrayish2Buffer,uint8Array2Buffer,arrayBuffer2Buffer,copyingSlice,emptyBuffer,bufferValidator,checkOptions}),BFSEmscriptenStreamOps=__name(function(fs2){this.fs=fs2,this.nodefs=fs2.getNodeFS(),this.FS=fs2.getFS(),this.PATH=fs2.getPATH(),this.ERRNO_CODES=fs2.getERRNO_CODES()},"BFSEmscriptenStreamOps2");BFSEmscriptenStreamOps.prototype.open=__name(function(stream){var path$$1=this.fs.realPath(stream.node),FS2=this.FS;try{FS2.isFile(stream.node.mode)&&(stream.nfd=this.nodefs.openSync(path$$1,this.fs.flagsToPermissionString(stream.flags)))}catch(e){throw e.code?new FS2.ErrnoError(this.ERRNO_CODES[e.code]):e}},"open"),BFSEmscriptenStreamOps.prototype.close=__name(function(stream){var FS2=this.FS;try{FS2.isFile(stream.node.mode)&&stream.nfd&&this.nodefs.closeSync(stream.nfd)}catch(e){throw e.code?new FS2.ErrnoError(this.ERRNO_CODES[e.code]):e}},"close"),BFSEmscriptenStreamOps.prototype.read=__name(function(stream,buffer$$1,offset,length,position){try{return this.nodefs.readSync(stream.nfd,uint8Array2Buffer(buffer$$1),offset,length,position)}catch(e){throw new this.FS.ErrnoError(this.ERRNO_CODES[e.code])}},"read"),BFSEmscriptenStreamOps.prototype.write=__name(function(stream,buffer$$1,offset,length,position){try{return this.nodefs.writeSync(stream.nfd,uint8Array2Buffer(buffer$$1),offset,length,position)}catch(e){throw new this.FS.ErrnoError(this.ERRNO_CODES[e.code])}},"write"),BFSEmscriptenStreamOps.prototype.llseek=__name(function(stream,offset,whence){var position=offset;if(whence===1)position+=stream.position;else if(whence===2&&this.FS.isFile(stream.node.mode))try{var stat=this.nodefs.fstatSync(stream.nfd);position+=stat.size}catch(e){throw new this.FS.ErrnoError(this.ERRNO_CODES[e.code])}if(position<0)throw new this.FS.ErrnoError(this.ERRNO_CODES.EINVAL);return stream.position=position,position},"llseek");var BFSEmscriptenNodeOps=__name(function(fs2){this.fs=fs2,this.nodefs=fs2.getNodeFS(),this.FS=fs2.getFS(),this.PATH=fs2.getPATH(),this.ERRNO_CODES=fs2.getERRNO_CODES()},"BFSEmscriptenNodeOps2");BFSEmscriptenNodeOps.prototype.getattr=__name(function(node){var path$$1=this.fs.realPath(node),stat;try{stat=this.nodefs.lstatSync(path$$1)}catch(e){throw e.code?new this.FS.ErrnoError(this.ERRNO_CODES[e.code]):e}return{dev:stat.dev,ino:stat.ino,mode:stat.mode,nlink:stat.nlink,uid:stat.uid,gid:stat.gid,rdev:stat.rdev,size:stat.size,atime:stat.atime,mtime:stat.mtime,ctime:stat.ctime,blksize:stat.blksize,blocks:stat.blocks}},"getattr"),BFSEmscriptenNodeOps.prototype.setattr=__name(function(node,attr){var path$$1=this.fs.realPath(node);try{if(attr.mode!==void 0&&(this.nodefs.chmodSync(path$$1,attr.mode),node.mode=attr.mode),attr.timestamp!==void 0){var date=new Date(attr.timestamp);this.nodefs.utimesSync(path$$1,date,date)}}catch(e){if(!e.code)throw e;if(e.code!=="ENOTSUP")throw new this.FS.ErrnoError(this.ERRNO_CODES[e.code])}if(attr.size!==void 0)try{this.nodefs.truncateSync(path$$1,attr.size)}catch(e){throw e.code?new this.FS.ErrnoError(this.ERRNO_CODES[e.code]):e}},"setattr"),BFSEmscriptenNodeOps.prototype.lookup=__name(function(parent,name){var path$$1=this.PATH.join2(this.fs.realPath(parent),name),mode=this.fs.getMode(path$$1);return this.fs.createNode(parent,name,mode)},"lookup"),BFSEmscriptenNodeOps.prototype.mknod=__name(function(parent,name,mode,dev){var node=this.fs.createNode(parent,name,mode,dev),path$$1=this.fs.realPath(node);try{this.FS.isDir(node.mode)?this.nodefs.mkdirSync(path$$1,node.mode):this.nodefs.writeFileSync(path$$1,"",{mode:node.mode})}catch(e){throw e.code?new this.FS.ErrnoError(this.ERRNO_CODES[e.code]):e}return node},"mknod"),BFSEmscriptenNodeOps.prototype.rename=__name(function(oldNode,newDir,newName){var oldPath=this.fs.realPath(oldNode),newPath=this.PATH.join2(this.fs.realPath(newDir),newName);try{this.nodefs.renameSync(oldPath,newPath),oldNode.name=newName,oldNode.parent=newDir}catch(e){throw e.code?new this.FS.ErrnoError(this.ERRNO_CODES[e.code]):e}},"rename"),BFSEmscriptenNodeOps.prototype.unlink=__name(function(parent,name){var path$$1=this.PATH.join2(this.fs.realPath(parent),name);try{this.nodefs.unlinkSync(path$$1)}catch(e){throw e.code?new this.FS.ErrnoError(this.ERRNO_CODES[e.code]):e}},"unlink"),BFSEmscriptenNodeOps.prototype.rmdir=__name(function(parent,name){var path$$1=this.PATH.join2(this.fs.realPath(parent),name);try{this.nodefs.rmdirSync(path$$1)}catch(e){throw e.code?new this.FS.ErrnoError(this.ERRNO_CODES[e.code]):e}},"rmdir"),BFSEmscriptenNodeOps.prototype.readdir=__name(function(node){var path$$1=this.fs.realPath(node);try{var contents=this.nodefs.readdirSync(path$$1);return contents.push(".",".."),contents}catch(e){throw e.code?new this.FS.ErrnoError(this.ERRNO_CODES[e.code]):e}},"readdir"),BFSEmscriptenNodeOps.prototype.symlink=__name(function(parent,newName,oldPath){var newPath=this.PATH.join2(this.fs.realPath(parent),newName);try{this.nodefs.symlinkSync(oldPath,newPath)}catch(e){throw e.code?new this.FS.ErrnoError(this.ERRNO_CODES[e.code]):e}},"symlink"),BFSEmscriptenNodeOps.prototype.readlink=__name(function(node){var path$$1=this.fs.realPath(node);try{return this.nodefs.readlinkSync(path$$1)}catch(e){throw e.code?new this.FS.ErrnoError(this.ERRNO_CODES[e.code]):e}},"readlink");var BFSEmscriptenFS=__name(function(_FS,_PATH,_ERRNO_CODES,nodefs){_FS===void 0&&(_FS=self.FS),_PATH===void 0&&(_PATH=self.PATH),_ERRNO_CODES===void 0&&(_ERRNO_CODES=self.ERRNO_CODES),nodefs===void 0&&(nodefs=_fsMock),this.flagsToPermissionStringMap={0:"r",1:"r+",2:"r+",64:"r",65:"r+",66:"r+",129:"rx+",193:"rx+",514:"w+",577:"w",578:"w+",705:"wx",706:"wx+",1024:"a",1025:"a",1026:"a+",1089:"a",1090:"a+",1153:"ax",1154:"ax+",1217:"ax",1218:"ax+",4096:"rs",4098:"rs+"},this.nodefs=nodefs,this.FS=_FS,this.PATH=_PATH,this.ERRNO_CODES=_ERRNO_CODES,this.node_ops=new BFSEmscriptenNodeOps(this),this.stream_ops=new BFSEmscriptenStreamOps(this)},"BFSEmscriptenFS2");BFSEmscriptenFS.prototype.mount=__name(function(m){return this.createNode(null,"/",this.getMode(m.opts.root),0)},"mount"),BFSEmscriptenFS.prototype.createNode=__name(function(parent,name,mode,dev){var FS2=this.FS;if(!FS2.isDir(mode)&&!FS2.isFile(mode)&&!FS2.isLink(mode))throw new FS2.ErrnoError(this.ERRNO_CODES.EINVAL);var node=FS2.createNode(parent,name,mode);return node.node_ops=this.node_ops,node.stream_ops=this.stream_ops,node},"createNode"),BFSEmscriptenFS.prototype.getMode=__name(function(path$$1){var stat;try{stat=this.nodefs.lstatSync(path$$1)}catch(e){throw e.code?new this.FS.ErrnoError(this.ERRNO_CODES[e.code]):e}return stat.mode},"getMode"),BFSEmscriptenFS.prototype.realPath=__name(function(node){for(var parts=[];node.parent!==node;)parts.push(node.name),node=node.parent;return parts.push(node.mount.opts.root),parts.reverse(),this.PATH.join.apply(null,parts)},"realPath"),BFSEmscriptenFS.prototype.flagsToPermissionString=__name(function(flags){var parsedFlags=typeof flags=="string"?parseInt(flags,10):flags;return parsedFlags&=8191,parsedFlags in this.flagsToPermissionStringMap?this.flagsToPermissionStringMap[parsedFlags]:flags},"flagsToPermissionString"),BFSEmscriptenFS.prototype.getNodeFS=__name(function(){return this.nodefs},"getNodeFS"),BFSEmscriptenFS.prototype.getFS=__name(function(){return this.FS},"getFS"),BFSEmscriptenFS.prototype.getPATH=__name(function(){return this.PATH},"getPATH"),BFSEmscriptenFS.prototype.getERRNO_CODES=__name(function(){return this.ERRNO_CODES},"getERRNO_CODES");var BaseFileSystem=__name(function(){},"BaseFileSystem2");BaseFileSystem.prototype.supportsLinks=__name(function(){return!1},"supportsLinks"),BaseFileSystem.prototype.diskSpace=__name(function(p,cb){cb(0,0)},"diskSpace"),BaseFileSystem.prototype.openFile=__name(function(p,flag,cb){throw new ApiError(ErrorCode.ENOTSUP)},"openFile"),BaseFileSystem.prototype.createFile=__name(function(p,flag,mode,cb){throw new ApiError(ErrorCode.ENOTSUP)},"createFile"),BaseFileSystem.prototype.open=__name(function(p,flag,mode,cb){var this$1$1=this,mustBeFile=__name(function(e,stats){if(e)switch(flag.pathNotExistsAction()){case ActionType.CREATE_FILE:return this$1$1.stat(path.dirname(p),!1,function(e2,parentStats){e2?cb(e2):parentStats&&!parentStats.isDirectory()?cb(ApiError.ENOTDIR(path.dirname(p))):this$1$1.createFile(p,flag,mode,cb)});case ActionType.THROW_EXCEPTION:return cb(ApiError.ENOENT(p));default:return cb(new ApiError(ErrorCode.EINVAL,"Invalid FileFlag object."))}else{if(stats&&stats.isDirectory())return cb(ApiError.EISDIR(p));switch(flag.pathExistsAction()){case ActionType.THROW_EXCEPTION:return cb(ApiError.EEXIST(p));case ActionType.TRUNCATE_FILE:return this$1$1.openFile(p,flag,function(e2,fd){e2?cb(e2):fd?fd.truncate(0,function(){fd.sync(function(){cb(null,fd)})}):fail()});case ActionType.NOP:return this$1$1.openFile(p,flag,cb);default:return cb(new ApiError(ErrorCode.EINVAL,"Invalid FileFlag object."))}}},"mustBeFile");this.stat(p,!1,mustBeFile)},"open"),BaseFileSystem.prototype.rename=__name(function(oldPath,newPath,cb){cb(new ApiError(ErrorCode.ENOTSUP))},"rename"),BaseFileSystem.prototype.renameSync=__name(function(oldPath,newPath){throw new ApiError(ErrorCode.ENOTSUP)},"renameSync"),BaseFileSystem.prototype.stat=__name(function(p,isLstat,cb){cb(new ApiError(ErrorCode.ENOTSUP))},"stat"),BaseFileSystem.prototype.statSync=__name(function(p,isLstat){throw new ApiError(ErrorCode.ENOTSUP)},"statSync"),BaseFileSystem.prototype.openFileSync=__name(function(p,flag,mode){throw new ApiError(ErrorCode.ENOTSUP)},"openFileSync"),BaseFileSystem.prototype.createFileSync=__name(function(p,flag,mode){throw new ApiError(ErrorCode.ENOTSUP)},"createFileSync"),BaseFileSystem.prototype.openSync=__name(function(p,flag,mode){var stats;try{stats=this.statSync(p,!1)}catch{switch(flag.pathNotExistsAction()){case ActionType.CREATE_FILE:var parentStats=this.statSync(path.dirname(p),!1);if(!parentStats.isDirectory())throw ApiError.ENOTDIR(path.dirname(p));return this.createFileSync(p,flag,mode);case ActionType.THROW_EXCEPTION:throw ApiError.ENOENT(p);default:throw new ApiError(ErrorCode.EINVAL,"Invalid FileFlag object.")}}if(stats.isDirectory())throw ApiError.EISDIR(p);switch(flag.pathExistsAction()){case ActionType.THROW_EXCEPTION:throw ApiError.EEXIST(p);case ActionType.TRUNCATE_FILE:return this.unlinkSync(p),this.createFileSync(p,flag,stats.mode);case ActionType.NOP:return this.openFileSync(p,flag,mode);default:throw new ApiError(ErrorCode.EINVAL,"Invalid FileFlag object.")}},"openSync"),BaseFileSystem.prototype.unlink=__name(function(p,cb){cb(new ApiError(ErrorCode.ENOTSUP))},"unlink"),BaseFileSystem.prototype.unlinkSync=__name(function(p){throw new ApiError(ErrorCode.ENOTSUP)},"unlinkSync"),BaseFileSystem.prototype.rmdir=__name(function(p,cb){cb(new ApiError(ErrorCode.ENOTSUP))},"rmdir"),BaseFileSystem.prototype.rmdirSync=__name(function(p){throw new ApiError(ErrorCode.ENOTSUP)},"rmdirSync"),BaseFileSystem.prototype.mkdir=__name(function(p,mode,cb){cb(new ApiError(ErrorCode.ENOTSUP))},"mkdir"),BaseFileSystem.prototype.mkdirSync=__name(function(p,mode){throw new ApiError(ErrorCode.ENOTSUP)},"mkdirSync"),BaseFileSystem.prototype.readdir=__name(function(p,cb){cb(new ApiError(ErrorCode.ENOTSUP))},"readdir"),BaseFileSystem.prototype.readdirSync=__name(function(p){throw new ApiError(ErrorCode.ENOTSUP)},"readdirSync"),BaseFileSystem.prototype.exists=__name(function(p,cb){this.stat(p,null,function(err){cb(!err)})},"exists"),BaseFileSystem.prototype.existsSync=__name(function(p){try{return this.statSync(p,!0),!0}catch{return!1}},"existsSync"),BaseFileSystem.prototype.realpath=__name(function(p,cache,cb){if(this.supportsLinks())for(var splitPath=p.split(path.sep),i2=0;i2<splitPath.length;i2++){var addPaths=splitPath.slice(0,i2+1);splitPath[i2]=path.join.apply(null,addPaths)}else this.exists(p,function(doesExist){doesExist?cb(null,p):cb(ApiError.ENOENT(p))})},"realpath"),BaseFileSystem.prototype.realpathSync=__name(function(p,cache){if(this.supportsLinks()){for(var splitPath=p.split(path.sep),i2=0;i2<splitPath.length;i2++){var addPaths=splitPath.slice(0,i2+1);splitPath[i2]=path.join.apply(path,addPaths)}return splitPath.join(path.sep)}else{if(this.existsSync(p))return p;throw ApiError.ENOENT(p)}},"realpathSync"),BaseFileSystem.prototype.truncate=__name(function(p,len,cb){this.open(p,FileFlag.getFileFlag("r+"),420,(function(er,fd){if(er)return cb(er);fd.truncate(len,(function(er2){fd.close((function(er22){cb(er2||er22)}))}))}))},"truncate"),BaseFileSystem.prototype.truncateSync=__name(function(p,len){var fd=this.openSync(p,FileFlag.getFileFlag("r+"),420);try{fd.truncateSync(len)}catch(e){throw e}finally{fd.closeSync()}},"truncateSync"),BaseFileSystem.prototype.readFile=__name(function(fname,encoding,flag,cb){var oldCb=cb;this.open(fname,flag,420,function(err,fd){if(err)return cb(err);cb=__name(function(err2,arg){fd.close(function(err22){return err2||(err2=err22),oldCb(err2,arg)})},"cb"),fd.stat(function(err2,stat){if(err2)return cb(err2);var buf=Buffer2.alloc(stat.size);fd.read(buf,0,stat.size,0,function(err3){if(err3)return cb(err3);if(encoding===null)return cb(err3,buf);try{cb(null,buf.toString(encoding))}catch(e){cb(e)}})})})},"readFile"),BaseFileSystem.prototype.readFileSync=__name(function(fname,encoding,flag){var fd=this.openSync(fname,flag,420);try{var stat=fd.statSync(),buf=Buffer2.alloc(stat.size);return fd.readSync(buf,0,stat.size,0),fd.closeSync(),encoding===null?buf:buf.toString(encoding)}finally{fd.closeSync()}},"readFileSync"),BaseFileSystem.prototype.writeFile=__name(function(fname,data,encoding,flag,mode,cb){var oldCb=cb;this.open(fname,flag,420,function(err,fd){if(err)return cb(err);cb=__name(function(err2){fd.close(function(err22){oldCb(err2||err22)})},"cb");try{typeof data=="string"&&(data=Buffer2.from(data,encoding))}catch(e){return cb(e)}fd.write(data,0,data.length,0,cb)})},"writeFile"),BaseFileSystem.prototype.writeFileSync=__name(function(fname,data,encoding,flag,mode){var fd=this.openSync(fname,flag,mode);try{typeof data=="string"&&(data=Buffer2.from(data,encoding)),fd.writeSync(data,0,data.length,0)}finally{fd.closeSync()}},"writeFileSync"),BaseFileSystem.prototype.appendFile=__name(function(fname,data,encoding,flag,mode,cb){var oldCb=cb;this.open(fname,flag,mode,function(err,fd){if(err)return cb(err);cb=__name(function(err2){fd.close(function(err22){oldCb(err2||err22)})},"cb"),typeof data=="string"&&(data=Buffer2.from(data,encoding)),fd.write(data,0,data.length,null,cb)})},"appendFile"),BaseFileSystem.prototype.appendFileSync=__name(function(fname,data,encoding,flag,mode){var fd=this.openSync(fname,flag,mode);try{typeof data=="string"&&(data=Buffer2.from(data,encoding)),fd.writeSync(data,0,data.length,null)}finally{fd.closeSync()}},"appendFileSync"),BaseFileSystem.prototype.chmod=__name(function(p,isLchmod,mode,cb){cb(new ApiError(ErrorCode.ENOTSUP))},"chmod"),BaseFileSystem.prototype.chmodSync=__name(function(p,isLchmod,mode){throw new ApiError(ErrorCode.ENOTSUP)},"chmodSync"),BaseFileSystem.prototype.chown=__name(function(p,isLchown,uid,gid,cb){cb(new ApiError(ErrorCode.ENOTSUP))},"chown"),BaseFileSystem.prototype.chownSync=__name(function(p,isLchown,uid,gid){throw new ApiError(ErrorCode.ENOTSUP)},"chownSync"),BaseFileSystem.prototype.utimes=__name(function(p,atime,mtime,cb){cb(new ApiError(ErrorCode.ENOTSUP))},"utimes"),BaseFileSystem.prototype.utimesSync=__name(function(p,atime,mtime){throw new ApiError(ErrorCode.ENOTSUP)},"utimesSync"),BaseFileSystem.prototype.link=__name(function(srcpath,dstpath,cb){cb(new ApiError(ErrorCode.ENOTSUP))},"link"),BaseFileSystem.prototype.linkSync=__name(function(srcpath,dstpath){throw new ApiError(ErrorCode.ENOTSUP)},"linkSync"),BaseFileSystem.prototype.symlink=__name(function(srcpath,dstpath,type,cb){cb(new ApiError(ErrorCode.ENOTSUP))},"symlink"),BaseFileSystem.prototype.symlinkSync=__name(function(srcpath,dstpath,type){throw new ApiError(ErrorCode.ENOTSUP)},"symlinkSync"),BaseFileSystem.prototype.readlink=__name(function(p,cb){cb(new ApiError(ErrorCode.ENOTSUP))},"readlink"),BaseFileSystem.prototype.readlinkSync=__name(function(p){throw new ApiError(ErrorCode.ENOTSUP)},"readlinkSync");var SynchronousFileSystem=(function(BaseFileSystem2){function SynchronousFileSystem2(){BaseFileSystem2.apply(this,arguments)}return __name(SynchronousFileSystem2,"SynchronousFileSystem2"),BaseFileSystem2&&(SynchronousFileSystem2.__proto__=BaseFileSystem2),SynchronousFileSystem2.prototype=Object.create(BaseFileSystem2&&BaseFileSystem2.prototype),SynchronousFileSystem2.prototype.constructor=SynchronousFileSystem2,SynchronousFileSystem2.prototype.supportsSynch=__name(function(){return!0},"supportsSynch"),SynchronousFileSystem2.prototype.rename=__name(function(oldPath,newPath,cb){try{this.renameSync(oldPath,newPath),cb()}catch(e){cb(e)}},"rename"),SynchronousFileSystem2.prototype.stat=__name(function(p,isLstat,cb){try{cb(null,this.statSync(p,isLstat))}catch(e){cb(e)}},"stat"),SynchronousFileSystem2.prototype.open=__name(function(p,flags,mode,cb){try{cb(null,this.openSync(p,flags,mode))}catch(e){cb(e)}},"open"),SynchronousFileSystem2.prototype.unlink=__name(function(p,cb){try{this.unlinkSync(p),cb()}catch(e){cb(e)}},"unlink"),SynchronousFileSystem2.prototype.rmdir=__name(function(p,cb){try{this.rmdirSync(p),cb()}catch(e){cb(e)}},"rmdir"),SynchronousFileSystem2.prototype.mkdir=__name(function(p,mode,cb){try{this.mkdirSync(p,mode),cb()}catch(e){cb(e)}},"mkdir"),SynchronousFileSystem2.prototype.readdir=__name(function(p,cb){try{cb(null,this.readdirSync(p))}catch(e){cb(e)}},"readdir"),SynchronousFileSystem2.prototype.chmod=__name(function(p,isLchmod,mode,cb){try{this.chmodSync(p,isLchmod,mode),cb()}catch(e){cb(e)}},"chmod"),SynchronousFileSystem2.prototype.chown=__name(function(p,isLchown,uid,gid,cb){try{this.chownSync(p,isLchown,uid,gid),cb()}catch(e){cb(e)}},"chown"),SynchronousFileSystem2.prototype.utimes=__name(function(p,atime,mtime,cb){try{this.utimesSync(p,atime,mtime),cb()}catch(e){cb(e)}},"utimes"),SynchronousFileSystem2.prototype.link=__name(function(srcpath,dstpath,cb){try{this.linkSync(srcpath,dstpath),cb()}catch(e){cb(e)}},"link"),SynchronousFileSystem2.prototype.symlink=__name(function(srcpath,dstpath,type,cb){try{this.symlinkSync(srcpath,dstpath,type),cb()}catch(e){cb(e)}},"symlink"),SynchronousFileSystem2.prototype.readlink=__name(function(p,cb){try{cb(null,this.readlinkSync(p))}catch(e){cb(e)}},"readlink"),SynchronousFileSystem2})(BaseFileSystem),BaseFile=__name(function(){},"BaseFile2");BaseFile.prototype.sync=__name(function(cb){cb(new ApiError(ErrorCode.ENOTSUP))},"sync"),BaseFile.prototype.syncSync=__name(function(){throw new ApiError(ErrorCode.ENOTSUP)},"syncSync"),BaseFile.prototype.datasync=__name(function(cb){this.sync(cb)},"datasync"),BaseFile.prototype.datasyncSync=__name(function(){return this.syncSync()},"datasyncSync"),BaseFile.prototype.chown=__name(function(uid,gid,cb){cb(new ApiError(ErrorCode.ENOTSUP))},"chown"),BaseFile.prototype.chownSync=__name(function(uid,gid){throw new ApiError(ErrorCode.ENOTSUP)},"chownSync"),BaseFile.prototype.chmod=__name(function(mode,cb){cb(new ApiError(ErrorCode.ENOTSUP))},"chmod"),BaseFile.prototype.chmodSync=__name(function(mode){throw new ApiError(ErrorCode.ENOTSUP)},"chmodSync"),BaseFile.prototype.utimes=__name(function(atime,mtime,cb){cb(new ApiError(ErrorCode.ENOTSUP))},"utimes"),BaseFile.prototype.utimesSync=__name(function(atime,mtime){throw new ApiError(ErrorCode.ENOTSUP)},"utimesSync");var PreloadFile=(function(BaseFile$$1){function PreloadFile2(_fs,_path,_flag,_stat,contents){if(BaseFile$$1.call(this),this._pos=0,this._dirty=!1,this._fs=_fs,this._path=_path,this._flag=_flag,this._stat=_stat,contents?this._buffer=contents:this._buffer=emptyBuffer(),this._stat.size!==this._buffer.length&&this._flag.isReadable())throw new Error("Invalid buffer: Buffer is "+this._buffer.length+" long, yet Stats object specifies that file is "+this._stat.size+" long.")}return __name(PreloadFile2,"PreloadFile2"),BaseFile$$1&&(PreloadFile2.__proto__=BaseFile$$1),PreloadFile2.prototype=Object.create(BaseFile$$1&&BaseFile$$1.prototype),PreloadFile2.prototype.constructor=PreloadFile2,PreloadFile2.prototype.getBuffer=__name(function(){return this._buffer},"getBuffer"),PreloadFile2.prototype.getStats=__name(function(){return this._stat},"getStats"),PreloadFile2.prototype.getFlag=__name(function(){return this._flag},"getFlag2"),PreloadFile2.prototype.getPath=__name(function(){return this._path},"getPath"),PreloadFile2.prototype.getPos=__name(function(){return this._flag.isAppendable()?this._stat.size:this._pos},"getPos"),PreloadFile2.prototype.advancePos=__name(function(delta){return this._pos+=delta},"advancePos"),PreloadFile2.prototype.setPos=__name(function(newPos){return this._pos=newPos},"setPos"),PreloadFile2.prototype.sync=__name(function(cb){try{this.syncSync(),cb()}catch(e){cb(e)}},"sync"),PreloadFile2.prototype.syncSync=__name(function(){throw new ApiError(ErrorCode.ENOTSUP)},"syncSync"),PreloadFile2.prototype.close=__name(function(cb){try{this.closeSync(),cb()}catch(e){cb(e)}},"close"),PreloadFile2.prototype.closeSync=__name(function(){throw new ApiError(ErrorCode.ENOTSUP)},"closeSync"),PreloadFile2.prototype.stat=__name(function(cb){try{cb(null,this._stat.clone())}catch(e){cb(e)}},"stat"),PreloadFile2.prototype.statSync=__name(function(){return this._stat.clone()},"statSync"),PreloadFile2.prototype.truncate=__name(function(len,cb){try{this.truncateSync(len),this._flag.isSynchronous()&&!_fsMock.getRootFS().supportsSynch()&&this.sync(cb),cb()}catch(e){return cb(e)}},"truncate"),PreloadFile2.prototype.truncateSync=__name(function(len){if(this._dirty=!0,!this._flag.isWriteable())throw new ApiError(ErrorCode.EPERM,"File not opened with a writeable mode.");if(this._stat.mtime=new Date,len>this._buffer.length){var buf=Buffer2.alloc(len-this._buffer.length,0);this.writeSync(buf,0,buf.length,this._buffer.length),this._flag.isSynchronous()&&_fsMock.getRootFS().supportsSynch()&&this.syncSync();return}this._stat.size=len;var newBuff=Buffer2.alloc(len);this._buffer.copy(newBuff,0,0,len),this._buffer=newBuff,this._flag.isSynchronous()&&_fsMock.getRootFS().supportsSynch()&&this.syncSync()},"truncateSync"),PreloadFile2.prototype.write=__name(function(buffer$$1,offset,length,position,cb){try{cb(null,this.writeSync(buffer$$1,offset,length,position),buffer$$1)}catch(e){cb(e)}},"write"),PreloadFile2.prototype.writeSync=__name(function(buffer$$1,offset,length,position){if(this._dirty=!0,position==null&&(position=this.getPos()),!this._flag.isWriteable())throw new ApiError(ErrorCode.EPERM,"File not opened with a writeable mode.");var endFp=position+length;if(endFp>this._stat.size&&(this._stat.size=endFp,endFp>this._buffer.length)){var newBuff=Buffer2.alloc(endFp);this._buffer.copy(newBuff),this._buffer=newBuff}var len=buffer$$1.copy(this._buffer,position,offset,offset+length);return this._stat.mtime=new Date,this._flag.isSynchronous()?(this.syncSync(),len):(this.setPos(position+len),len)},"writeSync"),PreloadFile2.prototype.read=__name(function(buffer$$1,offset,length,position,cb){try{cb(null,this.readSync(buffer$$1,offset,length,position),buffer$$1)}catch(e){cb(e)}},"read"),PreloadFile2.prototype.readSync=__name(function(buffer$$1,offset,length,position){if(!this._flag.isReadable())throw new ApiError(ErrorCode.EPERM,"File not opened with a readable mode.");position==null&&(position=this.getPos());var endRead=position+length;endRead>this._stat.size&&(length=this._stat.size-position);var rv=this._buffer.copy(buffer$$1,offset,position,position+length);return this._stat.atime=new Date,this._pos=position+length,rv},"readSync"),PreloadFile2.prototype.chmod=__name(function(mode,cb){try{this.chmodSync(mode),cb()}catch(e){cb(e)}},"chmod"),PreloadFile2.prototype.chmodSync=__name(function(mode){if(!this._fs.supportsProps())throw new ApiError(ErrorCode.ENOTSUP);this._dirty=!0,this._stat.chmod(mode),this.syncSync()},"chmodSync"),PreloadFile2.prototype.isDirty=__name(function(){return this._dirty},"isDirty"),PreloadFile2.prototype.resetDirty=__name(function(){this._dirty=!1},"resetDirty"),PreloadFile2})(BaseFile),NoSyncFile=(function(PreloadFile2){function NoSyncFile2(_fs,_path,_flag,_stat,contents){PreloadFile2.call(this,_fs,_path,_flag,_stat,contents)}return __name(NoSyncFile2,"NoSyncFile2"),PreloadFile2&&(NoSyncFile2.__proto__=PreloadFile2),NoSyncFile2.prototype=Object.create(PreloadFile2&&PreloadFile2.prototype),NoSyncFile2.prototype.constructor=NoSyncFile2,NoSyncFile2.prototype.sync=__name(function(cb){cb()},"sync"),NoSyncFile2.prototype.syncSync=__name(function(){},"syncSync"),NoSyncFile2.prototype.close=__name(function(cb){cb()},"close"),NoSyncFile2.prototype.closeSync=__name(function(){},"closeSync"),NoSyncFile2})(PreloadFile),MirrorFile=(function(PreloadFile$$1){function MirrorFile2(fs2,path$$1,flag,stat,data){PreloadFile$$1.call(this,fs2,path$$1,flag,stat,data)}return __name(MirrorFile2,"MirrorFile2"),PreloadFile$$1&&(MirrorFile2.__proto__=PreloadFile$$1),MirrorFile2.prototype=Object.create(PreloadFile$$1&&PreloadFile$$1.prototype),MirrorFile2.prototype.constructor=MirrorFile2,MirrorFile2.prototype.syncSync=__name(function(){this.isDirty()&&(this._fs._syncSync(this),this.resetDirty())},"syncSync"),MirrorFile2.prototype.closeSync=__name(function(){this.syncSync()},"closeSync"),MirrorFile2})(PreloadFile),AsyncMirror=(function(SynchronousFileSystem$$1){function AsyncMirror2(sync,async,deprecateMsg){if(deprecateMsg===void 0&&(deprecateMsg=!0),SynchronousFileSystem$$1.call(this),this._queue=[],this._queueRunning=!1,this._isInitialized=!1,this._initializeCallbacks=[],this._sync=sync,this._async=async,!sync.supportsSynch())throw new Error("The first argument to AsyncMirror needs to be a synchronous file system.");deprecationMessage(deprecateMsg,AsyncMirror2.Name,{sync:"sync file system instance",async:"async file system instance"})}return __name(AsyncMirror2,"AsyncMirror2"),SynchronousFileSystem$$1&&(AsyncMirror2.__proto__=SynchronousFileSystem$$1),AsyncMirror2.prototype=Object.create(SynchronousFileSystem$$1&&SynchronousFileSystem$$1.prototype),AsyncMirror2.prototype.constructor=AsyncMirror2,AsyncMirror2.Create=__name(function(opts,cb){try{var fs2=new AsyncMirror2(opts.sync,opts.async,!1);fs2.initialize(function(e){e?cb(e):cb(null,fs2)},!1)}catch(e){cb(e)}},"Create"),AsyncMirror2.isAvailable=__name(function(){return!0},"isAvailable"),AsyncMirror2.prototype.getName=__name(function(){return AsyncMirror2.Name},"getName"),AsyncMirror2.prototype._syncSync=__name(function(fd){this._sync.writeFileSync(fd.getPath(),fd.getBuffer(),null,FileFlag.getFileFlag("w"),fd.getStats().mode),this.enqueueOp({apiMethod:"writeFile",arguments:[fd.getPath(),fd.getBuffer(),null,fd.getFlag(),fd.getStats().mode]})},"_syncSync"),AsyncMirror2.prototype.initialize=__name(function(userCb,deprecateMsg){var this$1$1=this;deprecateMsg===void 0&&(deprecateMsg=!0),deprecateMsg&&console.warn("[AsyncMirror] AsyncMirror.initialize() is deprecated and will be removed in the next major version. Please use 'AsyncMirror.Create({ sync: (sync file system instance), async: (async file system instance)}, cb)' to create and initialize AsyncMirror instances.");var callbacks=this._initializeCallbacks,end=__name(function(e){this$1$1._isInitialized=!e,this$1$1._initializeCallbacks=[],callbacks.forEach(function(cb){return cb(e)})},"end");if(this._isInitialized)userCb();else if(callbacks.push(userCb)===1){var copyDirectory=__name(function(p,mode,cb){p!=="/"&&this$1$1._sync.mkdirSync(p,mode),this$1$1._async.readdir(p,function(err,files){var i2=0;function copyNextFile(err2){err2?cb(err2):i2<files.length?(copyItem(path.join(p,files[i2]),copyNextFile),i2++):cb()}__name(copyNextFile,"copyNextFile"),err?cb(err):copyNextFile()})},"copyDirectory"),copyFile=__name(function(p,mode,cb){this$1$1._async.readFile(p,null,FileFlag.getFileFlag("r"),function(err,data){if(err)cb(err);else try{this$1$1._sync.writeFileSync(p,data,null,FileFlag.getFileFlag("w"),mode)}catch(e){err=e}finally{cb(err)}})},"copyFile"),copyItem=__name(function(p,cb){this$1$1._async.stat(p,!1,function(err,stats){err?cb(err):stats.isDirectory()?copyDirectory(p,stats.mode,cb):copyFile(p,stats.mode,cb)})},"copyItem");copyDirectory("/",0,end)}},"initialize2"),AsyncMirror2.prototype.isReadOnly=__name(function(){return!1},"isReadOnly"),AsyncMirror2.prototype.supportsSynch=__name(function(){return!0},"supportsSynch"),AsyncMirror2.prototype.supportsLinks=__name(function(){return!1},"supportsLinks"),AsyncMirror2.prototype.supportsProps=__name(function(){return this._sync.supportsProps()&&this._async.supportsProps()},"supportsProps"),AsyncMirror2.prototype.renameSync=__name(function(oldPath,newPath){this.checkInitialized(),this._sync.renameSync(oldPath,newPath),this.enqueueOp({apiMethod:"rename",arguments:[oldPath,newPath]})},"renameSync"),AsyncMirror2.prototype.statSync=__name(function(p,isLstat){return this.checkInitialized(),this._sync.statSync(p,isLstat)},"statSync"),AsyncMirror2.prototype.openSync=__name(function(p,flag,mode){this.checkInitialized();var fd=this._sync.openSync(p,flag,mode);return fd.closeSync(),new MirrorFile(this,p,flag,this._sync.statSync(p,!1),this._sync.readFileSync(p,null,FileFlag.getFileFlag("r")))},"openSync"),AsyncMirror2.prototype.unlinkSync=__name(function(p){this.checkInitialized(),this._sync.unlinkSync(p),this.enqueueOp({apiMethod:"unlink",arguments:[p]})},"unlinkSync"),AsyncMirror2.prototype.rmdirSync=__name(function(p){this.checkInitialized(),this._sync.rmdirSync(p),this.enqueueOp({apiMethod:"rmdir",arguments:[p]})},"rmdirSync"),AsyncMirror2.prototype.mkdirSync=__name(function(p,mode){this.checkInitialized(),this._sync.mkdirSync(p,mode),this.enqueueOp({apiMethod:"mkdir",arguments:[p,mode]})},"mkdirSync"),AsyncMirror2.prototype.readdirSync=__name(function(p){return this.checkInitialized(),this._sync.readdirSync(p)},"readdirSync"),AsyncMirror2.prototype.existsSync=__name(function(p){return this.checkInitialized(),this._sync.existsSync(p)},"existsSync"),AsyncMirror2.prototype.chmodSync=__name(function(p,isLchmod,mode){this.checkInitialized(),this._sync.chmodSync(p,isLchmod,mode),this.enqueueOp({apiMethod:"chmod",arguments:[p,isLchmod,mode]})},"chmodSync"),AsyncMirror2.prototype.chownSync=__name(function(p,isLchown,uid,gid){this.checkInitialized(),this._sync.chownSync(p,isLchown,uid,gid),this.enqueueOp({apiMethod:"chown",arguments:[p,isLchown,uid,gid]})},"chownSync"),AsyncMirror2.prototype.utimesSync=__name(function(p,atime,mtime){this.checkInitialized(),this._sync.utimesSync(p,atime,mtime),this.enqueueOp({apiMethod:"utimes",arguments:[p,atime,mtime]})},"utimesSync"),AsyncMirror2.prototype.checkInitialized=__name(function(){if(!this._isInitialized)throw new ApiError(ErrorCode.EPERM,"AsyncMirrorFS is not initialized. Please initialize AsyncMirrorFS using its initialize() method before using it.")},"checkInitialized"),AsyncMirror2.prototype.enqueueOp=__name(function(op){var this$1$1=this;if(this._queue.push(op),!this._queueRunning){this._queueRunning=!0;var doNextOp=__name(function(err){if(err&&console.error("WARNING: File system has desynchronized. Received following error: "+err+`
$`),this$1$1._queue.length>0){var op2=this$1$1._queue.shift(),args=op2.arguments;args.push(doNextOp),this$1$1._async[op2.apiMethod].apply(this$1$1._async,args)}else this$1$1._queueRunning=!1},"doNextOp");doNextOp()}},"enqueueOp"),AsyncMirror2})(SynchronousFileSystem);AsyncMirror.Name="AsyncMirror",AsyncMirror.Options={sync:{type:"object",description:"The synchronous file system to mirror the asynchronous file system to."},async:{type:"object",description:"The asynchronous file system to mirror."}};function apply(func,thisArg,args){switch(args.length){case 0:return func.call(thisArg);case 1:return func.call(thisArg,args[0]);case 2:return func.call(thisArg,args[0],args[1]);case 3:return func.call(thisArg,args[0],args[1],args[2])}return func.apply(thisArg,args)}__name(apply,"apply");var nativeMax=Math.max;function overRest$1(func,start,transform){return start=nativeMax(start===void 0?func.length-1:start,0),function(){for(var args=arguments,index=-1,length=nativeMax(args.length-start,0),array=Array(length);++index<length;)array[index]=args[start+index];index=-1;for(var otherArgs=Array(start+1);++index<start;)otherArgs[index]=args[index];return otherArgs[start]=transform(array),apply(func,this,otherArgs)}}__name(overRest$1,"overRest$1");function identity(value){return value}__name(identity,"identity");function rest(func,start){return overRest$1(func,start,identity)}__name(rest,"rest");var initialParams=__name(function(fn){return rest(function(args){var callback=args.pop();fn.call(this,args,callback)})},"initialParams");function applyEach$1(eachfn){return rest(function(fns,args){var go=initialParams(function(args2,callback){var that=this;return eachfn(fns,function(fn,cb){fn.apply(that,args2.concat(cb))},callback)});return args.length?go.apply(this,args):go})}__name(applyEach$1,"applyEach$1");var freeGlobal=typeof global=="object"&&global&&global.Object===Object&&global,freeSelf=typeof self=="object"&&self&&self.Object===Object&&self,root=freeGlobal||freeSelf||Function("return this")(),Symbol$1=root.Symbol,objectProto=Object.prototype,hasOwnProperty=objectProto.hasOwnProperty,nativeObjectToString=objectProto.toString,symToStringTag$1=Symbol$1?Symbol$1.toStringTag:void 0;function getRawTag(value){var isOwn=hasOwnProperty.call(value,symToStringTag$1),tag=value[symToStringTag$1];try{value[symToStringTag$1]=void 0;var unmasked=!0}catch{}var result=nativeObjectToString.call(value);return unmasked&&(isOwn?value[symToStringTag$1]=tag:delete value[symToStringTag$1]),result}__name(getRawTag,"getRawTag");var objectProto$1=Object.prototype,nativeObjectToString$1=objectProto$1.toString;function objectToString(value){return nativeObjectToString$1.call(value)}__name(objectToString,"objectToString");var nullTag="[object Null]",undefinedTag="[object Undefined]",symToStringTag=Symbol$1?Symbol$1.toStringTag:void 0;function baseGetTag(value){return value==null?value===void 0?undefinedTag:nullTag:symToStringTag&&symToStringTag in Object(value)?getRawTag(value):objectToString(value)}__name(baseGetTag,"baseGetTag");function isObject(value){var type=typeof value;return value!=null&&(type=="object"||type=="function")}__name(isObject,"isObject");var asyncTag="[object AsyncFunction]",funcTag="[object Function]",genTag="[object GeneratorFunction]",proxyTag="[object Proxy]";function isFunction(value){if(!isObject(value))return!1;var tag=baseGetTag(value);return tag==funcTag||tag==genTag||tag==asyncTag||tag==proxyTag}__name(isFunction,"isFunction");var MAX_SAFE_INTEGER=9007199254740991;function isLength(value){return typeof value=="number"&&value>-1&&value%1==0&&value<=MAX_SAFE_INTEGER}__name(isLength,"isLength");function isArrayLike(value){return value!=null&&isLength(value.length)&&!isFunction(value)}__name(isArrayLike,"isArrayLike");var breakLoop={};function noop(){}__name(noop,"noop");function once(fn){return function(){if(fn!==null){var callFn=fn;fn=null,callFn.apply(this,arguments)}}}__name(once,"once");var iteratorSymbol=typeof Symbol=="function"&&Symbol.iterator,getIterator=__name(function(coll){return iteratorSymbol&&coll[iteratorSymbol]&&coll[iteratorSymbol]()},"getIterator");function baseTimes(n,iteratee){for(var index=-1,result=Array(n);++index<n;)result[index]=iteratee(index);return result}__name(baseTimes,"baseTimes");function isObjectLike(value){return value!=null&&typeof value=="object"}__name(isObjectLike,"isObjectLike");var argsTag="[object Arguments]";function baseIsArguments(value){return isObjectLike(value)&&baseGetTag(value)==argsTag}__name(baseIsArguments,"baseIsArguments");var objectProto$3=Object.prototype,hasOwnProperty$2=objectProto$3.hasOwnProperty,propertyIsEnumerable=objectProto$3.propertyIsEnumerable,isArguments=baseIsArguments((function(){return arguments})())?baseIsArguments:function(value){return isObjectLike(value)&&hasOwnProperty$2.call(value,"callee")&&!propertyIsEnumerable.call(value,"callee")},isArray=Array.isArray;function stubFalse(){return!1}__name(stubFalse,"stubFalse");var freeExports=typeof exports2=="object"&&exports2&&!exports2.nodeType&&exports2,freeModule=freeExports&&typeof module3=="object"&&module3&&!module3.nodeType&&module3,moduleExports=freeModule&&freeModule.exports===freeExports,Buffer$1=moduleExports?root.Buffer:void 0,nativeIsBuffer=Buffer$1?Buffer$1.isBuffer:void 0,isBuffer=nativeIsBuffer||stubFalse,MAX_SAFE_INTEGER$1=9007199254740991,reIsUint=/^(?:0|[1-9]\d*)$/;function isIndex(value,length){return length=length??MAX_SAFE_INTEGER$1,!!length&&(typeof value=="number"||reIsUint.test(value))&&value>-1&&value%1==0&&value<length}__name(isIndex,"isIndex");var argsTag$1="[object Arguments]",arrayTag="[object Array]",boolTag="[object Boolean]",dateTag="[object Date]",errorTag="[object Error]",funcTag$1="[object Function]",mapTag="[object Map]",numberTag="[object Number]",objectTag="[object Object]",regexpTag="[object RegExp]",setTag="[object Set]",stringTag="[object String]",weakMapTag="[object WeakMap]",arrayBufferTag="[object ArrayBuffer]",dataViewTag="[object DataView]",float32Tag="[object Float32Array]",float64Tag="[object Float64Array]",int8Tag="[object Int8Array]",int16Tag="[object Int16Array]",int32Tag="[object Int32Array]",uint8Tag="[object Uint8Array]",uint8ClampedTag="[object Uint8ClampedArray]",uint16Tag="[object Uint16Array]",uint32Tag="[object Uint32Array]",typedArrayTags={};typedArrayTags[float32Tag]=typedArrayTags[float64Tag]=typedArrayTags[int8Tag]=typedArrayTags[int16Tag]=typedArrayTags[int32Tag]=typedArrayTags[uint8Tag]=typedArrayTags[uint8ClampedTag]=typedArrayTags[uint16Tag]=typedArrayTags[uint32Tag]=!0,typedArrayTags[argsTag$1]=typedArrayTags[arrayTag]=typedArrayTags[arrayBufferTag]=typedArrayTags[boolTag]=typedArrayTags[dataViewTag]=typedArrayTags[dateTag]=typedArrayTags[errorTag]=typedArrayTags[funcTag$1]=typedArrayTags[mapTag]=typedArrayTags[numberTag]=typedArrayTags[objectTag]=typedArrayTags[regexpTag]=typedArrayTags[setTag]=typedArrayTags[stringTag]=typedArrayTags[weakMapTag]=!1;function baseIsTypedArray(value){return isObjectLike(value)&&isLength(value.length)&&!!typedArrayTags[baseGetTag(value)]}__name(baseIsTypedArray,"baseIsTypedArray");function baseUnary(func){return function(value){return func(value)}}__name(baseUnary,"baseUnary");var freeExports$1=typeof exports2=="object"&&exports2&&!exports2.nodeType&&exports2,freeModule$1=freeExports$1&&typeof module3=="object"&&module3&&!module3.nodeType&&module3,moduleExports$1=freeModule$1&&freeModule$1.exports===freeExports$1,freeProcess=moduleExports$1&&freeGlobal.process,nodeUtil=(function(){try{return freeProcess&&freeProcess.binding&&freeProcess.binding("util")}catch{}})(),nodeIsTypedArray=nodeUtil&&nodeUtil.isTypedArray,isTypedArray=nodeIsTypedArray?baseUnary(nodeIsTypedArray):baseIsTypedArray,objectProto$2=Object.prototype,hasOwnProperty$1=objectProto$2.hasOwnProperty;function arrayLikeKeys(value,inherited){var isArr=isArray(value),isArg=!isArr&&isArguments(value),isBuff=!isArr&&!isArg&&isBuffer(value),isType=!isArr&&!isArg&&!isBuff&&isTypedArray(value),skipIndexes=isArr||isArg||isBuff||isType,result=skipIndexes?baseTimes(value.length,String):[],length=result.length;for(var key in value)(inherited||hasOwnProperty$1.call(value,key))&&!(skipIndexes&&(key=="length"||isBuff&&(key=="offset"||key=="parent")||isType&&(key=="buffer"||key=="byteLength"||key=="byteOffset")||isIndex(key,length)))&&result.push(key);return result}__name(arrayLikeKeys,"arrayLikeKeys");var objectProto$5=Object.prototype;function isPrototype(value){var Ctor=value&&value.constructor,proto=typeof Ctor=="function"&&Ctor.prototype||objectProto$5;return value===proto}__name(isPrototype,"isPrototype");function overArg(func,transform){return function(arg){return func(transform(arg))}}__name(overArg,"overArg");var nativeKeys=overArg(Object.keys,Object),objectProto$4=Object.prototype,hasOwnProperty$3=objectProto$4.hasOwnProperty;function baseKeys(object){if(!isPrototype(object))return nativeKeys(object);var result=[];for(var key in Object(object))hasOwnProperty$3.call(object,key)&&key!="constructor"&&result.push(key);return result}__name(baseKeys,"baseKeys");function keys(object){return isArrayLike(object)?arrayLikeKeys(object):baseKeys(object)}__name(keys,"keys");function createArrayIterator(coll){var i2=-1,len=coll.length;return __name(function(){return++i2<len?{value:coll[i2],key:i2}:null},"next")}__name(createArrayIterator,"createArrayIterator");function createES2015Iterator(iterator2){var i2=-1;return __name(function(){var item=iterator2.next();return item.done?null:(i2++,{value:item.value,key:i2})},"next")}__name(createES2015Iterator,"createES2015Iterator");function createObjectIterator(obj){var okeys=keys(obj),i2=-1,len=okeys.length;return __name(function(){var key=okeys[++i2];return i2<len?{value:obj[key],key}:null},"next")}__name(createObjectIterator,"createObjectIterator");function iterator(coll){if(isArrayLike(coll))return createArrayIterator(coll);var iterator2=getIterator(coll);return iterator2?createES2015Iterator(iterator2):createObjectIterator(coll)}__name(iterator,"iterator");function onlyOnce(fn){return function(){if(fn===null)throw new Error("Callback was already called.");var callFn=fn;fn=null,callFn.apply(this,arguments)}}__name(onlyOnce,"onlyOnce");function _eachOfLimit(limit){return function(obj,iteratee,callback){if(callback=once(callback||noop),limit<=0||!obj)return callback(null);var nextElem=iterator(obj),done=!1,running=0;function iterateeCallback(err,value){if(running-=1,err)done=!0,callback(err);else{if(value===breakLoop||done&&running<=0)return done=!0,callback(null);replenish()}}__name(iterateeCallback,"iterateeCallback");function replenish(){for(;running<limit&&!done;){var elem=nextElem();if(elem===null){done=!0,running<=0&&callback(null);return}running+=1,iteratee(elem.value,elem.key,onlyOnce(iterateeCallback))}}__name(replenish,"replenish"),replenish()}}__name(_eachOfLimit,"_eachOfLimit");function eachOfLimit(coll,limit,iteratee,callback){_eachOfLimit(limit)(coll,iteratee,callback)}__name(eachOfLimit,"eachOfLimit");function doLimit(fn,limit){return function(iterable,iteratee,callback){return fn(iterable,limit,iteratee,callback)}}__name(doLimit,"doLimit");function eachOfArrayLike(coll,iteratee,callback){callback=once(callback||noop);var index=0,completed=0,length=coll.length;length===0&&callback(null);function iteratorCallback(err,value){err?callback(err):(++completed===length||value===breakLoop)&&callback(null)}for(__name(iteratorCallback,"iteratorCallback");index<length;index++)iteratee(coll[index],index,onlyOnce(iteratorCallback))}__name(eachOfArrayLike,"eachOfArrayLike");var eachOfGeneric=doLimit(eachOfLimit,1/0),eachOf=__name(function(coll,iteratee,callback){var eachOfImplementation=isArrayLike(coll)?eachOfArrayLike:eachOfGeneric;eachOfImplementation(coll,iteratee,callback)},"eachOf");function doParallel(fn){return function(obj,iteratee,callback){return fn(eachOf,obj,iteratee,callback)}}__name(doParallel,"doParallel");function _asyncMap(eachfn,arr,iteratee,callback){callback=callback||noop,arr=arr||[];var results=[],counter=0;eachfn(arr,function(value,_,callback2){var index=counter++;iteratee(value,function(err,v){results[index]=v,callback2(err)})},function(err){callback(err,results)})}__name(_asyncMap,"_asyncMap");var map=doParallel(_asyncMap);applyEach$1(map);function doParallelLimit(fn){return function(obj,limit,iteratee,callback){return fn(_eachOfLimit(limit),obj,iteratee,callback)}}__name(doParallelLimit,"doParallelLimit");var mapLimit=doParallelLimit(_asyncMap),mapSeries=doLimit(mapLimit,1);applyEach$1(mapSeries),rest(function(fn,args){return rest(function(callArgs){return fn.apply(null,args.concat(callArgs))})});function arrayEach(array,iteratee){for(var index=-1,length=array==null?0:array.length;++index<length&&iteratee(array[index],index,array)!==!1;);return array}__name(arrayEach,"arrayEach");function createBaseFor(fromRight){return function(object,iteratee,keysFunc){for(var index=-1,iterable=Object(object),props=keysFunc(object),length=props.length;length--;){var key=props[fromRight?length:++index];if(iteratee(iterable[key],key,iterable)===!1)break}return object}}__name(createBaseFor,"createBaseFor");var baseFor=createBaseFor();function baseForOwn(object,iteratee){return object&&baseFor(object,iteratee,keys)}__name(baseForOwn,"baseForOwn");function baseFindIndex(array,predicate,fromIndex,fromRight){for(var length=array.length,index=fromIndex+(fromRight?1:-1);fromRight?index--:++index<length;)if(predicate(array[index],index,array))return index;return-1}__name(baseFindIndex,"baseFindIndex");function baseIsNaN(value){return value!==value}__name(baseIsNaN,"baseIsNaN");function strictIndexOf(array,value,fromIndex){for(var index=fromIndex-1,length=array.length;++index<length;)if(array[index]===value)return index;return-1}__name(strictIndexOf,"strictIndexOf");function baseIndexOf(array,value,fromIndex){return value===value?strictIndexOf(array,value,fromIndex):baseFindIndex(array,baseIsNaN,fromIndex)}__name(baseIndexOf,"baseIndexOf");var rsAstralRange$1="\\ud800-\\udfff",rsComboMarksRange$1="\\u0300-\\u036f",reComboHalfMarksRange$1="\\ufe20-\\ufe2f",rsComboSymbolsRange$1="\\u20d0-\\u20ff",rsComboRange$1=rsComboMarksRange$1+reComboHalfMarksRange$1+rsComboSymbolsRange$1,rsVarRange$1="\\ufe0e\\ufe0f",rsAstral="["+rsAstralRange$1+"]",rsCombo="["+rsComboRange$1+"]",rsFitz="\\ud83c[\\udffb-\\udfff]",rsModifier="(?:"+rsCombo+"|"+rsFitz+")",rsNonAstral="[^"+rsAstralRange$1+"]",rsRegional="(?:\\ud83c[\\udde6-\\uddff]){2}",rsSurrPair="[\\ud800-\\udbff][\\udc00-\\udfff]",rsZWJ$1="\\u200d",reOptMod=rsModifier+"?",rsOptVar="["+rsVarRange$1+"]?",rsOptJoin="(?:"+rsZWJ$1+"(?:"+[rsNonAstral,rsRegional,rsSurrPair].join("|")+")"+rsOptVar+reOptMod+")*",rsSeq=rsOptVar+reOptMod+rsOptJoin,rsSymbol="(?:"+[rsNonAstral+rsCombo+"?",rsCombo,rsRegional,rsSurrPair,rsAstral].join("|")+")",hasSetImmediate=typeof setImmediate=="function"&&setImmediate,hasNextTick=typeof process=="object"&&typeof process.nextTick=="function";function fallback(fn){setTimeout(fn,0)}__name(fallback,"fallback");function wrap(defer){return rest(function(fn,args){defer(function(){fn.apply(null,args)})})}__name(wrap,"wrap");var _defer;hasSetImmediate?_defer=setImmediate:hasNextTick?_defer=process.nextTick:_defer=fallback,wrap(_defer);var eachOfSeries=doLimit(eachOfLimit,1);function reduce(coll,memo,iteratee,callback){callback=once(callback||noop),eachOfSeries(coll,function(x,i2,callback2){iteratee(memo,x,function(err,v){memo=v,callback2(err)})},function(err){callback(err,memo)})}__name(reduce,"reduce");var seq=rest(__name(function(functions){return rest(function(args){var that=this,cb=args[args.length-1];typeof cb=="function"?args.pop():cb=noop,reduce(functions,args,function(newargs,fn,cb2){fn.apply(that,newargs.concat(rest(function(err,nextargs){cb2(err,nextargs)})))},function(err,results){cb.apply(that,[err].concat(results))})})},"seq2"));rest(function(args){return seq.apply(null,args.reverse())}),rest(function(values){var args=[null].concat(values);return initialParams(function(ignoredArgs,callback){return callback.apply(this,args)})});function consoleFunc(name){return rest(function(fn,args){fn.apply(null,args.concat(rest(function(err,args2){typeof console=="object"&&(err?console.error&&console.error(err):console[name]&&arrayEach(args2,function(x){console[name](x)}))})))})}__name(consoleFunc,"consoleFunc"),consoleFunc("dir");function _withoutIndex(iteratee){return function(value,index,callback){return iteratee(value,callback)}}__name(_withoutIndex,"_withoutIndex");function eachLimit(coll,iteratee,callback){eachOf(coll,_withoutIndex(iteratee),callback)}__name(eachLimit,"eachLimit"),consoleFunc("log");var _defer$1;hasNextTick?_defer$1=process.nextTick:hasSetImmediate?_defer$1=setImmediate:_defer$1=fallback,wrap(_defer$1);var nativeCeil=Math.ceil,nativeMax$1=Math.max,errorCodeLookup;function constructErrorCodeLookup(){errorCodeLookup||(errorCodeLookup={},errorCodeLookup[Dropbox.ApiError.NETWORK_ERROR]=ErrorCode.EIO,errorCodeLookup[Dropbox.ApiError.INVALID_PARAM]=ErrorCode.EINVAL,errorCodeLookup[Dropbox.ApiError.INVALID_TOKEN]=ErrorCode.EPERM,errorCodeLookup[Dropbox.ApiError.OAUTH_ERROR]=ErrorCode.EPERM,errorCodeLookup[Dropbox.ApiError.NOT_FOUND]=ErrorCode.ENOENT,errorCodeLookup[Dropbox.ApiError.INVALID_METHOD]=ErrorCode.EINVAL,errorCodeLookup[Dropbox.ApiError.NOT_ACCEPTABLE]=ErrorCode.EINVAL,errorCodeLookup[Dropbox.ApiError.CONFLICT]=ErrorCode.EINVAL,errorCodeLookup[Dropbox.ApiError.RATE_LIMITED]=ErrorCode.EBUSY,errorCodeLookup[Dropbox.ApiError.SERVER_ERROR]=ErrorCode.EBUSY,errorCodeLookup[Dropbox.ApiError.OVER_QUOTA]=ErrorCode.ENOSPC)}__name(constructErrorCodeLookup,"constructErrorCodeLookup");function isFileInfo(cache){return cache&&cache.stat.isFile}__name(isFileInfo,"isFileInfo");function isDirInfo(cache){return cache&&cache.stat.isFolder}__name(isDirInfo,"isDirInfo");function isArrayBuffer(ab){return ab==null||typeof ab=="object"&&typeof ab.byteLength=="number"}__name(isArrayBuffer,"isArrayBuffer");var CachedDropboxClient=__name(function(client){this._cache={},this._client=client},"CachedDropboxClient2");CachedDropboxClient.prototype.readdir=__name(function(p,cb){var this$1$1=this,cacheInfo=this.getCachedDirInfo(p);this._wrap(function(interceptCb){cacheInfo!==null&&cacheInfo.contents?this$1$1._client.readdir(p,{contentHash:cacheInfo.stat.contentHash},interceptCb):this$1$1._client.readdir(p,interceptCb)},function(err,filenames,stat,folderEntries){err?err.status===Dropbox.ApiError.NO_CONTENT&&cacheInfo!==null?cb(null,cacheInfo.contents.slice(0)):cb(err):(this$1$1.updateCachedDirInfo(p,stat,filenames.slice(0)),folderEntries.forEach(function(entry){this$1$1.updateCachedInfo(path.join(p,entry.name),entry)}),cb(null,filenames))})},"readdir"),CachedDropboxClient.prototype.remove=__name(function(p,cb){var this$1$1=this;this._wrap(function(interceptCb){this$1$1._client.remove(p,interceptCb)},function(err,stat){err||this$1$1.updateCachedInfo(p,stat),cb(err)})},"remove"),CachedDropboxClient.prototype.move=__name(function(src,dest,cb){var this$1$1=this;this._wrap(function(interceptCb){this$1$1._client.move(src,dest,interceptCb)},function(err,stat){err||(this$1$1.deleteCachedInfo(src),this$1$1.updateCachedInfo(dest,stat)),cb(err)})},"move"),CachedDropboxClient.prototype.stat=__name(function(p,cb){var this$1$1=this;this._wrap(function(interceptCb){this$1$1._client.stat(p,interceptCb)},function(err,stat2){err||this$1$1.updateCachedInfo(p,stat2),cb(err,stat2)})},"stat"),CachedDropboxClient.prototype.readFile=__name(function(p,cb){var this$1$1=this,cacheInfo=this.getCachedFileInfo(p);cacheInfo!==null&&cacheInfo.contents!==null?this.stat(p,function(error,stat){error?cb(error):stat.contentHash===cacheInfo.stat.contentHash?cb(error,cacheInfo.contents.slice(0),cacheInfo.stat):this$1$1.readFile(p,cb)}):this._wrap(function(interceptCb){this$1$1._client.readFile(p,{arrayBuffer:!0},interceptCb)},function(err,contents,stat){err||this$1$1.updateCachedInfo(p,stat,contents.slice(0)),cb(err,contents,stat)})},"readFile"),CachedDropboxClient.prototype.writeFile=__name(function(p,contents,cb){var this$1$1=this;this._wrap(function(interceptCb){this$1$1._client.writeFile(p,contents,interceptCb)},function(err,stat){err||this$1$1.updateCachedInfo(p,stat,contents.slice(0)),cb(err,stat)})},"writeFile"),CachedDropboxClient.prototype.mkdir=__name(function(p,cb){var this$1$1=this;this._wrap(function(interceptCb){this$1$1._client.mkdir(p,interceptCb)},function(err,stat){err||this$1$1.updateCachedInfo(p,stat,[]),cb(err)})},"mkdir"),CachedDropboxClient.prototype._wrap=__name(function(performOp,cb){var numRun=0,interceptCb=__name(function(error){var timeoutDuration=2;if(error&&3>++numRun)switch(error.status){case Dropbox.ApiError.SERVER_ERROR:case Dropbox.ApiError.NETWORK_ERROR:case Dropbox.ApiError.RATE_LIMITED:setTimeout(function(){performOp(interceptCb)},timeoutDuration*1e3);break;default:cb.apply(null,arguments);break}else cb.apply(null,arguments)},"interceptCb");performOp(interceptCb)},"_wrap"),CachedDropboxClient.prototype.getCachedInfo=__name(function(p){return this._cache[p.toLowerCase()]},"getCachedInfo"),CachedDropboxClient.prototype.putCachedInfo=__name(function(p,cache){this._cache[p.toLowerCase()]=cache},"putCachedInfo"),CachedDropboxClient.prototype.deleteCachedInfo=__name(function(p){delete this._cache[p.toLowerCase()]},"deleteCachedInfo"),CachedDropboxClient.prototype.getCachedDirInfo=__name(function(p){var info=this.getCachedInfo(p);return isDirInfo(info)?info:null},"getCachedDirInfo"),CachedDropboxClient.prototype.getCachedFileInfo=__name(function(p){var info=this.getCachedInfo(p);return isFileInfo(info)?info:null},"getCachedFileInfo"),CachedDropboxClient.prototype.updateCachedDirInfo=__name(function(p,stat,contents){contents===void 0&&(contents=null);var cachedInfo=this.getCachedInfo(p);stat.contentHash!==null&&(cachedInfo===void 0||cachedInfo.stat.contentHash!==stat.contentHash)&&this.putCachedInfo(p,{stat,contents})},"updateCachedDirInfo"),CachedDropboxClient.prototype.updateCachedFileInfo=__name(function(p,stat,contents){contents===void 0&&(contents=null);var cachedInfo=this.getCachedInfo(p);stat.versionTag!==null&&(cachedInfo===void 0||cachedInfo.stat.versionTag!==stat.versionTag)&&this.putCachedInfo(p,{stat,contents})},"updateCachedFileInfo"),CachedDropboxClient.prototype.updateCachedInfo=__name(function(p,stat,contents){contents===void 0&&(contents=null),stat.isFile&&isArrayBuffer(contents)?this.updateCachedFileInfo(p,stat,contents):stat.isFolder&&Array.isArray(contents)&&this.updateCachedDirInfo(p,stat,contents)},"updateCachedInfo");var DropboxFile=(function(PreloadFile$$1){function DropboxFile2(_fs,_path,_flag,_stat,contents){PreloadFile$$1.call(this,_fs,_path,_flag,_stat,contents)}return __name(DropboxFile2,"DropboxFile2"),PreloadFile$$1&&(DropboxFile2.__proto__=PreloadFile$$1),DropboxFile2.prototype=Object.create(PreloadFile$$1&&PreloadFile$$1.prototype),DropboxFile2.prototype.constructor=DropboxFile2,DropboxFile2.prototype.sync=__name(function(cb){var this$1$1=this;if(this.isDirty()){var buffer$$1=this.getBuffer(),arrayBuffer=buffer2ArrayBuffer(buffer$$1);this._fs._writeFileStrict(this.getPath(),arrayBuffer,function(e){e||this$1$1.resetDirty(),cb(e)})}else cb()},"sync"),DropboxFile2.prototype.close=__name(function(cb){this.sync(cb)},"close"),DropboxFile2})(PreloadFile),DropboxFileSystem=(function(BaseFileSystem$$1){function DropboxFileSystem2(client,deprecateMsg){deprecateMsg===void 0&&(deprecateMsg=!0),BaseFileSystem$$1.call(this),this._client=new CachedDropboxClient(client),deprecationMessage(deprecateMsg,DropboxFileSystem2.Name,{client:"authenticated dropbox client instance"}),constructErrorCodeLookup()}return __name(DropboxFileSystem2,"DropboxFileSystem2"),BaseFileSystem$$1&&(DropboxFileSystem2.__proto__=BaseFileSystem$$1),DropboxFileSystem2.prototype=Object.create(BaseFileSystem$$1&&BaseFileSystem$$1.prototype),DropboxFileSystem2.prototype.constructor=DropboxFileSystem2,DropboxFileSystem2.Create=__name(function(opts,cb){cb(null,new DropboxFileSystem2(opts.client,!1))},"Create"),DropboxFileSystem2.isAvailable=__name(function(){return typeof Dropbox<"u"},"isAvailable"),DropboxFileSystem2.prototype.getName=__name(function(){return DropboxFileSystem2.Name},"getName"),DropboxFileSystem2.prototype.isReadOnly=__name(function(){return!1},"isReadOnly"),DropboxFileSystem2.prototype.supportsSymlinks=__name(function(){return!1},"supportsSymlinks"),DropboxFileSystem2.prototype.supportsProps=__name(function(){return!1},"supportsProps"),DropboxFileSystem2.prototype.supportsSynch=__name(function(){return!1},"supportsSynch"),DropboxFileSystem2.prototype.empty=__name(function(mainCb){var this$1$1=this;this._client.readdir("/",function(error,files){if(error)mainCb(this$1$1.convert(error,"/"));else{var deleteFile=__name(function(file,cb){var p=path.join("/",file);this$1$1._client.remove(p,function(err){cb(err?this$1$1.convert(err,p):null)})},"deleteFile"),finished=__name(function(err){err?mainCb(err):mainCb()},"finished");eachLimit(files,deleteFile,finished)}})},"empty"),DropboxFileSystem2.prototype.rename=__name(function(oldPath,newPath,cb){var this$1$1=this;this._client.move(oldPath,newPath,function(error){error?this$1$1._client.stat(newPath,function(error2,stat){if(error2||stat.isFolder){var missingPath=error.response.error.indexOf(oldPath)>-1?oldPath:newPath;cb(this$1$1.convert(error,missingPath))}else this$1$1._client.remove(newPath,function(error22){error22?cb(this$1$1.convert(error22,newPath)):this$1$1.rename(oldPath,newPath,cb)})}):cb()})},"rename"),DropboxFileSystem2.prototype.stat=__name(function(path$$1,isLstat,cb){var this$1$1=this;this._client.stat(path$$1,function(error,stat2){if(error)cb(this$1$1.convert(error,path$$1));else if(stat2&&stat2.isRemoved)cb(ApiError.FileError(ErrorCode.ENOENT,path$$1));else{var stats=new Stats(this$1$1._statType(stat2),stat2.size);return cb(null,stats)}})},"stat"),DropboxFileSystem2.prototype.open=__name(function(path$$1,flags,mode,cb){var this$1$1=this;this._client.readFile(path$$1,function(error,content,dbStat){if(error)if(flags.isReadable())cb(this$1$1.convert(error,path$$1));else switch(error.status){case Dropbox.ApiError.NOT_FOUND:var ab=new ArrayBuffer(0);return this$1$1._writeFileStrict(path$$1,ab,function(error2,stat){if(error2)cb(error2);else{var file2=this$1$1._makeFile(path$$1,flags,stat,arrayBuffer2Buffer(ab));cb(null,file2)}});default:return cb(this$1$1.convert(error,path$$1))}else{var buffer$$1;content===null?buffer$$1=emptyBuffer():buffer$$1=arrayBuffer2Buffer(content);var file=this$1$1._makeFile(path$$1,flags,dbStat,buffer$$1);return cb(null,file)}})},"open"),DropboxFileSystem2.prototype._writeFileStrict=__name(function(p,data,cb){var this$1$1=this,parent=path.dirname(p);this.stat(parent,!1,function(error,stat){error?cb(ApiError.FileError(ErrorCode.ENOENT,parent)):this$1$1._client.writeFile(p,data,function(error2,stat2){error2?cb(this$1$1.convert(error2,p)):cb(null,stat2)})})},"_writeFileStrict"),DropboxFileSystem2.prototype._statType=__name(function(stat){return stat.isFile?FileType.FILE:FileType.DIRECTORY},"_statType"),DropboxFileSystem2.prototype._makeFile=__name(function(path$$1,flag,stat,buffer$$1){var type=this._statType(stat),stats=new Stats(type,stat.size);return new DropboxFile(this,path$$1,flag,stats,buffer$$1)},"_makeFile"),DropboxFileSystem2.prototype._remove=__name(function(path$$1,cb,isFile){var this$1$1=this;this._client.stat(path$$1,function(error,stat){error?cb(this$1$1.convert(error,path$$1)):stat.isFile&&!isFile?cb(ApiError.FileError(ErrorCode.ENOTDIR,path$$1)):!stat.isFile&&isFile?cb(ApiError.FileError(ErrorCode.EISDIR,path$$1)):this$1$1._client.remove(path$$1,function(error2){cb(error2?this$1$1.convert(error2,path$$1):null)})})},"_remove"),DropboxFileSystem2.prototype.unlink=__name(function(path$$1,cb){this._remove(path$$1,cb,!0)},"unlink"),DropboxFileSystem2.prototype.rmdir=__name(function(path$$1,cb){this._remove(path$$1,cb,!1)},"rmdir"),DropboxFileSystem2.prototype.mkdir=__name(function(p,mode,cb){var this$1$1=this,parent=path.dirname(p);this._client.stat(parent,function(error,stat){error?cb(this$1$1.convert(error,parent)):this$1$1._client.mkdir(p,function(error2){cb(error2?ApiError.FileError(ErrorCode.EEXIST,p):null)})})},"mkdir"),DropboxFileSystem2.prototype.readdir=__name(function(path$$1,cb){var this$1$1=this;this._client.readdir(path$$1,function(error,files){return error?cb(this$1$1.convert(error)):cb(null,files)})},"readdir"),DropboxFileSystem2.prototype.convert=__name(function(err,path$$1){path$$1===void 0&&(path$$1=null);var errorCode=errorCodeLookup[err.status];return errorCode===void 0&&(errorCode=ErrorCode.EIO),path$$1?ApiError.FileError(errorCode,path$$1):new ApiError(errorCode)},"convert"),DropboxFileSystem2})(BaseFileSystem);DropboxFileSystem.Name="Dropbox",DropboxFileSystem.Options={client:{type:"object",description:"An *authenticated* Dropbox client. Must be from the 0.10 JS SDK.",validator:__name(function(opt,cb){opt.isAuthenticated&&opt.isAuthenticated()?cb():cb(new ApiError(ErrorCode.EINVAL,"'client' option must be an authenticated Dropbox client from the v0.10 JS SDK."))},"validator")}};function convertError(e,path$$1){path$$1===void 0&&(path$$1="");for(var errno=e.errno,parent=e.node,paths=[];parent&&(paths.unshift(parent.name),parent!==parent.parent);)parent=parent.parent;return new ApiError(errno,ErrorStrings[errno],paths.length>0?"/"+paths.join("/"):path$$1)}__name(convertError,"convertError");var EmscriptenFile=(function(BaseFile$$1){function EmscriptenFile2(_fs,_FS,_path,_stream){BaseFile$$1.call(this),this._fs=_fs,this._FS=_FS,this._path=_path,this._stream=_stream}return __name(EmscriptenFile2,"EmscriptenFile2"),BaseFile$$1&&(EmscriptenFile2.__proto__=BaseFile$$1),EmscriptenFile2.prototype=Object.create(BaseFile$$1&&BaseFile$$1.prototype),EmscriptenFile2.prototype.constructor=EmscriptenFile2,EmscriptenFile2.prototype.getPos=__name(function(){},"getPos"),EmscriptenFile2.prototype.close=__name(function(cb){var err=null;try{this.closeSync()}catch(e){err=e}finally{cb(err)}},"close"),EmscriptenFile2.prototype.closeSync=__name(function(){try{this._FS.close(this._stream)}catch(e){throw convertError(e,this._path)}},"closeSync"),EmscriptenFile2.prototype.stat=__name(function(cb){try{cb(null,this.statSync())}catch(e){cb(e)}},"stat"),EmscriptenFile2.prototype.statSync=__name(function(){try{return this._fs.statSync(this._path,!1)}catch(e){throw convertError(e,this._path)}},"statSync"),EmscriptenFile2.prototype.truncate=__name(function(len,cb){var err=null;try{this.truncateSync(len)}catch(e){err=e}finally{cb(err)}},"truncate"),EmscriptenFile2.prototype.truncateSync=__name(function(len){try{this._FS.ftruncate(this._stream.fd,len)}catch(e){throw convertError(e,this._path)}},"truncateSync"),EmscriptenFile2.prototype.write=__name(function(buffer$$1,offset,length,position,cb){try{cb(null,this.writeSync(buffer$$1,offset,length,position),buffer$$1)}catch(e){cb(e)}},"write"),EmscriptenFile2.prototype.writeSync=__name(function(buffer$$1,offset,length,position){try{var u8=buffer2Uint8array(buffer$$1),emPosition=position===null?void 0:position;return this._FS.write(this._stream,u8,offset,length,emPosition)}catch(e){throw convertError(e,this._path)}},"writeSync"),EmscriptenFile2.prototype.read=__name(function(buffer$$1,offset,length,position,cb){try{cb(null,this.readSync(buffer$$1,offset,length,position),buffer$$1)}catch(e){cb(e)}},"read"),EmscriptenFile2.prototype.readSync=__name(function(buffer$$1,offset,length,position){try{var u8=buffer2Uint8array(buffer$$1),emPosition=position===null?void 0:position;return this._FS.read(this._stream,u8,offset,length,emPosition)}catch(e){throw convertError(e,this._path)}},"readSync"),EmscriptenFile2.prototype.sync=__name(function(cb){cb()},"sync"),EmscriptenFile2.prototype.syncSync=__name(function(){},"syncSync"),EmscriptenFile2.prototype.chown=__name(function(uid,gid,cb){var err=null;try{this.chownSync(uid,gid)}catch(e){err=e}finally{cb(err)}},"chown"),EmscriptenFile2.prototype.chownSync=__name(function(uid,gid){try{this._FS.fchown(this._stream.fd,uid,gid)}catch(e){throw convertError(e,this._path)}},"chownSync"),EmscriptenFile2.prototype.chmod=__name(function(mode,cb){var err=null;try{this.chmodSync(mode)}catch(e){err=e}finally{cb(err)}},"chmod"),EmscriptenFile2.prototype.chmodSync=__name(function(mode){try{this._FS.fchmod(this._stream.fd,mode)}catch(e){throw convertError(e,this._path)}},"chmodSync"),EmscriptenFile2.prototype.utimes=__name(function(atime,mtime,cb){var err=null;try{this.utimesSync(atime,mtime)}catch(e){err=e}finally{cb(err)}},"utimes"),EmscriptenFile2.prototype.utimesSync=__name(function(atime,mtime){this._fs.utimesSync(this._path,atime,mtime)},"utimesSync"),EmscriptenFile2})(BaseFile),EmscriptenFileSystem=(function(SynchronousFileSystem$$1){function EmscriptenFileSystem2(_FS){SynchronousFileSystem$$1.call(this),this._FS=_FS}return __name(EmscriptenFileSystem2,"EmscriptenFileSystem2"),SynchronousFileSystem$$1&&(EmscriptenFileSystem2.__proto__=SynchronousFileSystem$$1),EmscriptenFileSystem2.prototype=Object.create(SynchronousFileSystem$$1&&SynchronousFileSystem$$1.prototype),EmscriptenFileSystem2.prototype.constructor=EmscriptenFileSystem2,EmscriptenFileSystem2.Create=__name(function(opts,cb){cb(null,new EmscriptenFileSystem2(opts.FS))},"Create"),EmscriptenFileSystem2.isAvailable=__name(function(){return!0},"isAvailable"),EmscriptenFileSystem2.prototype.getName=__name(function(){return this._FS.DB_NAME()},"getName"),EmscriptenFileSystem2.prototype.isReadOnly=__name(function(){return!1},"isReadOnly"),EmscriptenFileSystem2.prototype.supportsLinks=__name(function(){return!0},"supportsLinks"),EmscriptenFileSystem2.prototype.supportsProps=__name(function(){return!0},"supportsProps"),EmscriptenFileSystem2.prototype.supportsSynch=__name(function(){return!0},"supportsSynch"),EmscriptenFileSystem2.prototype.renameSync=__name(function(oldPath,newPath){try{this._FS.rename(oldPath,newPath)}catch(e){throw e.errno===ErrorCode.ENOENT?convertError(e,this.existsSync(oldPath)?newPath:oldPath):convertError(e)}},"renameSync"),EmscriptenFileSystem2.prototype.statSync=__name(function(p,isLstat){try{var stats=isLstat?this._FS.lstat(p):this._FS.stat(p),itemType=this.modeToFileType(stats.mode);return new Stats(itemType,stats.size,stats.mode,stats.atime,stats.mtime,stats.ctime)}catch(e){throw convertError(e,p)}},"statSync"),EmscriptenFileSystem2.prototype.openSync=__name(function(p,flag,mode){try{var stream=this._FS.open(p,flag.getFlagString(),mode);if(this._FS.isDir(stream.node.mode))throw this._FS.close(stream),ApiError.EISDIR(p);return new EmscriptenFile(this,this._FS,p,stream)}catch(e){throw convertError(e,p)}},"openSync"),EmscriptenFileSystem2.prototype.unlinkSync=__name(function(p){try{this._FS.unlink(p)}catch(e){throw convertError(e,p)}},"unlinkSync"),EmscriptenFileSystem2.prototype.rmdirSync=__name(function(p){try{this._FS.rmdir(p)}catch(e){throw convertError(e,p)}},"rmdirSync"),EmscriptenFileSystem2.prototype.mkdirSync=__name(function(p,mode){try{this._FS.mkdir(p,mode)}catch(e){throw convertError(e,p)}},"mkdirSync"),EmscriptenFileSystem2.prototype.readdirSync=__name(function(p){try{return this._FS.readdir(p).filter(function(p2){return p2!=="."&&p2!==".."})}catch(e){throw convertError(e,p)}},"readdirSync"),EmscriptenFileSystem2.prototype.truncateSync=__name(function(p,len){try{this._FS.truncate(p,len)}catch(e){throw convertError(e,p)}},"truncateSync"),EmscriptenFileSystem2.prototype.readFileSync=__name(function(p,encoding,flag){try{var data=this._FS.readFile(p,{flags:flag.getFlagString()}),buff=uint8Array2Buffer(data);return encoding?buff.toString(encoding):buff}catch(e){throw convertError(e,p)}},"readFileSync"),EmscriptenFileSystem2.prototype.writeFileSync=__name(function(p,data,encoding,flag,mode){try{encoding&&(data=Buffer2.from(data,encoding));var u8=buffer2Uint8array(data);this._FS.writeFile(p,u8,{flags:flag.getFlagString(),encoding:"binary"}),this._FS.chmod(p,mode)}catch(e){throw convertError(e,p)}},"writeFileSync"),EmscriptenFileSystem2.prototype.chmodSync=__name(function(p,isLchmod,mode){try{isLchmod?this._FS.lchmod(p,mode):this._FS.chmod(p,mode)}catch(e){throw convertError(e,p)}},"chmodSync"),EmscriptenFileSystem2.prototype.chownSync=__name(function(p,isLchown,uid,gid){try{isLchown?this._FS.lchown(p,uid,gid):this._FS.chown(p,uid,gid)}catch(e){throw convertError(e,p)}},"chownSync"),EmscriptenFileSystem2.prototype.symlinkSync=__name(function(srcpath,dstpath,type){try{this._FS.symlink(srcpath,dstpath)}catch(e){throw convertError(e)}},"symlinkSync"),EmscriptenFileSystem2.prototype.readlinkSync=__name(function(p){try{return this._FS.readlink(p)}catch(e){throw convertError(e,p)}},"readlinkSync"),EmscriptenFileSystem2.prototype.utimesSync=__name(function(p,atime,mtime){try{this._FS.utime(p,atime.getTime(),mtime.getTime())}catch(e){throw convertError(e,p)}},"utimesSync"),EmscriptenFileSystem2.prototype.modeToFileType=__name(function(mode){if(this._FS.isDir(mode))return FileType.DIRECTORY;if(this._FS.isFile(mode))return FileType.FILE;if(this._FS.isLink(mode))return FileType.SYMLINK;throw ApiError.EPERM("Invalid mode: "+mode)},"modeToFileType"),EmscriptenFileSystem2})(SynchronousFileSystem);EmscriptenFileSystem.Name="EmscriptenFileSystem",EmscriptenFileSystem.Options={FS:{type:"object",description:"The Emscripten file system to use (the `FS` variable)"}};var FolderAdapter=(function(BaseFileSystem$$1){function FolderAdapter2(folder,wrapped){BaseFileSystem$$1.call(this),this._folder=folder,this._wrapped=wrapped}return __name(FolderAdapter2,"FolderAdapter2"),BaseFileSystem$$1&&(FolderAdapter2.__proto__=BaseFileSystem$$1),FolderAdapter2.prototype=Object.create(BaseFileSystem$$1&&BaseFileSystem$$1.prototype),FolderAdapter2.prototype.constructor=FolderAdapter2,FolderAdapter2.Create=__name(function(opts,cb){cb(null,new FolderAdapter2(opts.folder,opts.wrapped))},"Create"),FolderAdapter2.isAvailable=__name(function(){return!0},"isAvailable"),FolderAdapter2.prototype.initialize=__name(function(cb){var this$1$1=this;this._wrapped.exists(this._folder,function(exists){exists?cb():this$1$1._wrapped.isReadOnly()?cb(ApiError.ENOENT(this$1$1._folder)):this$1$1._wrapped.mkdir(this$1$1._folder,511,cb)})},"initialize2"),FolderAdapter2.prototype.getName=__name(function(){return this._wrapped.getName()},"getName"),FolderAdapter2.prototype.isReadOnly=__name(function(){return this._wrapped.isReadOnly()},"isReadOnly"),FolderAdapter2.prototype.supportsProps=__name(function(){return this._wrapped.supportsProps()},"supportsProps"),FolderAdapter2.prototype.supportsSynch=__name(function(){return this._wrapped.supportsSynch()},"supportsSynch"),FolderAdapter2.prototype.supportsLinks=__name(function(){return!1},"supportsLinks"),FolderAdapter2})(BaseFileSystem);FolderAdapter.Name="FolderAdapter",FolderAdapter.Options={folder:{type:"string",description:"The folder to use as the root directory"},wrapped:{type:"object",description:"The file system to wrap"}};function translateError(folder,e){if(e!==null&&typeof e=="object"){var err=e,p=err.path;p&&(p="/"+path.relative(folder,p),err.message=err.message.replace(err.path,p),err.path=p)}return e}__name(translateError,"translateError");function wrapCallback(folder,cb){return typeof cb=="function"?function(err){arguments.length>0&&(arguments[0]=translateError(folder,err)),cb.apply(null,arguments)}:cb}__name(wrapCallback,"wrapCallback");function wrapFunction(name,wrapFirst,wrapSecond){return name.slice(name.length-4)!=="Sync"?function(){return arguments.length>0&&(wrapFirst&&(arguments[0]=path.join(this._folder,arguments[0])),wrapSecond&&(arguments[1]=path.join(this._folder,arguments[1])),arguments[arguments.length-1]=wrapCallback(this._folder,arguments[arguments.length-1])),this._wrapped[name].apply(this._wrapped,arguments)}:function(){try{return wrapFirst&&(arguments[0]=path.join(this._folder,arguments[0])),wrapSecond&&(arguments[1]=path.join(this._folder,arguments[1])),this._wrapped[name].apply(this._wrapped,arguments)}catch(e){throw translateError(this._folder,e)}}}__name(wrapFunction,"wrapFunction"),["diskSpace","stat","statSync","open","openSync","unlink","unlinkSync","rmdir","rmdirSync","mkdir","mkdirSync","readdir","readdirSync","exists","existsSync","realpath","realpathSync","truncate","truncateSync","readFile","readFileSync","writeFile","writeFileSync","appendFile","appendFileSync","chmod","chmodSync","chown","chownSync","utimes","utimesSync","readlink","readlinkSync"].forEach(function(name){FolderAdapter.prototype[name]=wrapFunction(name,!0,!1)}),["rename","renameSync","link","linkSync","symlink","symlinkSync"].forEach(function(name){FolderAdapter.prototype[name]=wrapFunction(name,!0,!0)});var toExport;typeof window<"u"?toExport=window:typeof self<"u"?toExport=self:toExport=global;var global$1=toExport;function isDirectoryEntry(entry){return entry.isDirectory}__name(isDirectoryEntry,"isDirectoryEntry");var _getFS=global$1.webkitRequestFileSystem||global$1.requestFileSystem||null;function _requestQuota(type,size,success,errorCallback){if(typeof navigator.webkitPersistentStorage<"u")switch(type){case global$1.PERSISTENT:navigator.webkitPersistentStorage.requestQuota(size,success,errorCallback);break;case global$1.TEMPORARY:navigator.webkitTemporaryStorage.requestQuota(size,success,errorCallback);break;default:errorCallback(new TypeError("Invalid storage type: "+type));break}else global$1.webkitStorageInfo.requestQuota(type,size,success,errorCallback)}__name(_requestQuota,"_requestQuota");function _toArray(list2){return Array.prototype.slice.call(list2||[],0)}__name(_toArray,"_toArray");function convertError$1(err,p,expectedDir){switch(err.name){case"PathExistsError":return ApiError.EEXIST(p);case"QuotaExceededError":return ApiError.FileError(ErrorCode.ENOSPC,p);case"NotFoundError":return ApiError.ENOENT(p);case"SecurityError":return ApiError.FileError(ErrorCode.EACCES,p);case"InvalidModificationError":return ApiError.FileError(ErrorCode.EPERM,p);case"TypeMismatchError":return ApiError.FileError(expectedDir?ErrorCode.ENOTDIR:ErrorCode.EISDIR,p);case"EncodingError":case"InvalidStateError":case"NoModificationAllowedError":default:return ApiError.FileError(ErrorCode.EINVAL,p)}}__name(convertError$1,"convertError$1");var HTML5FSFile=(function(PreloadFile$$1){function HTML5FSFile2(fs2,entry,path$$1,flag,stat,contents){PreloadFile$$1.call(this,fs2,path$$1,flag,stat,contents),this._entry=entry}return __name(HTML5FSFile2,"HTML5FSFile2"),PreloadFile$$1&&(HTML5FSFile2.__proto__=PreloadFile$$1),HTML5FSFile2.prototype=Object.create(PreloadFile$$1&&PreloadFile$$1.prototype),HTML5FSFile2.prototype.constructor=HTML5FSFile2,HTML5FSFile2.prototype.sync=__name(function(cb){var this$1$1=this;if(!this.isDirty())return cb();this._entry.createWriter(function(writer){var buffer$$1=this$1$1.getBuffer(),blob=new Blob([buffer2ArrayBuffer(buffer$$1)]),length=blob.size;writer.onwriteend=function(err){writer.onwriteend=null,writer.onerror=null,writer.truncate(length),this$1$1.resetDirty(),cb()},writer.onerror=function(err){cb(convertError$1(err,this$1$1.getPath(),!1))},writer.write(blob)})},"sync"),HTML5FSFile2.prototype.close=__name(function(cb){this.sync(cb)},"close"),HTML5FSFile2})(PreloadFile),HTML5FS=(function(BaseFileSystem$$1){function HTML5FS2(size,type,deprecateMsg){size===void 0&&(size=5),type===void 0&&(type=global$1.PERSISTENT),deprecateMsg===void 0&&(deprecateMsg=!0),BaseFileSystem$$1.call(this),this.size=1024*1024*size,this.type=type,deprecationMessage(deprecateMsg,HTML5FS2.Name,{size,type})}return __name(HTML5FS2,"HTML5FS2"),BaseFileSystem$$1&&(HTML5FS2.__proto__=BaseFileSystem$$1),HTML5FS2.prototype=Object.create(BaseFileSystem$$1&&BaseFileSystem$$1.prototype),HTML5FS2.prototype.constructor=HTML5FS2,HTML5FS2.Create=__name(function(opts,cb){var fs2=new HTML5FS2(opts.size,opts.type,!1);fs2.allocate(function(e){return e?cb(e):cb(null,fs2)},!1)},"Create"),HTML5FS2.isAvailable=__name(function(){return!!_getFS},"isAvailable"),HTML5FS2.prototype.getName=__name(function(){return HTML5FS2.Name},"getName"),HTML5FS2.prototype.isReadOnly=__name(function(){return!1},"isReadOnly"),HTML5FS2.prototype.supportsSymlinks=__name(function(){return!1},"supportsSymlinks"),HTML5FS2.prototype.supportsProps=__name(function(){return!1},"supportsProps"),HTML5FS2.prototype.supportsSynch=__name(function(){return!1},"supportsSynch"),HTML5FS2.prototype.allocate=__name(function(cb,deprecateMsg){var this$1$1=this;cb===void 0&&(cb=__name(function(){},"cb")),deprecateMsg===void 0&&(deprecateMsg=!0),deprecateMsg&&console.warn("[HTML5FS] HTML5FS.allocate() is deprecated and will be removed in the next major release. Please use 'HTML5FS.Create({type: "+this.type+", size: "+this.size+"}, cb)' to create and allocate HTML5FS instances.");var success=__name(function(fs2){this$1$1.fs=fs2,cb()},"success"),error=__name(function(err){cb(convertError$1(err,"/",!0))},"error");this.type===global$1.PERSISTENT?_requestQuota(this.type,this.size,function(granted){_getFS(this$1$1.type,granted,success,error)},error):_getFS(this.type,this.size,success,error)},"allocate"),HTML5FS2.prototype.empty=__name(function(mainCb){this._readdir("/",function(err,entries){if(err)console.error("Failed to empty FS"),mainCb(err);else{var finished=__name(function(er){err?(console.error("Failed to empty FS"),mainCb(err)):mainCb()},"finished"),deleteEntry=__name(function(entry,cb){var succ=__name(function(){cb()},"succ"),error=__name(function(err2){cb(convertError$1(err2,entry.fullPath,!entry.isDirectory))},"error");isDirectoryEntry(entry)?entry.removeRecursively(succ,error):entry.remove(succ,error)},"deleteEntry");eachLimit(entries,deleteEntry,finished)}})},"empty"),HTML5FS2.prototype.rename=__name(function(oldPath,newPath,cb){var this$1$1=this,semaphore=2,successCount=0,root2=this.fs.root,currentPath=oldPath,error=__name(function(err){--semaphore<=0&&cb(convertError$1(err,currentPath,!1))},"error"),success=__name(function(file){if(++successCount===2)return cb(new ApiError(ErrorCode.EINVAL,"Something was identified as both a file and a directory. This should never happen."));if(oldPath===newPath)return cb();currentPath=path.dirname(newPath),root2.getDirectory(currentPath,{},function(parentDir){currentPath=path.basename(newPath),file.moveTo(parentDir,currentPath,function(entry){cb()},function(err){file.isDirectory?(currentPath=newPath,this$1$1.unlink(newPath,function(e){e?error(err):this$1$1.rename(oldPath,newPath,cb)})):error(err)})},error)},"success");root2.getFile(oldPath,{},success,error),root2.getDirectory(oldPath,{},success,error)},"rename"),HTML5FS2.prototype.stat=__name(function(path$$1,isLstat,cb){var this$1$1=this,opts={create:!1},loadAsFile=__name(function(entry){var fileFromEntry=__name(function(file){var stat2=new Stats(FileType.FILE,file.size);cb(null,stat2)},"fileFromEntry");entry.file(fileFromEntry,failedToLoad)},"loadAsFile"),loadAsDir=__name(function(dir$$1){var size=4096,stat2=new Stats(FileType.DIRECTORY,size);cb(null,stat2)},"loadAsDir"),failedToLoad=__name(function(err){cb(convertError$1(err,path$$1,!1))},"failedToLoad"),failedToLoadAsFile=__name(function(){this$1$1.fs.root.getDirectory(path$$1,opts,loadAsDir,failedToLoad)},"failedToLoadAsFile");this.fs.root.getFile(path$$1,opts,loadAsFile,failedToLoadAsFile)},"stat"),HTML5FS2.prototype.open=__name(function(p,flags,mode,cb){var this$1$1=this,error=__name(function(err){err.name==="InvalidModificationError"&&flags.isExclusive()?cb(ApiError.EEXIST(p)):cb(convertError$1(err,p,!1))},"error");this.fs.root.getFile(p,{create:flags.pathNotExistsAction()===ActionType.CREATE_FILE,exclusive:flags.isExclusive()},function(entry){entry.file(function(file){var reader=new FileReader;reader.onloadend=function(event){var bfsFile=this$1$1._makeFile(p,entry,flags,file,reader.result);cb(null,bfsFile)},reader.onerror=function(ev){error(reader.error)},reader.readAsArrayBuffer(file)},error)},error)},"open"),HTML5FS2.prototype.unlink=__name(function(path$$1,cb){this._remove(path$$1,cb,!0)},"unlink"),HTML5FS2.prototype.rmdir=__name(function(path$$1,cb){var this$1$1=this;this.readdir(path$$1,function(e,files){e?cb(e):files.length>0?cb(ApiError.ENOTEMPTY(path$$1)):this$1$1._remove(path$$1,cb,!1)})},"rmdir"),HTML5FS2.prototype.mkdir=__name(function(path$$1,mode,cb){var opts={create:!0,exclusive:!0},success=__name(function(dir$$1){cb()},"success"),error=__name(function(err){cb(convertError$1(err,path$$1,!0))},"error");this.fs.root.getDirectory(path$$1,opts,success,error)},"mkdir"),HTML5FS2.prototype.readdir=__name(function(path$$1,cb){this._readdir(path$$1,function(e,entries){if(entries){for(var rv=[],i2=0,list2=entries;i2<list2.length;i2+=1){var entry=list2[i2];rv.push(entry.name)}cb(null,rv)}else return cb(e)})},"readdir"),HTML5FS2.prototype._makeFile=__name(function(path$$1,entry,flag,stat,data){data===void 0&&(data=new ArrayBuffer(0));var stats=new Stats(FileType.FILE,stat.size),buffer$$1=arrayBuffer2Buffer(data);return new HTML5FSFile(this,entry,path$$1,flag,stats,buffer$$1)},"_makeFile"),HTML5FS2.prototype._readdir=__name(function(path$$1,cb){var error=__name(function(err){cb(convertError$1(err,path$$1,!0))},"error");this.fs.root.getDirectory(path$$1,{create:!1},function(dirEntry){var reader=dirEntry.createReader(),entries=[],readEntries=__name(function(){reader.readEntries((function(results){results.length?(entries=entries.concat(_toArray(results)),readEntries()):cb(null,entries)}),error)},"readEntries");readEntries()},error)},"_readdir"),HTML5FS2.prototype._remove=__name(function(path$$1,cb,isFile){var success=__name(function(entry){var succ=__name(function(){cb()},"succ"),err=__name(function(err2){cb(convertError$1(err2,path$$1,!isFile))},"err");entry.remove(succ,err)},"success"),error=__name(function(err){cb(convertError$1(err,path$$1,!isFile))},"error"),opts={create:!1};isFile?this.fs.root.getFile(path$$1,opts,success,error):this.fs.root.getDirectory(path$$1,opts,success,error)},"_remove"),HTML5FS2})(BaseFileSystem);HTML5FS.Name="HTML5FS",HTML5FS.Options={size:{type:"number",optional:!0,description:"Storage quota to request, in megabytes. Allocated value may be less. Defaults to 5."},type:{type:"number",optional:!0,description:"window.PERSISTENT or window.TEMPORARY. Defaults to PERSISTENT."}};var Inode=__name(function(id,size,mode,atime,mtime,ctime){this.id=id,this.size=size,this.mode=mode,this.atime=atime,this.mtime=mtime,this.ctime=ctime},"Inode2");Inode.fromBuffer=__name(function(buffer$$1){if(buffer$$1===void 0)throw new Error("NO");return new Inode(buffer$$1.toString("ascii",30),buffer$$1.readUInt32LE(0),buffer$$1.readUInt16LE(4),buffer$$1.readDoubleLE(6),buffer$$1.readDoubleLE(14),buffer$$1.readDoubleLE(22))},"fromBuffer"),Inode.prototype.toStats=__name(function(){return new Stats((this.mode&61440)===FileType.DIRECTORY?FileType.DIRECTORY:FileType.FILE,this.size,this.mode,new Date(this.atime),new Date(this.mtime),new Date(this.ctime))},"toStats"),Inode.prototype.getSize=__name(function(){return 30+this.id.length},"getSize"),Inode.prototype.toBuffer=__name(function(buff){return buff===void 0&&(buff=Buffer2.alloc(this.getSize())),buff.writeUInt32LE(this.size,0),buff.writeUInt16LE(this.mode,4),buff.writeDoubleLE(this.atime,6),buff.writeDoubleLE(this.mtime,14),buff.writeDoubleLE(this.ctime,22),buff.write(this.id,30,this.id.length,"ascii"),buff},"toBuffer"),Inode.prototype.update=__name(function(stats){var hasChanged=!1;this.size!==stats.size&&(this.size=stats.size,hasChanged=!0),this.mode!==stats.mode&&(this.mode=stats.mode,hasChanged=!0);var atimeMs=stats.atime.getTime();this.atime!==atimeMs&&(this.atime=atimeMs,hasChanged=!0);var mtimeMs=stats.mtime.getTime();this.mtime!==mtimeMs&&(this.mtime=mtimeMs,hasChanged=!0);var ctimeMs=stats.ctime.getTime();return this.ctime!==ctimeMs&&(this.ctime=ctimeMs,hasChanged=!0),hasChanged},"update"),Inode.prototype.isFile=__name(function(){return(this.mode&61440)===FileType.FILE},"isFile"),Inode.prototype.isDirectory=__name(function(){return(this.mode&61440)===FileType.DIRECTORY},"isDirectory");var ROOT_NODE_ID="/",emptyDirNode=null;function getEmptyDirNode(){return emptyDirNode||(emptyDirNode=Buffer2.from("{}"))}__name(getEmptyDirNode,"getEmptyDirNode");function GenerateRandomID(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(c){var r=Math.random()*16|0,v=c==="x"?r:r&3|8;return v.toString(16)})}__name(GenerateRandomID,"GenerateRandomID");function noError(e,cb){return e?(cb(e),!1):!0}__name(noError,"noError");function noErrorTx(e,tx,cb){return e?(tx.abort(function(){cb(e)}),!1):!0}__name(noErrorTx,"noErrorTx");var SimpleSyncRWTransaction=__name(function(store){this.store=store,this.originalData={},this.modifiedKeys=[]},"SimpleSyncRWTransaction2");SimpleSyncRWTransaction.prototype.get=__name(function(key){var val=this.store.get(key);return this.stashOldValue(key,val),val},"get"),SimpleSyncRWTransaction.prototype.put=__name(function(key,data,overwrite){return this.markModified(key),this.store.put(key,data,overwrite)},"put"),SimpleSyncRWTransaction.prototype.del=__name(function(key){this.markModified(key),this.store.del(key)},"del"),SimpleSyncRWTransaction.prototype.commit=__name(function(){},"commit"),SimpleSyncRWTransaction.prototype.abort=__name(function(){for(var this$1$1=this,i2=0,list2=this$1$1.modifiedKeys;i2<list2.length;i2+=1){var key=list2[i2],value=this$1$1.originalData[key];value?this$1$1.store.put(key,value,!0):this$1$1.store.del(key)}},"abort"),SimpleSyncRWTransaction.prototype.stashOldValue=__name(function(key,value){this.originalData.hasOwnProperty(key)||(this.originalData[key]=value)},"stashOldValue"),SimpleSyncRWTransaction.prototype.markModified=__name(function(key){this.modifiedKeys.indexOf(key)===-1&&(this.modifiedKeys.push(key),this.originalData.hasOwnProperty(key)||(this.originalData[key]=this.store.get(key)))},"markModified");var SyncKeyValueFile=(function(PreloadFile$$1){function SyncKeyValueFile2(_fs,_path,_flag,_stat,contents){PreloadFile$$1.call(this,_fs,_path,_flag,_stat,contents)}return __name(SyncKeyValueFile2,"SyncKeyValueFile2"),PreloadFile$$1&&(SyncKeyValueFile2.__proto__=PreloadFile$$1),SyncKeyValueFile2.prototype=Object.create(PreloadFile$$1&&PreloadFile$$1.prototype),SyncKeyValueFile2.prototype.constructor=SyncKeyValueFile2,SyncKeyValueFile2.prototype.syncSync=__name(function(){this.isDirty()&&(this._fs._syncSync(this.getPath(),this.getBuffer(),this.getStats()),this.resetDirty())},"syncSync"),SyncKeyValueFile2.prototype.closeSync=__name(function(){this.syncSync()},"closeSync"),SyncKeyValueFile2})(PreloadFile),SyncKeyValueFileSystem=(function(SynchronousFileSystem$$1){function SyncKeyValueFileSystem2(options){SynchronousFileSystem$$1.call(this),this.store=options.store,this.makeRootDirectory()}return __name(SyncKeyValueFileSystem2,"SyncKeyValueFileSystem2"),SynchronousFileSystem$$1&&(SyncKeyValueFileSystem2.__proto__=SynchronousFileSystem$$1),SyncKeyValueFileSystem2.prototype=Object.create(SynchronousFileSystem$$1&&SynchronousFileSystem$$1.prototype),SyncKeyValueFileSystem2.prototype.constructor=SyncKeyValueFileSystem2,SyncKeyValueFileSystem2.isAvailable=__name(function(){return!0},"isAvailable"),SyncKeyValueFileSystem2.prototype.getName=__name(function(){return this.store.name()},"getName"),SyncKeyValueFileSystem2.prototype.isReadOnly=__name(function(){return!1},"isReadOnly"),SyncKeyValueFileSystem2.prototype.supportsSymlinks=__name(function(){return!1},"supportsSymlinks"),SyncKeyValueFileSystem2.prototype.supportsProps=__name(function(){return!1},"supportsProps"),SyncKeyValueFileSystem2.prototype.supportsSynch=__name(function(){return!0},"supportsSynch"),SyncKeyValueFileSystem2.prototype.empty=__name(function(){this.store.clear(),this.makeRootDirectory()},"empty"),SyncKeyValueFileSystem2.prototype.renameSync=__name(function(oldPath,newPath){var tx=this.store.beginTransaction("readwrite"),oldParent=path.dirname(oldPath),oldName=path.basename(oldPath),newParent=path.dirname(newPath),newName=path.basename(newPath),oldDirNode=this.findINode(tx,oldParent),oldDirList=this.getDirListing(tx,oldParent,oldDirNode);if(!oldDirList[oldName])throw ApiError.ENOENT(oldPath);var nodeId=oldDirList[oldName];if(delete oldDirList[oldName],(newParent+"/").indexOf(oldPath+"/")===0)throw new ApiError(ErrorCode.EBUSY,oldParent);var newDirNode,newDirList;if(newParent===oldParent?(newDirNode=oldDirNode,newDirList=oldDirList):(newDirNode=this.findINode(tx,newParent),newDirList=this.getDirListing(tx,newParent,newDirNode)),newDirList[newName]){var newNameNode=this.getINode(tx,newPath,newDirList[newName]);if(newNameNode.isFile())try{tx.del(newNameNode.id),tx.del(newDirList[newName])}catch(e){throw tx.abort(),e}else throw ApiError.EPERM(newPath)}newDirList[newName]=nodeId;try{tx.put(oldDirNode.id,Buffer2.from(JSON.stringify(oldDirList)),!0),tx.put(newDirNode.id,Buffer2.from(JSON.stringify(newDirList)),!0)}catch(e){throw tx.abort(),e}tx.commit()},"renameSync"),SyncKeyValueFileSystem2.prototype.statSync=__name(function(p,isLstat){return this.findINode(this.store.beginTransaction("readonly"),p).toStats()},"statSync"),SyncKeyValueFileSystem2.prototype.createFileSync=__name(function(p,flag,mode){var tx=this.store.beginTransaction("readwrite"),data=emptyBuffer(),newFile=this.commitNewFile(tx,p,FileType.FILE,mode,data);return new SyncKeyValueFile(this,p,flag,newFile.toStats(),data)},"createFileSync"),SyncKeyValueFileSystem2.prototype.openFileSync=__name(function(p,flag){var tx=this.store.beginTransaction("readonly"),node=this.findINode(tx,p),data=tx.get(node.id);if(data===void 0)throw ApiError.ENOENT(p);return new SyncKeyValueFile(this,p,flag,node.toStats(),data)},"openFileSync"),SyncKeyValueFileSystem2.prototype.unlinkSync=__name(function(p){this.removeEntry(p,!1)},"unlinkSync"),SyncKeyValueFileSystem2.prototype.rmdirSync=__name(function(p){if(this.readdirSync(p).length>0)throw ApiError.ENOTEMPTY(p);this.removeEntry(p,!0)},"rmdirSync"),SyncKeyValueFileSystem2.prototype.mkdirSync=__name(function(p,mode){var tx=this.store.beginTransaction("readwrite"),data=Buffer2.from("{}");this.commitNewFile(tx,p,FileType.DIRECTORY,mode,data)},"mkdirSync"),SyncKeyValueFileSystem2.prototype.readdirSync=__name(function(p){var tx=this.store.beginTransaction("readonly");return Object.keys(this.getDirListing(tx,p,this.findINode(tx,p)))},"readdirSync"),SyncKeyValueFileSystem2.prototype._syncSync=__name(function(p,data,stats){var tx=this.store.beginTransaction("readwrite"),fileInodeId=this._findINode(tx,path.dirname(p),path.basename(p)),fileInode=this.getINode(tx,p,fileInodeId),inodeChanged=fileInode.update(stats);try{tx.put(fileInode.id,data,!0),inodeChanged&&tx.put(fileInodeId,fileInode.toBuffer(),!0)}catch(e){throw tx.abort(),e}tx.commit()},"_syncSync"),SyncKeyValueFileSystem2.prototype.makeRootDirectory=__name(function(){var tx=this.store.beginTransaction("readwrite");if(tx.get(ROOT_NODE_ID)===void 0){var currTime=new Date().getTime(),dirInode=new Inode(GenerateRandomID(),4096,511|FileType.DIRECTORY,currTime,currTime,currTime);tx.put(dirInode.id,getEmptyDirNode(),!1),tx.put(ROOT_NODE_ID,dirInode.toBuffer(),!1),tx.commit()}},"makeRootDirectory"),SyncKeyValueFileSystem2.prototype._findINode=__name(function(tx,parent,filename){var this$1$1=this,readDirectory=__name(function(inode){var dirList=this$1$1.getDirListing(tx,parent,inode);if(dirList[filename])return dirList[filename];throw ApiError.ENOENT(path.resolve(parent,filename))},"readDirectory");return parent==="/"?filename===""?ROOT_NODE_ID:readDirectory(this.getINode(tx,parent,ROOT_NODE_ID)):readDirectory(this.getINode(tx,parent+path.sep+filename,this._findINode(tx,path.dirname(parent),path.basename(parent))))},"_findINode"),SyncKeyValueFileSystem2.prototype.findINode=__name(function(tx,p){return this.getINode(tx,p,this._findINode(tx,path.dirname(p),path.basename(p)))},"findINode"),SyncKeyValueFileSystem2.prototype.getINode=__name(function(tx,p,id){var inode=tx.get(id);if(inode===void 0)throw ApiError.ENOENT(p);return Inode.fromBuffer(inode)},"getINode"),SyncKeyValueFileSystem2.prototype.getDirListing=__name(function(tx,p,inode){if(!inode.isDirectory())throw ApiError.ENOTDIR(p);var data=tx.get(inode.id);if(data===void 0)throw ApiError.ENOENT(p);return JSON.parse(data.toString())},"getDirListing"),SyncKeyValueFileSystem2.prototype.addNewNode=__name(function(tx,data){for(var retries=0,currId;retries<5;)try{return currId=GenerateRandomID(),tx.put(currId,data,!1),currId}catch{}throw new ApiError(ErrorCode.EIO,"Unable to commit data to key-value store.")},"addNewNode"),SyncKeyValueFileSystem2.prototype.commitNewFile=__name(function(tx,p,type,mode,data){var parentDir=path.dirname(p),fname=path.basename(p),parentNode=this.findINode(tx,parentDir),dirListing=this.getDirListing(tx,parentDir,parentNode),currTime=new Date().getTime();if(p==="/"||dirListing[fname])throw ApiError.EEXIST(p);var fileNode;try{var dataId=this.addNewNode(tx,data);fileNode=new Inode(dataId,data.length,mode|type,currTime,currTime,currTime);var fileNodeId=this.addNewNode(tx,fileNode.toBuffer());dirListing[fname]=fileNodeId,tx.put(parentNode.id,Buffer2.from(JSON.stringify(dirListing)),!0)}catch(e){throw tx.abort(),e}return tx.commit(),fileNode},"commitNewFile"),SyncKeyValueFileSystem2.prototype.removeEntry=__name(function(p,isDir){var tx=this.store.beginTransaction("readwrite"),parent=path.dirname(p),parentNode=this.findINode(tx,parent),parentListing=this.getDirListing(tx,parent,parentNode),fileName=path.basename(p);if(!parentListing[fileName])throw ApiError.ENOENT(p);var fileNodeId=parentListing[fileName];delete parentListing[fileName];var fileNode=this.getINode(tx,p,fileNodeId);if(!isDir&&fileNode.isDirectory())throw ApiError.EISDIR(p);if(isDir&&!fileNode.isDirectory())throw ApiError.ENOTDIR(p);try{tx.del(fileNode.id),tx.del(fileNodeId),tx.put(parentNode.id,Buffer2.from(JSON.stringify(parentListing)),!0)}catch(e){throw tx.abort(),e}tx.commit()},"removeEntry"),SyncKeyValueFileSystem2})(SynchronousFileSystem),AsyncKeyValueFile=(function(PreloadFile$$1){function AsyncKeyValueFile2(_fs,_path,_flag,_stat,contents){PreloadFile$$1.call(this,_fs,_path,_flag,_stat,contents)}return __name(AsyncKeyValueFile2,"AsyncKeyValueFile2"),PreloadFile$$1&&(AsyncKeyValueFile2.__proto__=PreloadFile$$1),AsyncKeyValueFile2.prototype=Object.create(PreloadFile$$1&&PreloadFile$$1.prototype),AsyncKeyValueFile2.prototype.constructor=AsyncKeyValueFile2,AsyncKeyValueFile2.prototype.sync=__name(function(cb){var this$1$1=this;this.isDirty()?this._fs._sync(this.getPath(),this.getBuffer(),this.getStats(),function(e){e||this$1$1.resetDirty(),cb(e)}):cb()},"sync"),AsyncKeyValueFile2.prototype.close=__name(function(cb){this.sync(cb)},"close"),AsyncKeyValueFile2})(PreloadFile),AsyncKeyValueFileSystem=(function(BaseFileSystem$$1){function AsyncKeyValueFileSystem2(){BaseFileSystem$$1.apply(this,arguments)}return __name(AsyncKeyValueFileSystem2,"AsyncKeyValueFileSystem2"),BaseFileSystem$$1&&(AsyncKeyValueFileSystem2.__proto__=BaseFileSystem$$1),AsyncKeyValueFileSystem2.prototype=Object.create(BaseFileSystem$$1&&BaseFileSystem$$1.prototype),AsyncKeyValueFileSystem2.prototype.constructor=AsyncKeyValueFileSystem2,AsyncKeyValueFileSystem2.isAvailable=__name(function(){return!0},"isAvailable"),AsyncKeyValueFileSystem2.prototype.init=__name(function(store,cb){this.store=store,this.makeRootDirectory(cb)},"init"),AsyncKeyValueFileSystem2.prototype.getName=__name(function(){return this.store.name()},"getName"),AsyncKeyValueFileSystem2.prototype.isReadOnly=__name(function(){return!1},"isReadOnly"),AsyncKeyValueFileSystem2.prototype.supportsSymlinks=__name(function(){return!1},"supportsSymlinks"),AsyncKeyValueFileSystem2.prototype.supportsProps=__name(function(){return!1},"supportsProps"),AsyncKeyValueFileSystem2.prototype.supportsSynch=__name(function(){return!1},"supportsSynch"),AsyncKeyValueFileSystem2.prototype.empty=__name(function(cb){var this$1$1=this;this.store.clear(function(e){noError(e,cb)&&this$1$1.makeRootDirectory(cb)})},"empty"),AsyncKeyValueFileSystem2.prototype.rename=__name(function(oldPath,newPath,cb){var this$1$1=this,tx=this.store.beginTransaction("readwrite"),oldParent=path.dirname(oldPath),oldName=path.basename(oldPath),newParent=path.dirname(newPath),newName=path.basename(newPath),inodes={},lists={},errorOccurred=!1;if((newParent+"/").indexOf(oldPath+"/")===0)return cb(new ApiError(ErrorCode.EBUSY,oldParent));var theOleSwitcharoo=__name(function(){if(!(errorOccurred||!lists.hasOwnProperty(oldParent)||!lists.hasOwnProperty(newParent))){var oldParentList=lists[oldParent],oldParentINode=inodes[oldParent],newParentList=lists[newParent],newParentINode=inodes[newParent];if(!oldParentList[oldName])cb(ApiError.ENOENT(oldPath));else{var fileId=oldParentList[oldName];delete oldParentList[oldName];var completeRename=__name(function(){newParentList[newName]=fileId,tx.put(oldParentINode.id,Buffer2.from(JSON.stringify(oldParentList)),!0,function(e){noErrorTx(e,tx,cb)&&(oldParent===newParent?tx.commit(cb):tx.put(newParentINode.id,Buffer2.from(JSON.stringify(newParentList)),!0,function(e2){noErrorTx(e2,tx,cb)&&tx.commit(cb)}))})},"completeRename");newParentList[newName]?this$1$1.getINode(tx,newPath,newParentList[newName],function(e,inode){noErrorTx(e,tx,cb)&&(inode.isFile()?tx.del(inode.id,function(e2){noErrorTx(e2,tx,cb)&&tx.del(newParentList[newName],function(e3){noErrorTx(e3,tx,cb)&&completeRename()})}):tx.abort(function(e2){cb(ApiError.EPERM(newPath))}))}):completeRename()}}},"theOleSwitcharoo"),processInodeAndListings=__name(function(p){this$1$1.findINodeAndDirListing(tx,p,function(e,node,dirList){e?errorOccurred||(errorOccurred=!0,tx.abort(function(){cb(e)})):(inodes[p]=node,lists[p]=dirList,theOleSwitcharoo())})},"processInodeAndListings");processInodeAndListings(oldParent),oldParent!==newParent&&processInodeAndListings(newParent)},"rename"),AsyncKeyValueFileSystem2.prototype.stat=__name(function(p,isLstat,cb){var tx=this.store.beginTransaction("readonly");this.findINode(tx,p,function(e,inode){noError(e,cb)&&cb(null,inode.toStats())})},"stat"),AsyncKeyValueFileSystem2.prototype.createFile=__name(function(p,flag,mode,cb){var this$1$1=this,tx=this.store.beginTransaction("readwrite"),data=emptyBuffer();this.commitNewFile(tx,p,FileType.FILE,mode,data,function(e,newFile){noError(e,cb)&&cb(null,new AsyncKeyValueFile(this$1$1,p,flag,newFile.toStats(),data))})},"createFile"),AsyncKeyValueFileSystem2.prototype.openFile=__name(function(p,flag,cb){var this$1$1=this,tx=this.store.beginTransaction("readonly");this.findINode(tx,p,function(e,inode){noError(e,cb)&&tx.get(inode.id,function(e2,data){noError(e2,cb)&&(data===void 0?cb(ApiError.ENOENT(p)):cb(null,new AsyncKeyValueFile(this$1$1,p,flag,inode.toStats(),data)))})})},"openFile"),AsyncKeyValueFileSystem2.prototype.unlink=__name(function(p,cb){this.removeEntry(p,!1,cb)},"unlink"),AsyncKeyValueFileSystem2.prototype.rmdir=__name(function(p,cb){var this$1$1=this;this.readdir(p,function(err,files){err?cb(err):files.length>0?cb(ApiError.ENOTEMPTY(p)):this$1$1.removeEntry(p,!0,cb)})},"rmdir"),AsyncKeyValueFileSystem2.prototype.mkdir=__name(function(p,mode,cb){var tx=this.store.beginTransaction("readwrite"),data=Buffer2.from("{}");this.commitNewFile(tx,p,FileType.DIRECTORY,mode,data,cb)},"mkdir"),AsyncKeyValueFileSystem2.prototype.readdir=__name(function(p,cb){var this$1$1=this,tx=this.store.beginTransaction("readonly");this.findINode(tx,p,function(e,inode){noError(e,cb)&&this$1$1.getDirListing(tx,p,inode,function(e2,dirListing){noError(e2,cb)&&cb(null,Object.keys(dirListing))})})},"readdir"),AsyncKeyValueFileSystem2.prototype._sync=__name(function(p,data,stats,cb){var this$1$1=this,tx=this.store.beginTransaction("readwrite");this._findINode(tx,path.dirname(p),path.basename(p),function(e,fileInodeId){noErrorTx(e,tx,cb)&&this$1$1.getINode(tx,p,fileInodeId,function(e2,fileInode){if(noErrorTx(e2,tx,cb)){var inodeChanged=fileInode.update(stats);tx.put(fileInode.id,data,!0,function(e3){noErrorTx(e3,tx,cb)&&(inodeChanged?tx.put(fileInodeId,fileInode.toBuffer(),!0,function(e4){noErrorTx(e4,tx,cb)&&tx.commit(cb)}):tx.commit(cb))})}})})},"_sync"),AsyncKeyValueFileSystem2.prototype.makeRootDirectory=__name(function(cb){var tx=this.store.beginTransaction("readwrite");tx.get(ROOT_NODE_ID,function(e,data){if(e||data===void 0){var currTime=new Date().getTime(),dirInode=new Inode(GenerateRandomID(),4096,511|FileType.DIRECTORY,currTime,currTime,currTime);tx.put(dirInode.id,getEmptyDirNode(),!1,function(e2){noErrorTx(e2,tx,cb)&&tx.put(ROOT_NODE_ID,dirInode.toBuffer(),!1,function(e3){e3?tx.abort(function(){cb(e3)}):tx.commit(cb)})})}else tx.commit(cb)})},"makeRootDirectory"),AsyncKeyValueFileSystem2.prototype._findINode=__name(function(tx,parent,filename,cb){var this$1$1=this,handleDirectoryListings=__name(function(e,inode,dirList){e?cb(e):dirList[filename]?cb(null,dirList[filename]):cb(ApiError.ENOENT(path.resolve(parent,filename)))},"handleDirectoryListings");parent==="/"?filename===""?cb(null,ROOT_NODE_ID):this.getINode(tx,parent,ROOT_NODE_ID,function(e,inode){noError(e,cb)&&this$1$1.getDirListing(tx,parent,inode,function(e2,dirList){handleDirectoryListings(e2,inode,dirList)})}):this.findINodeAndDirListing(tx,parent,handleDirectoryListings)},"_findINode"),AsyncKeyValueFileSystem2.prototype.findINode=__name(function(tx,p,cb){var this$1$1=this;this._findINode(tx,path.dirname(p),path.basename(p),function(e,id){noError(e,cb)&&this$1$1.getINode(tx,p,id,cb)})},"findINode"),AsyncKeyValueFileSystem2.prototype.getINode=__name(function(tx,p,id,cb){tx.get(id,function(e,data){noError(e,cb)&&(data===void 0?cb(ApiError.ENOENT(p)):cb(null,Inode.fromBuffer(data)))})},"getINode"),AsyncKeyValueFileSystem2.prototype.getDirListing=__name(function(tx,p,inode,cb){inode.isDirectory()?tx.get(inode.id,function(e,data){if(noError(e,cb))try{cb(null,JSON.parse(data.toString()))}catch{cb(ApiError.ENOENT(p))}}):cb(ApiError.ENOTDIR(p))},"getDirListing"),AsyncKeyValueFileSystem2.prototype.findINodeAndDirListing=__name(function(tx,p,cb){var this$1$1=this;this.findINode(tx,p,function(e,inode){noError(e,cb)&&this$1$1.getDirListing(tx,p,inode,function(e2,listing){noError(e2,cb)&&cb(null,inode,listing)})})},"findINodeAndDirListing"),AsyncKeyValueFileSystem2.prototype.addNewNode=__name(function(tx,data,cb){var retries=0,currId,reroll=__name(function(){++retries===5?cb(new ApiError(ErrorCode.EIO,"Unable to commit data to key-value store.")):(currId=GenerateRandomID(),tx.put(currId,data,!1,function(e,committed){e||!committed?reroll():cb(null,currId)}))},"reroll");reroll()},"addNewNode"),AsyncKeyValueFileSystem2.prototype.commitNewFile=__name(function(tx,p,type,mode,data,cb){var this$1$1=this,parentDir=path.dirname(p),fname=path.basename(p),currTime=new Date().getTime();if(p==="/")return cb(ApiError.EEXIST(p));this.findINodeAndDirListing(tx,parentDir,function(e,parentNode,dirListing){noErrorTx(e,tx,cb)&&(dirListing[fname]?tx.abort(function(){cb(ApiError.EEXIST(p))}):this$1$1.addNewNode(tx,data,function(e2,dataId){if(noErrorTx(e2,tx,cb)){var fileInode=new Inode(dataId,data.length,mode|type,currTime,currTime,currTime);this$1$1.addNewNode(tx,fileInode.toBuffer(),function(e3,fileInodeId){noErrorTx(e3,tx,cb)&&(dirListing[fname]=fileInodeId,tx.put(parentNode.id,Buffer2.from(JSON.stringify(dirListing)),!0,function(e4){noErrorTx(e4,tx,cb)&&tx.commit(function(e5){noErrorTx(e5,tx,cb)&&cb(null,fileInode)})}))})}}))})},"commitNewFile"),AsyncKeyValueFileSystem2.prototype.removeEntry=__name(function(p,isDir,cb){var this$1$1=this,tx=this.store.beginTransaction("readwrite"),parent=path.dirname(p),fileName=path.basename(p);this.findINodeAndDirListing(tx,parent,function(e,parentNode,parentListing){if(noErrorTx(e,tx,cb))if(!parentListing[fileName])tx.abort(function(){cb(ApiError.ENOENT(p))});else{var fileNodeId=parentListing[fileName];delete parentListing[fileName],this$1$1.getINode(tx,p,fileNodeId,function(e2,fileNode){noErrorTx(e2,tx,cb)&&(!isDir&&fileNode.isDirectory()?tx.abort(function(){cb(ApiError.EISDIR(p))}):isDir&&!fileNode.isDirectory()?tx.abort(function(){cb(ApiError.ENOTDIR(p))}):tx.del(fileNode.id,function(e3){noErrorTx(e3,tx,cb)&&tx.del(fileNodeId,function(e4){noErrorTx(e4,tx,cb)&&tx.put(parentNode.id,Buffer2.from(JSON.stringify(parentListing)),!0,function(e5){noErrorTx(e5,tx,cb)&&tx.commit(cb)})})}))})}})},"removeEntry"),AsyncKeyValueFileSystem2})(BaseFileSystem),InMemoryStore=__name(function(){this.store={}},"InMemoryStore2");InMemoryStore.prototype.name=__name(function(){return InMemoryFileSystem.Name},"name"),InMemoryStore.prototype.clear=__name(function(){this.store={}},"clear"),InMemoryStore.prototype.beginTransaction=__name(function(type){return new SimpleSyncRWTransaction(this)},"beginTransaction"),InMemoryStore.prototype.get=__name(function(key){return this.store[key]},"get"),InMemoryStore.prototype.put=__name(function(key,data,overwrite){return!overwrite&&this.store.hasOwnProperty(key)?!1:(this.store[key]=data,!0)},"put"),InMemoryStore.prototype.del=__name(function(key){delete this.store[key]},"del");var InMemoryFileSystem=(function(SyncKeyValueFileSystem$$1){function InMemoryFileSystem2(){SyncKeyValueFileSystem$$1.call(this,{store:new InMemoryStore})}return __name(InMemoryFileSystem2,"InMemoryFileSystem2"),SyncKeyValueFileSystem$$1&&(InMemoryFileSystem2.__proto__=SyncKeyValueFileSystem$$1),InMemoryFileSystem2.prototype=Object.create(SyncKeyValueFileSystem$$1&&SyncKeyValueFileSystem$$1.prototype),InMemoryFileSystem2.prototype.constructor=InMemoryFileSystem2,InMemoryFileSystem2.Create=__name(function(options,cb){cb(null,new InMemoryFileSystem2)},"Create"),InMemoryFileSystem2})(SyncKeyValueFileSystem);InMemoryFileSystem.Name="InMemory",InMemoryFileSystem.Options={};var indexedDB=global$1.indexedDB||global$1.mozIndexedDB||global$1.webkitIndexedDB||global$1.msIndexedDB;function convertError$2(e,message){switch(message===void 0&&(message=e.toString()),e.name){case"NotFoundError":return new ApiError(ErrorCode.ENOENT,message);case"QuotaExceededError":return new ApiError(ErrorCode.ENOSPC,message);default:return new ApiError(ErrorCode.EIO,message)}}__name(convertError$2,"convertError$2");function onErrorHandler(cb,code,message){return code===void 0&&(code=ErrorCode.EIO),message===void 0&&(message=null),function(e){e.preventDefault(),cb(new ApiError(code,message!==null?message:void 0))}}__name(onErrorHandler,"onErrorHandler");var IndexedDBROTransaction=__name(function(tx,store){this.tx=tx,this.store=store},"IndexedDBROTransaction2");IndexedDBROTransaction.prototype.get=__name(function(key,cb){try{var r=this.store.get(key);r.onerror=onErrorHandler(cb),r.onsuccess=function(event){var result=event.target.result;result===void 0?cb(null,result):cb(null,arrayBuffer2Buffer(result))}}catch(e){cb(convertError$2(e))}},"get");var IndexedDBRWTransaction=(function(IndexedDBROTransaction2){function IndexedDBRWTransaction2(tx,store){IndexedDBROTransaction2.call(this,tx,store)}return __name(IndexedDBRWTransaction2,"IndexedDBRWTransaction2"),IndexedDBROTransaction2&&(IndexedDBRWTransaction2.__proto__=IndexedDBROTransaction2),IndexedDBRWTransaction2.prototype=Object.create(IndexedDBROTransaction2&&IndexedDBROTransaction2.prototype),IndexedDBRWTransaction2.prototype.constructor=IndexedDBRWTransaction2,IndexedDBRWTransaction2.prototype.put=__name(function(key,data,overwrite,cb){try{var arraybuffer=buffer2ArrayBuffer(data),r;overwrite?r=this.store.put(arraybuffer,key):r=this.store.add(arraybuffer,key),r.onerror=onErrorHandler(cb),r.onsuccess=function(event){cb(null,!0)}}catch(e){cb(convertError$2(e))}},"put"),IndexedDBRWTransaction2.prototype.del=__name(function(key,cb){try{var r=this.store.delete(key);r.onerror=onErrorHandler(cb),r.onsuccess=function(event){cb()}}catch(e){cb(convertError$2(e))}},"del"),IndexedDBRWTransaction2.prototype.commit=__name(function(cb){setTimeout(cb,0)},"commit"),IndexedDBRWTransaction2.prototype.abort=__name(function(cb){var _e=null;try{this.tx.abort()}catch(e){_e=convertError$2(e)}finally{cb(_e)}},"abort"),IndexedDBRWTransaction2})(IndexedDBROTransaction),IndexedDBStore=__name(function(cb,storeName){var this$1$1=this;storeName===void 0&&(storeName="browserfs"),this.storeName=storeName;var openReq=indexedDB.open(this.storeName,1);openReq.onupgradeneeded=function(event){var db=event.target.result;db.objectStoreNames.contains(this$1$1.storeName)&&db.deleteObjectStore(this$1$1.storeName),db.createObjectStore(this$1$1.storeName)},openReq.onsuccess=function(event){this$1$1.db=event.target.result,cb(null,this$1$1)},openReq.onerror=onErrorHandler(cb,ErrorCode.EACCES)},"IndexedDBStore2");IndexedDBStore.prototype.name=__name(function(){return IndexedDBFileSystem.Name+" - "+this.storeName},"name"),IndexedDBStore.prototype.clear=__name(function(cb){try{var tx=this.db.transaction(this.storeName,"readwrite"),objectStore=tx.objectStore(this.storeName),r=objectStore.clear();r.onsuccess=function(event){setTimeout(cb,0)},r.onerror=onErrorHandler(cb)}catch(e){cb(convertError$2(e))}},"clear"),IndexedDBStore.prototype.beginTransaction=__name(function(type){type===void 0&&(type="readonly");var tx=this.db.transaction(this.storeName,type),objectStore=tx.objectStore(this.storeName);if(type==="readwrite")return new IndexedDBRWTransaction(tx,objectStore);if(type==="readonly")return new IndexedDBROTransaction(tx,objectStore);throw new ApiError(ErrorCode.EINVAL,"Invalid transaction type.")},"beginTransaction");var IndexedDBFileSystem=(function(AsyncKeyValueFileSystem$$1){function IndexedDBFileSystem2(cb,storeName,deprecateMsg){var this$1$1=this;deprecateMsg===void 0&&(deprecateMsg=!0),AsyncKeyValueFileSystem$$1.call(this),this.store=new IndexedDBStore(function(e){e?cb(e):this$1$1.init(this$1$1.store,function(e2){cb(e2,this$1$1)})},storeName),deprecationMessage(deprecateMsg,IndexedDBFileSystem2.Name,{storeName})}return __name(IndexedDBFileSystem2,"IndexedDBFileSystem2"),AsyncKeyValueFileSystem$$1&&(IndexedDBFileSystem2.__proto__=AsyncKeyValueFileSystem$$1),IndexedDBFileSystem2.prototype=Object.create(AsyncKeyValueFileSystem$$1&&AsyncKeyValueFileSystem$$1.prototype),IndexedDBFileSystem2.prototype.constructor=IndexedDBFileSystem2,IndexedDBFileSystem2.Create=__name(function(opts,cb){new IndexedDBFileSystem2(cb,opts.storeName,!1)},"Create"),IndexedDBFileSystem2.isAvailable=__name(function(){try{return typeof indexedDB<"u"&&indexedDB.open("__browserfs_test__")!==null}catch{return!1}},"isAvailable"),IndexedDBFileSystem2})(AsyncKeyValueFileSystem);IndexedDBFileSystem.Name="IndexedDB",IndexedDBFileSystem.Options={storeName:{type:"string",optional:!0,description:"The name of this file system. You can have multiple IndexedDB file systems operating at once, but each must have a different name."}};var supportsBinaryString=!1,binaryEncoding;try{global$1.localStorage.setItem("__test__","\uD800"),supportsBinaryString=global$1.localStorage.getItem("__test__")==="\uD800"}catch{supportsBinaryString=!1}binaryEncoding=supportsBinaryString?"binary_string":"binary_string_ie",Buffer2.isEncoding(binaryEncoding)||(binaryEncoding="base64");var LocalStorageStore=__name(function(){},"LocalStorageStore2");LocalStorageStore.prototype.name=__name(function(){return LocalStorageFileSystem.Name},"name"),LocalStorageStore.prototype.clear=__name(function(){global$1.localStorage.clear()},"clear"),LocalStorageStore.prototype.beginTransaction=__name(function(type){return new SimpleSyncRWTransaction(this)},"beginTransaction"),LocalStorageStore.prototype.get=__name(function(key){try{var data=global$1.localStorage.getItem(key);if(data!==null)return Buffer2.from(data,binaryEncoding)}catch{}},"get"),LocalStorageStore.prototype.put=__name(function(key,data,overwrite){try{return!overwrite&&global$1.localStorage.getItem(key)!==null?!1:(global$1.localStorage.setItem(key,data.toString(binaryEncoding)),!0)}catch{throw new ApiError(ErrorCode.ENOSPC,"LocalStorage is full.")}},"put"),LocalStorageStore.prototype.del=__name(function(key){try{global$1.localStorage.removeItem(key)}catch(e){throw new ApiError(ErrorCode.EIO,"Unable to delete key "+key+": "+e)}},"del");var LocalStorageFileSystem=(function(SyncKeyValueFileSystem$$1){function LocalStorageFileSystem2(){SyncKeyValueFileSystem$$1.call(this,{store:new LocalStorageStore})}return __name(LocalStorageFileSystem2,"LocalStorageFileSystem2"),SyncKeyValueFileSystem$$1&&(LocalStorageFileSystem2.__proto__=SyncKeyValueFileSystem$$1),LocalStorageFileSystem2.prototype=Object.create(SyncKeyValueFileSystem$$1&&SyncKeyValueFileSystem$$1.prototype),LocalStorageFileSystem2.prototype.constructor=LocalStorageFileSystem2,LocalStorageFileSystem2.Create=__name(function(options,cb){cb(null,new LocalStorageFileSystem2)},"Create"),LocalStorageFileSystem2.isAvailable=__name(function(){return typeof global$1.localStorage<"u"},"isAvailable"),LocalStorageFileSystem2})(SyncKeyValueFileSystem);LocalStorageFileSystem.Name="LocalStorage",LocalStorageFileSystem.Options={};var MountableFileSystem=(function(BaseFileSystem$$1){function MountableFileSystem2(){BaseFileSystem$$1.call(this),this.mountList=[],this.mntMap={},this.rootFs=new InMemoryFileSystem}return __name(MountableFileSystem2,"MountableFileSystem2"),BaseFileSystem$$1&&(MountableFileSystem2.__proto__=BaseFileSystem$$1),MountableFileSystem2.prototype=Object.create(BaseFileSystem$$1&&BaseFileSystem$$1.prototype),MountableFileSystem2.prototype.constructor=MountableFileSystem2,MountableFileSystem2.Create=__name(function(opts,cb){var fs2=new MountableFileSystem2;Object.keys(opts).forEach(function(mountPoint){fs2.mount(mountPoint,opts[mountPoint])}),cb(null,fs2)},"Create"),MountableFileSystem2.isAvailable=__name(function(){return!0},"isAvailable"),MountableFileSystem2.prototype.mount=__name(function(mountPoint,fs2){if(mountPoint[0]!=="/"&&(mountPoint="/"+mountPoint),mountPoint=path.resolve(mountPoint),this.mntMap[mountPoint])throw new ApiError(ErrorCode.EINVAL,"Mount point "+mountPoint+" is already taken.");mkdirpSync(mountPoint,511,this.rootFs),this.mntMap[mountPoint]=fs2,this.mountList.push(mountPoint),this.mountList=this.mountList.sort(function(a,b){return b.length-a.length})},"mount"),MountableFileSystem2.prototype.umount=__name(function(mountPoint){var this$1$1=this;if(mountPoint[0]!=="/"&&(mountPoint="/"+mountPoint),mountPoint=path.resolve(mountPoint),!this.mntMap[mountPoint])throw new ApiError(ErrorCode.EINVAL,"Mount point "+mountPoint+" is already unmounted.");for(delete this.mntMap[mountPoint],this.mountList.splice(this.mountList.indexOf(mountPoint),1);mountPoint!=="/"&&this$1$1.rootFs.readdirSync(mountPoint).length===0;)this$1$1.rootFs.rmdirSync(mountPoint),mountPoint=path.dirname(mountPoint)},"umount"),MountableFileSystem2.prototype._getFs=__name(function(path$$1){for(var this$1$1=this,mountList=this.mountList,len=mountList.length,i2=0;i2<len;i2++){var mountPoint=mountList[i2];if(mountPoint.length<=path$$1.length&&path$$1.indexOf(mountPoint)===0)return path$$1=path$$1.substr(mountPoint.length>1?mountPoint.length:0),path$$1===""&&(path$$1="/"),{fs:this$1$1.mntMap[mountPoint],path:path$$1}}return{fs:this.rootFs,path:path$$1}},"_getFs"),MountableFileSystem2.prototype.getName=__name(function(){return MountableFileSystem2.Name},"getName"),MountableFileSystem2.prototype.diskSpace=__name(function(path$$1,cb){cb(0,0)},"diskSpace"),MountableFileSystem2.prototype.isReadOnly=__name(function(){return!1},"isReadOnly"),MountableFileSystem2.prototype.supportsLinks=__name(function(){return!1},"supportsLinks"),MountableFileSystem2.prototype.supportsProps=__name(function(){return!1},"supportsProps"),MountableFileSystem2.prototype.supportsSynch=__name(function(){return!0},"supportsSynch"),MountableFileSystem2.prototype.standardizeError=__name(function(err,path$$1,realPath){var index=err.message.indexOf(path$$1);return index!==-1&&(err.message=err.message.substr(0,index)+realPath+err.message.substr(index+path$$1.length),err.path=realPath),err},"standardizeError"),MountableFileSystem2.prototype.rename=__name(function(oldPath,newPath,cb){var this$1$1=this,fs1rv=this._getFs(oldPath),fs2rv=this._getFs(newPath);return fs1rv.fs===fs2rv.fs?fs1rv.fs.rename(fs1rv.path,fs2rv.path,function(e){e&&this$1$1.standardizeError(this$1$1.standardizeError(e,fs1rv.path,oldPath),fs2rv.path,newPath),cb(e)}):_fsMock.readFile(oldPath,function(err,data){if(err)return cb(err);_fsMock.writeFile(newPath,data,function(err2){if(err2)return cb(err2);_fsMock.unlink(oldPath,cb)})})},"rename"),MountableFileSystem2.prototype.renameSync=__name(function(oldPath,newPath){var fs1rv=this._getFs(oldPath),fs2rv=this._getFs(newPath);if(fs1rv.fs===fs2rv.fs)try{return fs1rv.fs.renameSync(fs1rv.path,fs2rv.path)}catch(e){throw this.standardizeError(this.standardizeError(e,fs1rv.path,oldPath),fs2rv.path,newPath),e}var data=_fsMock.readFileSync(oldPath);return _fsMock.writeFileSync(newPath,data),_fsMock.unlinkSync(oldPath)},"renameSync"),MountableFileSystem2.prototype.readdirSync=__name(function(p){var fsInfo=this._getFs(p),rv=null;if(fsInfo.fs!==this.rootFs)try{rv=this.rootFs.readdirSync(p)}catch{}try{var rv2=fsInfo.fs.readdirSync(fsInfo.path);return rv===null?rv2:rv2.concat(rv.filter(function(val){return rv2.indexOf(val)===-1}))}catch(e){if(rv===null)throw this.standardizeError(e,fsInfo.path,p);return rv}},"readdirSync"),MountableFileSystem2.prototype.readdir=__name(function(p,cb){var this$1$1=this,fsInfo=this._getFs(p);fsInfo.fs.readdir(fsInfo.path,function(err,files){if(fsInfo.fs!==this$1$1.rootFs)try{var rv=this$1$1.rootFs.readdirSync(p);files?files=files.concat(rv.filter(function(val){return files.indexOf(val)===-1})):files=rv}catch{if(err)return cb(this$1$1.standardizeError(err,fsInfo.path,p))}else if(err)return cb(this$1$1.standardizeError(err,fsInfo.path,p));cb(null,files)})},"readdir"),MountableFileSystem2.prototype.rmdirSync=__name(function(p){var fsInfo=this._getFs(p);if(this._containsMountPt(p))throw ApiError.ENOTEMPTY(p);try{fsInfo.fs.rmdirSync(fsInfo.path)}catch(e){throw this.standardizeError(e,fsInfo.path,p)}},"rmdirSync"),MountableFileSystem2.prototype.rmdir=__name(function(p,cb){var this$1$1=this,fsInfo=this._getFs(p);this._containsMountPt(p)?cb(ApiError.ENOTEMPTY(p)):fsInfo.fs.rmdir(fsInfo.path,function(err){cb(err?this$1$1.standardizeError(err,fsInfo.path,p):null)})},"rmdir"),MountableFileSystem2.prototype._containsMountPt=__name(function(p){for(var mountPoints=this.mountList,len=mountPoints.length,i2=0;i2<len;i2++){var pt=mountPoints[i2];if(pt.length>=p.length&&pt.slice(0,p.length)===p)return!0}return!1},"_containsMountPt"),MountableFileSystem2})(BaseFileSystem);MountableFileSystem.Name="MountableFileSystem",MountableFileSystem.Options={};function defineFcn(name,isSync,numArgs){return isSync?function(){for(var args=[],len=arguments.length;len--;)args[len]=arguments[len];var path$$1=args[0],rv=this._getFs(path$$1);args[0]=rv.path;try{return rv.fs[name].apply(rv.fs,args)}catch(e){throw this.standardizeError(e,rv.path,path$$1),e}}:function(){for(var this$1$1=this,args=[],len=arguments.length;len--;)args[len]=arguments[len];var path$$1=args[0],rv=this._getFs(path$$1);if(args[0]=rv.path,typeof args[args.length-1]=="function"){var cb=args[args.length-1];args[args.length-1]=function(){for(var args2=[],len2=arguments.length;len2--;)args2[len2]=arguments[len2];args2.length>0&&args2[0]instanceof ApiError&&this$1$1.standardizeError(args2[0],rv.path,path$$1),cb.apply(null,args2)}}return rv.fs[name].apply(rv.fs,args)}}__name(defineFcn,"defineFcn");for(var fsCmdMap=[["exists","unlink","readlink"],["stat","mkdir","realpath","truncate"],["open","readFile","chmod","utimes"],["chown"],["writeFile","appendFile"]],i=0;i<fsCmdMap.length;i++)for(var cmds=fsCmdMap[i],i$1=0,list=cmds;i$1<list.length;i$1+=1){var fnName=list[i$1];MountableFileSystem.prototype[fnName]=defineFcn(fnName,!1,i+1),MountableFileSystem.prototype[fnName+"Sync"]=defineFcn(fnName+"Sync",!0,i+1)}var bfsSetImmediate;if(typeof setImmediate<"u")bfsSetImmediate=setImmediate;else{var gScope=global$1,timeouts=[],messageName="zero-timeout-message",canUsePostMessage=__name(function(){if(typeof gScope.importScripts<"u"||!gScope.postMessage)return!1;var postMessageIsAsync=!0,oldOnMessage=gScope.onmessage;return gScope.onmessage=function(){postMessageIsAsync=!1},gScope.postMessage("","*"),gScope.onmessage=oldOnMessage,postMessageIsAsync},"canUsePostMessage");if(canUsePostMessage()){bfsSetImmediate=__name(function(fn){timeouts.push(fn),gScope.postMessage(messageName,"*")},"bfsSetImmediate");var handleMessage=__name(function(event){if(event.source===self&&event.data===messageName&&(event.stopPropagation?event.stopPropagation():event.cancelBubble=!0,timeouts.length>0)){var fn=timeouts.shift();return fn()}},"handleMessage");gScope.addEventListener?gScope.addEventListener("message",handleMessage,!0):gScope.attachEvent("onmessage",handleMessage)}else if(gScope.MessageChannel){var channel=new gScope.MessageChannel;channel.port1.onmessage=function(event){if(timeouts.length>0)return timeouts.shift()()},bfsSetImmediate=__name(function(fn){timeouts.push(fn),channel.port2.postMessage("")},"bfsSetImmediate")}else bfsSetImmediate=__name(function(fn){return setTimeout(fn,0)},"bfsSetImmediate")}var setImmediate$3=bfsSetImmediate,Mutex=__name(function(){this._locked=!1,this._waiters=[]},"Mutex2");Mutex.prototype.lock=__name(function(cb){if(this._locked){this._waiters.push(cb);return}this._locked=!0,cb()},"lock"),Mutex.prototype.unlock=__name(function(){if(!this._locked)throw new Error("unlock of a non-locked mutex");var next=this._waiters.shift();if(next){setImmediate$3(next);return}this._locked=!1},"unlock"),Mutex.prototype.tryLock=__name(function(){return this._locked?!1:(this._locked=!0,!0)},"tryLock"),Mutex.prototype.isLocked=__name(function(){return this._locked},"isLocked");var LockedFS=__name(function(fs2){this._fs=fs2,this._mu=new Mutex},"LockedFS2");LockedFS.prototype.getName=__name(function(){return"LockedFS<"+this._fs.getName()+">"},"getName"),LockedFS.prototype.getFSUnlocked=__name(function(){return this._fs},"getFSUnlocked"),LockedFS.prototype.initialize=__name(function(cb){this._fs.initialize(cb)},"initialize2"),LockedFS.prototype.diskSpace=__name(function(p,cb){this._fs.diskSpace(p,cb)},"diskSpace"),LockedFS.prototype.isReadOnly=__name(function(){return this._fs.isReadOnly()},"isReadOnly"),LockedFS.prototype.supportsLinks=__name(function(){return this._fs.supportsLinks()},"supportsLinks"),LockedFS.prototype.supportsProps=__name(function(){return this._fs.supportsProps()},"supportsProps"),LockedFS.prototype.supportsSynch=__name(function(){return this._fs.supportsSynch()},"supportsSynch"),LockedFS.prototype.rename=__name(function(oldPath,newPath,cb){var this$1$1=this;this._mu.lock(function(){this$1$1._fs.rename(oldPath,newPath,function(err){this$1$1._mu.unlock(),cb(err)})})},"rename"),LockedFS.prototype.renameSync=__name(function(oldPath,newPath){if(this._mu.isLocked())throw new Error("invalid sync call");return this._fs.renameSync(oldPath,newPath)},"renameSync"),LockedFS.prototype.stat=__name(function(p,isLstat,cb){var this$1$1=this;this._mu.lock(function(){this$1$1._fs.stat(p,isLstat,function(err,stat2){this$1$1._mu.unlock(),cb(err,stat2)})})},"stat"),LockedFS.prototype.statSync=__name(function(p,isLstat){if(this._mu.isLocked())throw new Error("invalid sync call");return this._fs.statSync(p,isLstat)},"statSync"),LockedFS.prototype.open=__name(function(p,flag,mode,cb){var this$1$1=this;this._mu.lock(function(){this$1$1._fs.open(p,flag,mode,function(err,fd){this$1$1._mu.unlock(),cb(err,fd)})})},"open"),LockedFS.prototype.openSync=__name(function(p,flag,mode){if(this._mu.isLocked())throw new Error("invalid sync call");return this._fs.openSync(p,flag,mode)},"openSync"),LockedFS.prototype.unlink=__name(function(p,cb){var this$1$1=this;this._mu.lock(function(){this$1$1._fs.unlink(p,function(err){this$1$1._mu.unlock(),cb(err)})})},"unlink"),LockedFS.prototype.unlinkSync=__name(function(p){if(this._mu.isLocked())throw new Error("invalid sync call");return this._fs.unlinkSync(p)},"unlinkSync"),LockedFS.prototype.rmdir=__name(function(p,cb){var this$1$1=this;this._mu.lock(function(){this$1$1._fs.rmdir(p,function(err){this$1$1._mu.unlock(),cb(err)})})},"rmdir"),LockedFS.prototype.rmdirSync=__name(function(p){if(this._mu.isLocked())throw new Error("invalid sync call");return this._fs.rmdirSync(p)},"rmdirSync"),LockedFS.prototype.mkdir=__name(function(p,mode,cb){var this$1$1=this;this._mu.lock(function(){this$1$1._fs.mkdir(p,mode,function(err){this$1$1._mu.unlock(),cb(err)})})},"mkdir"),LockedFS.prototype.mkdirSync=__name(function(p,mode){if(this._mu.isLocked())throw new Error("invalid sync call");return this._fs.mkdirSync(p,mode)},"mkdirSync"),LockedFS.prototype.readdir=__name(function(p,cb){var this$1$1=this;this._mu.lock(function(){this$1$1._fs.readdir(p,function(err,files){this$1$1._mu.unlock(),cb(err,files)})})},"readdir"),LockedFS.prototype.readdirSync=__name(function(p){if(this._mu.isLocked())throw new Error("invalid sync call");return this._fs.readdirSync(p)},"readdirSync"),LockedFS.prototype.exists=__name(function(p,cb){var this$1$1=this;this._mu.lock(function(){this$1$1._fs.exists(p,function(exists2){this$1$1._mu.unlock(),cb(exists2)})})},"exists"),LockedFS.prototype.existsSync=__name(function(p){if(this._mu.isLocked())throw new Error("invalid sync call");return this._fs.existsSync(p)},"existsSync"),LockedFS.prototype.realpath=__name(function(p,cache,cb){var this$1$1=this;this._mu.lock(function(){this$1$1._fs.realpath(p,cache,function(err,resolvedPath){this$1$1._mu.unlock(),cb(err,resolvedPath)})})},"realpath"),LockedFS.prototype.realpathSync=__name(function(p,cache){if(this._mu.isLocked())throw new Error("invalid sync call");return this._fs.realpathSync(p,cache)},"realpathSync"),LockedFS.prototype.truncate=__name(function(p,len,cb){var this$1$1=this;this._mu.lock(function(){this$1$1._fs.truncate(p,len,function(err){this$1$1._mu.unlock(),cb(err)})})},"truncate"),LockedFS.prototype.truncateSync=__name(function(p,len){if(this._mu.isLocked())throw new Error("invalid sync call");return this._fs.truncateSync(p,len)},"truncateSync"),LockedFS.prototype.readFile=__name(function(fname,encoding,flag,cb){var this$1$1=this;this._mu.lock(function(){this$1$1._fs.readFile(fname,encoding,flag,function(err,data){this$1$1._mu.unlock(),cb(err,data)})})},"readFile"),LockedFS.prototype.readFileSync=__name(function(fname,encoding,flag){if(this._mu.isLocked())throw new Error("invalid sync call");return this._fs.readFileSync(fname,encoding,flag)},"readFileSync"),LockedFS.prototype.writeFile=__name(function(fname,data,encoding,flag,mode,cb){var this$1$1=this;this._mu.lock(function(){this$1$1._fs.writeFile(fname,data,encoding,flag,mode,function(err){this$1$1._mu.unlock(),cb(err)})})},"writeFile"),LockedFS.prototype.writeFileSync=__name(function(fname,data,encoding,flag,mode){if(this._mu.isLocked())throw new Error("invalid sync call");return this._fs.writeFileSync(fname,data,encoding,flag,mode)},"writeFileSync"),LockedFS.prototype.appendFile=__name(function(fname,data,encoding,flag,mode,cb){var this$1$1=this;this._mu.lock(function(){this$1$1._fs.appendFile(fname,data,encoding,flag,mode,function(err){this$1$1._mu.unlock(),cb(err)})})},"appendFile"),LockedFS.prototype.appendFileSync=__name(function(fname,data,encoding,flag,mode){if(this._mu.isLocked())throw new Error("invalid sync call");return this._fs.appendFileSync(fname,data,encoding,flag,mode)},"appendFileSync"),LockedFS.prototype.chmod=__name(function(p,isLchmod,mode,cb){var this$1$1=this;this._mu.lock(function(){this$1$1._fs.chmod(p,isLchmod,mode,function(err){this$1$1._mu.unlock(),cb(err)})})},"chmod"),LockedFS.prototype.chmodSync=__name(function(p,isLchmod,mode){if(this._mu.isLocked())throw new Error("invalid sync call");return this._fs.chmodSync(p,isLchmod,mode)},"chmodSync"),LockedFS.prototype.chown=__name(function(p,isLchown,uid,gid,cb){var this$1$1=this;this._mu.lock(function(){this$1$1._fs.chown(p,isLchown,uid,gid,function(err){this$1$1._mu.unlock(),cb(err)})})},"chown"),LockedFS.prototype.chownSync=__name(function(p,isLchown,uid,gid){if(this._mu.isLocked())throw new Error("invalid sync call");return this._fs.chownSync(p,isLchown,uid,gid)},"chownSync"),LockedFS.prototype.utimes=__name(function(p,atime,mtime,cb){var this$1$1=this;this._mu.lock(function(){this$1$1._fs.utimes(p,atime,mtime,function(err){this$1$1._mu.unlock(),cb(err)})})},"utimes"),LockedFS.prototype.utimesSync=__name(function(p,atime,mtime){if(this._mu.isLocked())throw new Error("invalid sync call");return this._fs.utimesSync(p,atime,mtime)},"utimesSync"),LockedFS.prototype.link=__name(function(srcpath,dstpath,cb){var this$1$1=this;this._mu.lock(function(){this$1$1._fs.link(srcpath,dstpath,function(err){this$1$1._mu.unlock(),cb(err)})})},"link"),LockedFS.prototype.linkSync=__name(function(srcpath,dstpath){if(this._mu.isLocked())throw new Error("invalid sync call");return this._fs.linkSync(srcpath,dstpath)},"linkSync"),LockedFS.prototype.symlink=__name(function(srcpath,dstpath,type,cb){var this$1$1=this;this._mu.lock(function(){this$1$1._fs.symlink(srcpath,dstpath,type,function(err){this$1$1._mu.unlock(),cb(err)})})},"symlink"),LockedFS.prototype.symlinkSync=__name(function(srcpath,dstpath,type){if(this._mu.isLocked())throw new Error("invalid sync call");return this._fs.symlinkSync(srcpath,dstpath,type)},"symlinkSync"),LockedFS.prototype.readlink=__name(function(p,cb){var this$1$1=this;this._mu.lock(function(){this$1$1._fs.readlink(p,function(err,linkString){this$1$1._mu.unlock(),cb(err,linkString)})})},"readlink"),LockedFS.prototype.readlinkSync=__name(function(p){if(this._mu.isLocked())throw new Error("invalid sync call");return this._fs.readlinkSync(p)},"readlinkSync");var deletionLogPath="/.deletedFiles.log";function makeModeWritable(mode){return 146|mode}__name(makeModeWritable,"makeModeWritable");function getFlag(f){return FileFlag.getFileFlag(f)}__name(getFlag,"getFlag");var OverlayFile=(function(PreloadFile$$1){function OverlayFile2(fs2,path$$1,flag,stats,data){PreloadFile$$1.call(this,fs2,path$$1,flag,stats,data)}return __name(OverlayFile2,"OverlayFile2"),PreloadFile$$1&&(OverlayFile2.__proto__=PreloadFile$$1),OverlayFile2.prototype=Object.create(PreloadFile$$1&&PreloadFile$$1.prototype),OverlayFile2.prototype.constructor=OverlayFile2,OverlayFile2.prototype.sync=__name(function(cb){var this$1$1=this;if(!this.isDirty()){cb(null);return}this._fs._syncAsync(this,function(err){this$1$1.resetDirty(),cb(err)})},"sync"),OverlayFile2.prototype.syncSync=__name(function(){this.isDirty()&&(this._fs._syncSync(this),this.resetDirty())},"syncSync"),OverlayFile2.prototype.close=__name(function(cb){this.sync(cb)},"close"),OverlayFile2.prototype.closeSync=__name(function(){this.syncSync()},"closeSync"),OverlayFile2})(PreloadFile),UnlockedOverlayFS=(function(BaseFileSystem$$1){function UnlockedOverlayFS2(writable,readable){if(BaseFileSystem$$1.call(this),this._isInitialized=!1,this._initializeCallbacks=[],this._deletedFiles={},this._deleteLog="",this._deleteLogUpdatePending=!1,this._deleteLogUpdateNeeded=!1,this._deleteLogError=null,this._writable=writable,this._readable=readable,this._writable.isReadOnly())throw new ApiError(ErrorCode.EINVAL,"Writable file system must be writable.")}return __name(UnlockedOverlayFS2,"UnlockedOverlayFS2"),BaseFileSystem$$1&&(UnlockedOverlayFS2.__proto__=BaseFileSystem$$1),UnlockedOverlayFS2.prototype=Object.create(BaseFileSystem$$1&&BaseFileSystem$$1.prototype),UnlockedOverlayFS2.prototype.constructor=UnlockedOverlayFS2,UnlockedOverlayFS2.isAvailable=__name(function(){return!0},"isAvailable"),UnlockedOverlayFS2.prototype.getOverlayedFileSystems=__name(function(){return{readable:this._readable,writable:this._writable}},"getOverlayedFileSystems"),UnlockedOverlayFS2.prototype._syncAsync=__name(function(file,cb){var this$1$1=this;this.createParentDirectoriesAsync(file.getPath(),function(err){if(err)return cb(err);this$1$1._writable.writeFile(file.getPath(),file.getBuffer(),null,getFlag("w"),file.getStats().mode,cb)})},"_syncAsync"),UnlockedOverlayFS2.prototype._syncSync=__name(function(file){this.createParentDirectories(file.getPath()),this._writable.writeFileSync(file.getPath(),file.getBuffer(),null,getFlag("w"),file.getStats().mode)},"_syncSync"),UnlockedOverlayFS2.prototype.getName=__name(function(){return OverlayFS.Name},"getName"),UnlockedOverlayFS2.prototype.initialize=__name(function(cb){var this$1$1=this,callbackArray=this._initializeCallbacks,end=__name(function(e){this$1$1._isInitialized=!e,this$1$1._initializeCallbacks=[],callbackArray.forEach((function(cb2){return cb2(e)}))},"end");if(this._isInitialized)return cb();callbackArray.push(cb),callbackArray.length===1&&this._writable.readFile(deletionLogPath,"utf8",getFlag("r"),function(err,data){if(err){if(err.errno!==ErrorCode.ENOENT)return end(err)}else this$1$1._deleteLog=data;this$1$1._reparseDeletionLog(),end()})},"initialize2"),UnlockedOverlayFS2.prototype.isReadOnly=__name(function(){return!1},"isReadOnly"),UnlockedOverlayFS2.prototype.supportsSynch=__name(function(){return this._readable.supportsSynch()&&this._writable.supportsSynch()},"supportsSynch"),UnlockedOverlayFS2.prototype.supportsLinks=__name(function(){return!1},"supportsLinks"),UnlockedOverlayFS2.prototype.supportsProps=__name(function(){return this._readable.supportsProps()&&this._writable.supportsProps()},"supportsProps"),UnlockedOverlayFS2.prototype.getDeletionLog=__name(function(){return this._deleteLog},"getDeletionLog"),UnlockedOverlayFS2.prototype.restoreDeletionLog=__name(function(log){this._deleteLog=log,this._reparseDeletionLog(),this.updateLog("")},"restoreDeletionLog"),UnlockedOverlayFS2.prototype.rename=__name(function(oldPath,newPath,cb){var this$1$1=this;if(!(!this.checkInitAsync(cb)||this.checkPathAsync(oldPath,cb)||this.checkPathAsync(newPath,cb))){if(oldPath===deletionLogPath||newPath===deletionLogPath)return cb(ApiError.EPERM("Cannot rename deletion log."));if(oldPath===newPath)return cb();this.stat(oldPath,!1,function(oldErr,oldStats){return oldErr?cb(oldErr):this$1$1.stat(newPath,!1,function(newErr,newStats){var self2=this$1$1;function copyDirContents(files){var file=files.shift();if(!file)return cb();var oldFile=path.resolve(oldPath,file),newFile=path.resolve(newPath,file);self2.rename(oldFile,newFile,function(err){if(err)return cb(err);copyDirContents(files)})}__name(copyDirContents,"copyDirContents");var mode=511;if(oldStats.isDirectory()){if(newErr)return newErr.errno!==ErrorCode.ENOENT?cb(newErr):this$1$1._writable.exists(oldPath,function(exists){if(exists)return this$1$1._writable.rename(oldPath,newPath,cb);this$1$1._writable.mkdir(newPath,mode,function(mkdirErr){if(mkdirErr)return cb(mkdirErr);this$1$1._readable.readdir(oldPath,function(err,files){if(err)return cb();copyDirContents(files)})})});if(mode=newStats.mode,!newStats.isDirectory())return cb(ApiError.ENOTDIR(newPath));this$1$1.readdir(newPath,function(readdirErr,files){if(files&&files.length)return cb(ApiError.ENOTEMPTY(newPath));this$1$1._readable.readdir(oldPath,function(err,files2){if(err)return cb();copyDirContents(files2)})})}if(newStats&&newStats.isDirectory())return cb(ApiError.EISDIR(newPath));this$1$1.readFile(oldPath,null,getFlag("r"),function(err,data){return err?cb(err):this$1$1.writeFile(newPath,data,null,getFlag("w"),oldStats.mode,function(err2){return err2?cb(err2):this$1$1.unlink(oldPath,cb)})})})})}},"rename"),UnlockedOverlayFS2.prototype.renameSync=__name(function(oldPath,newPath){var this$1$1=this;if(this.checkInitialized(),this.checkPath(oldPath),this.checkPath(newPath),oldPath===deletionLogPath||newPath===deletionLogPath)throw ApiError.EPERM("Cannot rename deletion log.");var oldStats=this.statSync(oldPath,!1);if(oldStats.isDirectory()){if(oldPath===newPath)return;var mode=511;if(this.existsSync(newPath)){var stats=this.statSync(newPath,!1);if(mode=stats.mode,stats.isDirectory()){if(this.readdirSync(newPath).length>0)throw ApiError.ENOTEMPTY(newPath)}else throw ApiError.ENOTDIR(newPath)}this._writable.existsSync(oldPath)?this._writable.renameSync(oldPath,newPath):this._writable.existsSync(newPath)||this._writable.mkdirSync(newPath,mode),this._readable.existsSync(oldPath)&&this._readable.readdirSync(oldPath).forEach(function(name){this$1$1.renameSync(path.resolve(oldPath,name),path.resolve(newPath,name))})}else{if(this.existsSync(newPath)&&this.statSync(newPath,!1).isDirectory())throw ApiError.EISDIR(newPath);this.writeFileSync(newPath,this.readFileSync(oldPath,null,getFlag("r")),null,getFlag("w"),oldStats.mode)}oldPath!==newPath&&this.existsSync(oldPath)&&this.unlinkSync(oldPath)},"renameSync"),UnlockedOverlayFS2.prototype.stat=__name(function(p,isLstat,cb){var this$1$1=this;this.checkInitAsync(cb)&&this._writable.stat(p,isLstat,function(err,stat2){err&&err.errno===ErrorCode.ENOENT?(this$1$1._deletedFiles[p]&&cb(ApiError.ENOENT(p)),this$1$1._readable.stat(p,isLstat,function(err2,stat3){stat3&&(stat3=stat3.clone(),stat3.mode=makeModeWritable(stat3.mode)),cb(err2,stat3)})):cb(err,stat2)})},"stat"),UnlockedOverlayFS2.prototype.statSync=__name(function(p,isLstat){this.checkInitialized();try{return this._writable.statSync(p,isLstat)}catch{if(this._deletedFiles[p])throw ApiError.ENOENT(p);var oldStat=this._readable.statSync(p,isLstat).clone();return oldStat.mode=makeModeWritable(oldStat.mode),oldStat}},"statSync"),UnlockedOverlayFS2.prototype.open=__name(function(p,flag,mode,cb){var this$1$1=this;!this.checkInitAsync(cb)||this.checkPathAsync(p,cb)||this.stat(p,!1,function(err,stats){if(stats)switch(flag.pathExistsAction()){case ActionType.TRUNCATE_FILE:return this$1$1.createParentDirectoriesAsync(p,function(err2){if(err2)return cb(err2);this$1$1._writable.open(p,flag,mode,cb)});case ActionType.NOP:return this$1$1._writable.exists(p,function(exists){exists?this$1$1._writable.open(p,flag,mode,cb):(stats=stats.clone(),stats.mode=mode,this$1$1._readable.readFile(p,null,getFlag("r"),function(readFileErr,data){if(readFileErr)return cb(readFileErr);stats.size===-1&&(stats.size=data.length);var f=new OverlayFile(this$1$1,p,flag,stats,data);cb(null,f)}))});default:return cb(ApiError.EEXIST(p))}else switch(flag.pathNotExistsAction()){case ActionType.CREATE_FILE:return this$1$1.createParentDirectoriesAsync(p,function(err2){return err2?cb(err2):this$1$1._writable.open(p,flag,mode,cb)});default:return cb(ApiError.ENOENT(p))}})},"open"),UnlockedOverlayFS2.prototype.openSync=__name(function(p,flag,mode){if(this.checkInitialized(),this.checkPath(p),p===deletionLogPath)throw ApiError.EPERM("Cannot open deletion log.");if(this.existsSync(p))switch(flag.pathExistsAction()){case ActionType.TRUNCATE_FILE:return this.createParentDirectories(p),this._writable.openSync(p,flag,mode);case ActionType.NOP:if(this._writable.existsSync(p))return this._writable.openSync(p,flag,mode);var buf=this._readable.readFileSync(p,null,getFlag("r")),stats=this._readable.statSync(p,!1).clone();return stats.mode=mode,new OverlayFile(this,p,flag,stats,buf);default:throw ApiError.EEXIST(p)}else switch(flag.pathNotExistsAction()){case ActionType.CREATE_FILE:return this.createParentDirectories(p),this._writable.openSync(p,flag,mode);default:throw ApiError.ENOENT(p)}},"openSync"),UnlockedOverlayFS2.prototype.unlink=__name(function(p,cb){var this$1$1=this;!this.checkInitAsync(cb)||this.checkPathAsync(p,cb)||this.exists(p,function(exists){if(!exists)return cb(ApiError.ENOENT(p));this$1$1._writable.exists(p,function(writableExists){if(writableExists)return this$1$1._writable.unlink(p,function(err){if(err)return cb(err);this$1$1.exists(p,function(readableExists){readableExists&&this$1$1.deletePath(p),cb(null)})});this$1$1.deletePath(p),cb(null)})})},"unlink"),UnlockedOverlayFS2.prototype.unlinkSync=__name(function(p){if(this.checkInitialized(),this.checkPath(p),this.existsSync(p))this._writable.existsSync(p)&&this._writable.unlinkSync(p),this.existsSync(p)&&this.deletePath(p);else throw ApiError.ENOENT(p)},"unlinkSync"),UnlockedOverlayFS2.prototype.rmdir=__name(function(p,cb){var this$1$1=this;if(this.checkInitAsync(cb)){var rmdirLower=__name(function(){this$1$1.readdir(p,function(err,files){if(err)return cb(err);if(files.length)return cb(ApiError.ENOTEMPTY(p));this$1$1.deletePath(p),cb(null)})},"rmdirLower");this.exists(p,function(exists){if(!exists)return cb(ApiError.ENOENT(p));this$1$1._writable.exists(p,function(writableExists){writableExists?this$1$1._writable.rmdir(p,function(err){if(err)return cb(err);this$1$1._readable.exists(p,function(readableExists){readableExists?rmdirLower():cb()})}):rmdirLower()})})}},"rmdir"),UnlockedOverlayFS2.prototype.rmdirSync=__name(function(p){if(this.checkInitialized(),this.existsSync(p)){if(this._writable.existsSync(p)&&this._writable.rmdirSync(p),this.existsSync(p)){if(this.readdirSync(p).length>0)throw ApiError.ENOTEMPTY(p);this.deletePath(p)}}else throw ApiError.ENOENT(p)},"rmdirSync"),UnlockedOverlayFS2.prototype.mkdir=__name(function(p,mode,cb){var this$1$1=this;this.checkInitAsync(cb)&&this.exists(p,function(exists){if(exists)return cb(ApiError.EEXIST(p));this$1$1.createParentDirectoriesAsync(p,function(err){if(err)return cb(err);this$1$1._writable.mkdir(p,mode,cb)})})},"mkdir"),UnlockedOverlayFS2.prototype.mkdirSync=__name(function(p,mode){if(this.checkInitialized(),this.existsSync(p))throw ApiError.EEXIST(p);this.createParentDirectories(p),this._writable.mkdirSync(p,mode)},"mkdirSync"),UnlockedOverlayFS2.prototype.readdir=__name(function(p,cb){var this$1$1=this;this.checkInitAsync(cb)&&this.stat(p,!1,function(err,dirStats){if(err)return cb(err);if(!dirStats.isDirectory())return cb(ApiError.ENOTDIR(p));this$1$1._writable.readdir(p,function(err2,wFiles){if(err2&&err2.code!=="ENOENT")return cb(err2);(err2||!wFiles)&&(wFiles=[]),this$1$1._readable.readdir(p,function(err3,rFiles){(err3||!rFiles)&&(rFiles=[]);var seenMap={},filtered=wFiles.concat(rFiles.filter(function(fPath){return!this$1$1._deletedFiles[p+"/"+fPath]})).filter(function(fPath){var result=!seenMap[fPath];return seenMap[fPath]=!0,result});cb(null,filtered)})})})},"readdir"),UnlockedOverlayFS2.prototype.readdirSync=__name(function(p){var this$1$1=this;this.checkInitialized();var dirStats=this.statSync(p,!1);if(!dirStats.isDirectory())throw ApiError.ENOTDIR(p);var contents=[];try{contents=contents.concat(this._writable.readdirSync(p))}catch{}try{contents=contents.concat(this._readable.readdirSync(p).filter(function(fPath){return!this$1$1._deletedFiles[p+"/"+fPath]}))}catch{}var seenMap={};return contents.filter(function(fileP){var result=!seenMap[fileP];return seenMap[fileP]=!0,result})},"readdirSync"),UnlockedOverlayFS2.prototype.exists=__name(function(p,cb){var this$1$1=this;this.checkInitialized(),this._writable.exists(p,function(existsWritable){if(existsWritable)return cb(!0);this$1$1._readable.exists(p,function(existsReadable){cb(existsReadable&&this$1$1._deletedFiles[p]!==!0)})})},"exists"),UnlockedOverlayFS2.prototype.existsSync=__name(function(p){return this.checkInitialized(),this._writable.existsSync(p)||this._readable.existsSync(p)&&this._deletedFiles[p]!==!0},"existsSync"),UnlockedOverlayFS2.prototype.chmod=__name(function(p,isLchmod,mode,cb){var this$1$1=this;this.checkInitAsync(cb)&&this.operateOnWritableAsync(p,function(err){if(err)return cb(err);this$1$1._writable.chmod(p,isLchmod,mode,cb)})},"chmod"),UnlockedOverlayFS2.prototype.chmodSync=__name(function(p,isLchmod,mode){var this$1$1=this;this.checkInitialized(),this.operateOnWritable(p,function(){this$1$1._writable.chmodSync(p,isLchmod,mode)})},"chmodSync"),UnlockedOverlayFS2.prototype.chown=__name(function(p,isLchmod,uid,gid,cb){var this$1$1=this;this.checkInitAsync(cb)&&this.operateOnWritableAsync(p,function(err){if(err)return cb(err);this$1$1._writable.chown(p,isLchmod,uid,gid,cb)})},"chown"),UnlockedOverlayFS2.prototype.chownSync=__name(function(p,isLchown,uid,gid){var this$1$1=this;this.checkInitialized(),this.operateOnWritable(p,function(){this$1$1._writable.chownSync(p,isLchown,uid,gid)})},"chownSync"),UnlockedOverlayFS2.prototype.utimes=__name(function(p,atime,mtime,cb){var this$1$1=this;this.checkInitAsync(cb)&&this.operateOnWritableAsync(p,function(err){if(err)return cb(err);this$1$1._writable.utimes(p,atime,mtime,cb)})},"utimes"),UnlockedOverlayFS2.prototype.utimesSync=__name(function(p,atime,mtime){var this$1$1=this;this.checkInitialized(),this.operateOnWritable(p,function(){this$1$1._writable.utimesSync(p,atime,mtime)})},"utimesSync"),UnlockedOverlayFS2.prototype.deletePath=__name(function(p){this._deletedFiles[p]=!0,this.updateLog("d"+p+`
`)},"deletePath"),UnlockedOverlayFS2.prototype.updateLog=__name(function(addition){var this$1$1=this;this._deleteLog+=addition,this._deleteLogUpdatePending?this._deleteLogUpdateNeeded=!0:(this._deleteLogUpdatePending=!0,this._writable.writeFile(deletionLogPath,this._deleteLog,"utf8",FileFlag.getFileFlag("w"),420,function(e){this$1$1._deleteLogUpdatePending=!1,e?this$1$1._deleteLogError=e:this$1$1._deleteLogUpdateNeeded&&(this$1$1._deleteLogUpdateNeeded=!1,this$1$1.updateLog(""))}))},"updateLog"),UnlockedOverlayFS2.prototype._reparseDeletionLog=__name(function(){var this$1$1=this;this._deletedFiles={},this._deleteLog.split(`
`).forEach(function(path$$1){this$1$1._deletedFiles[path$$1.slice(1)]=path$$1.slice(0,1)==="d"})},"_reparseDeletionLog"),UnlockedOverlayFS2.prototype.checkInitialized=__name(function(){if(this._isInitialized){if(this._deleteLogError!==null){var e=this._deleteLogError;throw this._deleteLogError=null,e}}else throw new ApiError(ErrorCode.EPERM,"OverlayFS is not initialized. Please initialize OverlayFS using its initialize() method before using it.")},"checkInitialized"),UnlockedOverlayFS2.prototype.checkInitAsync=__name(function(cb){if(this._isInitialized){if(this._deleteLogError!==null){var e=this._deleteLogError;return this._deleteLogError=null,cb(e),!1}}else return cb(new ApiError(ErrorCode.EPERM,"OverlayFS is not initialized. Please initialize OverlayFS using its initialize() method before using it.")),!1;return!0},"checkInitAsync"),UnlockedOverlayFS2.prototype.checkPath=__name(function(p){if(p===deletionLogPath)throw ApiError.EPERM(p)},"checkPath"),UnlockedOverlayFS2.prototype.checkPathAsync=__name(function(p,cb){return p===deletionLogPath?(cb(ApiError.EPERM(p)),!0):!1},"checkPathAsync"),UnlockedOverlayFS2.prototype.createParentDirectoriesAsync=__name(function(p,cb){var parent=path.dirname(p),toCreate=[],self2=this;this._writable.stat(parent,!1,statDone);function statDone(err,stat){err?(toCreate.push(parent),parent=path.dirname(parent),self2._writable.stat(parent,!1,statDone)):createParents()}__name(statDone,"statDone");function createParents(){if(!toCreate.length)return cb();var dir=toCreate.pop();self2._readable.stat(dir,!1,function(err,stats){if(!stats)return cb();self2._writable.mkdir(dir,stats.mode,function(err2){if(err2)return cb(err2);createParents()})})}__name(createParents,"createParents")},"createParentDirectoriesAsync"),UnlockedOverlayFS2.prototype.createParentDirectories=__name(function(p){for(var this$1$1=this,parent=path.dirname(p),toCreate=[];!this._writable.existsSync(parent);)toCreate.push(parent),parent=path.dirname(parent);toCreate=toCreate.reverse(),toCreate.forEach(function(p2){this$1$1._writable.mkdirSync(p2,this$1$1.statSync(p2,!1).mode)})},"createParentDirectories"),UnlockedOverlayFS2.prototype.operateOnWritable=__name(function(p,f){if(this.existsSync(p))this._writable.existsSync(p)||this.copyToWritable(p),f();else throw ApiError.ENOENT(p)},"operateOnWritable"),UnlockedOverlayFS2.prototype.operateOnWritableAsync=__name(function(p,cb){var this$1$1=this;this.exists(p,function(exists){if(!exists)return cb(ApiError.ENOENT(p));this$1$1._writable.exists(p,function(existsWritable){if(existsWritable)cb();else return this$1$1.copyToWritableAsync(p,cb)})})},"operateOnWritableAsync"),UnlockedOverlayFS2.prototype.copyToWritable=__name(function(p){var pStats=this.statSync(p,!1);pStats.isDirectory()?this._writable.mkdirSync(p,pStats.mode):this.writeFileSync(p,this._readable.readFileSync(p,null,getFlag("r")),null,getFlag("w"),this.statSync(p,!1).mode)},"copyToWritable"),UnlockedOverlayFS2.prototype.copyToWritableAsync=__name(function(p,cb){var this$1$1=this;this.stat(p,!1,function(err,pStats){if(err)return cb(err);if(pStats.isDirectory())return this$1$1._writable.mkdir(p,pStats.mode,cb);this$1$1._readable.readFile(p,null,getFlag("r"),function(err2,data){if(err2)return cb(err2);this$1$1.writeFile(p,data,null,getFlag("w"),pStats.mode,cb)})})},"copyToWritableAsync"),UnlockedOverlayFS2})(BaseFileSystem),OverlayFS=(function(LockedFS$$1){function OverlayFS2(writable,readable,deprecateMsg){deprecateMsg===void 0&&(deprecateMsg=!0),LockedFS$$1.call(this,new UnlockedOverlayFS(writable,readable)),deprecationMessage(deprecateMsg,OverlayFS2.Name,{readable:"readable file system",writable:"writable file system"})}return __name(OverlayFS2,"OverlayFS2"),LockedFS$$1&&(OverlayFS2.__proto__=LockedFS$$1),OverlayFS2.prototype=Object.create(LockedFS$$1&&LockedFS$$1.prototype),OverlayFS2.prototype.constructor=OverlayFS2,OverlayFS2.Create=__name(function(opts,cb){try{var fs2=new OverlayFS2(opts.writable,opts.readable,!1);fs2.initialize(function(e){cb(e,fs2)},!1)}catch(e){cb(e)}},"Create"),OverlayFS2.isAvailable=__name(function(){return UnlockedOverlayFS.isAvailable()},"isAvailable"),OverlayFS2.prototype.initialize=__name(function(cb,deprecateMsg){deprecateMsg===void 0&&(deprecateMsg=!0),deprecateMsg&&console.warn("[OverlayFS] OverlayFS.initialize() is deprecated and will be removed in the next major release. Please use 'OverlayFS.Create({readable: readable file system instance, writable: writable file system instance}, cb)' to create and initialize OverlayFS instances."),LockedFS$$1.prototype.initialize.call(this,cb)},"initialize2"),OverlayFS2.prototype.getOverlayedFileSystems=__name(function(){return LockedFS$$1.prototype.getFSUnlocked.call(this).getOverlayedFileSystems()},"getOverlayedFileSystems"),OverlayFS2.prototype.unwrap=__name(function(){return LockedFS$$1.prototype.getFSUnlocked.call(this)},"unwrap"),OverlayFS2})(LockedFS);OverlayFS.Name="OverlayFS",OverlayFS.Options={writable:{type:"object",description:"The file system to write modified files to."},readable:{type:"object",description:"The file system that initially populates this file system."}};var SpecialArgType;(function(SpecialArgType2){SpecialArgType2[SpecialArgType2.CB=0]="CB",SpecialArgType2[SpecialArgType2.FD=1]="FD",SpecialArgType2[SpecialArgType2.API_ERROR=2]="API_ERROR",SpecialArgType2[SpecialArgType2.STATS=3]="STATS",SpecialArgType2[SpecialArgType2.PROBE=4]="PROBE",SpecialArgType2[SpecialArgType2.FILEFLAG=5]="FILEFLAG",SpecialArgType2[SpecialArgType2.BUFFER=6]="BUFFER",SpecialArgType2[SpecialArgType2.ERROR=7]="ERROR"})(SpecialArgType||(SpecialArgType={}));var CallbackArgumentConverter=__name(function(){this._callbacks={},this._nextId=0},"CallbackArgumentConverter2");CallbackArgumentConverter.prototype.toRemoteArg=__name(function(cb){var id=this._nextId++;return this._callbacks[id]=cb,{type:SpecialArgType.CB,id}},"toRemoteArg"),CallbackArgumentConverter.prototype.toLocalArg=__name(function(id){var cb=this._callbacks[id];return delete this._callbacks[id],cb},"toLocalArg");var FileDescriptorArgumentConverter=__name(function(){this._fileDescriptors={},this._nextId=0},"FileDescriptorArgumentConverter2");FileDescriptorArgumentConverter.prototype.toRemoteArg=__name(function(fd,p,flag,cb){var id=this._nextId++,data,stat;this._fileDescriptors[id]=fd,fd.stat(function(err,stats){err?cb(err):(stat=bufferToTransferrableObject(stats.toBuffer()),flag.isReadable()?fd.read(Buffer2.alloc(stats.size),0,stats.size,0,function(err2,bytesRead,buff){err2?cb(err2):(data=bufferToTransferrableObject(buff),cb(null,{type:SpecialArgType.FD,id,data,stat,path:p,flag:flag.getFlagString()}))}):cb(null,{type:SpecialArgType.FD,id,data:new ArrayBuffer(0),stat,path:p,flag:flag.getFlagString()}))})},"toRemoteArg"),FileDescriptorArgumentConverter.prototype.applyFdAPIRequest=__name(function(request,cb){var this$1$1=this,fdArg=request.args[0];this._applyFdChanges(fdArg,function(err,fd){err?cb(err):fd[request.method](function(e){request.method==="close"&&delete this$1$1._fileDescriptors[fdArg.id],cb(e)})})},"applyFdAPIRequest"),FileDescriptorArgumentConverter.prototype._applyFdChanges=__name(function(remoteFd,cb){var fd=this._fileDescriptors[remoteFd.id],data=transferrableObjectToBuffer(remoteFd.data),remoteStats=Stats.fromBuffer(transferrableObjectToBuffer(remoteFd.stat)),flag=FileFlag.getFileFlag(remoteFd.flag);flag.isWriteable()?fd.write(data,0,data.length,flag.isAppendable()?fd.getPos():0,function(e){function applyStatChanges(){fd.stat(function(e2,stats){e2?cb(e2):stats.mode!==remoteStats.mode?fd.chmod(remoteStats.mode,function(e3){cb(e3,fd)}):cb(e2,fd)})}__name(applyStatChanges,"applyStatChanges"),e?cb(e):flag.isAppendable()?applyStatChanges():fd.truncate(data.length,function(){applyStatChanges()})}):cb(null,fd)},"_applyFdChanges");function apiErrorLocal2Remote(e){return{type:SpecialArgType.API_ERROR,errorData:bufferToTransferrableObject(e.writeToBuffer())}}__name(apiErrorLocal2Remote,"apiErrorLocal2Remote");function apiErrorRemote2Local(e){return ApiError.fromBuffer(transferrableObjectToBuffer(e.errorData))}__name(apiErrorRemote2Local,"apiErrorRemote2Local");function errorLocal2Remote(e){return{type:SpecialArgType.ERROR,name:e.name,message:e.message,stack:e.stack}}__name(errorLocal2Remote,"errorLocal2Remote");function errorRemote2Local(e){var cnstr=global$1[e.name];typeof cnstr!="function"&&(cnstr=Error);var err=new cnstr(e.message);return err.stack=e.stack,err}__name(errorRemote2Local,"errorRemote2Local");function statsLocal2Remote(stats){return{type:SpecialArgType.STATS,statsData:bufferToTransferrableObject(stats.toBuffer())}}__name(statsLocal2Remote,"statsLocal2Remote");function statsRemote2Local(stats){return Stats.fromBuffer(transferrableObjectToBuffer(stats.statsData))}__name(statsRemote2Local,"statsRemote2Local");function fileFlagLocal2Remote(flag){return{type:SpecialArgType.FILEFLAG,flagStr:flag.getFlagString()}}__name(fileFlagLocal2Remote,"fileFlagLocal2Remote");function fileFlagRemote2Local(remoteFlag){return FileFlag.getFileFlag(remoteFlag.flagStr)}__name(fileFlagRemote2Local,"fileFlagRemote2Local");function bufferToTransferrableObject(buff){return buffer2ArrayBuffer(buff)}__name(bufferToTransferrableObject,"bufferToTransferrableObject");function transferrableObjectToBuffer(buff){return arrayBuffer2Buffer(buff)}__name(transferrableObjectToBuffer,"transferrableObjectToBuffer");function bufferLocal2Remote(buff){return{type:SpecialArgType.BUFFER,data:bufferToTransferrableObject(buff)}}__name(bufferLocal2Remote,"bufferLocal2Remote");function bufferRemote2Local(buffArg){return transferrableObjectToBuffer(buffArg.data)}__name(bufferRemote2Local,"bufferRemote2Local");function isAPIRequest(data){return data&&typeof data=="object"&&data.hasOwnProperty("browserfsMessage")&&data.browserfsMessage}__name(isAPIRequest,"isAPIRequest");function isAPIResponse(data){return data&&typeof data=="object"&&data.hasOwnProperty("browserfsMessage")&&data.browserfsMessage}__name(isAPIResponse,"isAPIResponse");var WorkerFile=(function(PreloadFile$$1){function WorkerFile2(_fs,_path,_flag,_stat,remoteFdId,contents){PreloadFile$$1.call(this,_fs,_path,_flag,_stat,contents),this._remoteFdId=remoteFdId}return __name(WorkerFile2,"WorkerFile2"),PreloadFile$$1&&(WorkerFile2.__proto__=PreloadFile$$1),WorkerFile2.prototype=Object.create(PreloadFile$$1&&PreloadFile$$1.prototype),WorkerFile2.prototype.constructor=WorkerFile2,WorkerFile2.prototype.getRemoteFdId=__name(function(){return this._remoteFdId},"getRemoteFdId"),WorkerFile2.prototype.toRemoteArg=__name(function(){return{type:SpecialArgType.FD,id:this._remoteFdId,data:bufferToTransferrableObject(this.getBuffer()),stat:bufferToTransferrableObject(this.getStats().toBuffer()),path:this.getPath(),flag:this.getFlag().getFlagString()}},"toRemoteArg"),WorkerFile2.prototype.sync=__name(function(cb){this._syncClose("sync",cb)},"sync"),WorkerFile2.prototype.close=__name(function(cb){this._syncClose("close",cb)},"close"),WorkerFile2.prototype._syncClose=__name(function(type,cb){var this$1$1=this;this.isDirty()?this._fs.syncClose(type,this,function(e){e||this$1$1.resetDirty(),cb(e)}):cb()},"_syncClose"),WorkerFile2})(PreloadFile),WorkerFS=(function(BaseFileSystem$$1){function WorkerFS2(worker,deprecateMsg){var this$1$1=this;deprecateMsg===void 0&&(deprecateMsg=!0),BaseFileSystem$$1.call(this),this._callbackConverter=new CallbackArgumentConverter,this._isInitialized=!1,this._isReadOnly=!1,this._supportLinks=!1,this._supportProps=!1,this._worker=worker,deprecationMessage(deprecateMsg,WorkerFS2.Name,{worker:"Web Worker instance"}),this._worker.addEventListener("message",function(e){var resp=e.data;if(isAPIResponse(resp)){var i2,args=resp.args,fixedArgs=new Array(args.length);for(i2=0;i2<fixedArgs.length;i2++)fixedArgs[i2]=this$1$1._argRemote2Local(args[i2]);this$1$1._callbackConverter.toLocalArg(resp.cbId).apply(null,fixedArgs)}})}return __name(WorkerFS2,"WorkerFS2"),BaseFileSystem$$1&&(WorkerFS2.__proto__=BaseFileSystem$$1),WorkerFS2.prototype=Object.create(BaseFileSystem$$1&&BaseFileSystem$$1.prototype),WorkerFS2.prototype.constructor=WorkerFS2,WorkerFS2.Create=__name(function(opts,cb){var fs2=new WorkerFS2(opts.worker,!1);fs2.initialize(function(){cb(null,fs2)})},"Create"),WorkerFS2.isAvailable=__name(function(){return typeof importScripts<"u"||typeof Worker<"u"},"isAvailable"),WorkerFS2.attachRemoteListener=__name(function(worker){var fdConverter=new FileDescriptorArgumentConverter;function argLocal2Remote(arg,requestArgs,cb){switch(typeof arg){case"object":arg instanceof Stats?cb(null,statsLocal2Remote(arg)):arg instanceof ApiError?cb(null,apiErrorLocal2Remote(arg)):arg instanceof BaseFile?cb(null,fdConverter.toRemoteArg(arg,requestArgs[0],requestArgs[1],cb)):arg instanceof FileFlag?cb(null,fileFlagLocal2Remote(arg)):arg instanceof Buffer2?cb(null,bufferLocal2Remote(arg)):arg instanceof Error?cb(null,errorLocal2Remote(arg)):cb(null,arg);break;default:cb(null,arg);break}}__name(argLocal2Remote,"argLocal2Remote");function argRemote2Local(arg,fixedRequestArgs){if(!arg)return arg;switch(typeof arg){case"object":if(typeof arg.type=="number"){var specialArg=arg;switch(specialArg.type){case SpecialArgType.CB:var cbId=arg.id;return function(){var arguments$1=arguments,i2,fixedArgs=new Array(arguments.length),message,countdown=arguments.length;function abortAndSendError(err){countdown>0&&(countdown=-1,message={browserfsMessage:!0,cbId,args:[apiErrorLocal2Remote(err)]},worker.postMessage(message))}for(__name(abortAndSendError,"abortAndSendError"),i2=0;i2<arguments.length;i2++)(function(i3,arg2){argLocal2Remote(arg2,fixedRequestArgs,function(err,fixedArg){fixedArgs[i3]=fixedArg,err?abortAndSendError(err):--countdown===0&&(message={browserfsMessage:!0,cbId,args:fixedArgs},worker.postMessage(message))})})(i2,arguments$1[i2]);arguments.length===0&&(message={browserfsMessage:!0,cbId,args:fixedArgs},worker.postMessage(message))};case SpecialArgType.API_ERROR:return apiErrorRemote2Local(specialArg);case SpecialArgType.STATS:return statsRemote2Local(specialArg);case SpecialArgType.FILEFLAG:return fileFlagRemote2Local(specialArg);case SpecialArgType.BUFFER:return bufferRemote2Local(specialArg);case SpecialArgType.ERROR:return errorRemote2Local(specialArg);default:return arg}}else return arg;default:return arg}}__name(argRemote2Local,"argRemote2Local"),worker.addEventListener("message",function(e){var request=e.data;if(isAPIRequest(request)){var args=request.args,fixedArgs=new Array(args.length);switch(request.method){case"close":case"sync":(function(){var remoteCb=args[1];fdConverter.applyFdAPIRequest(request,function(err){var response={browserfsMessage:!0,cbId:remoteCb.id,args:err?[apiErrorLocal2Remote(err)]:[]};worker.postMessage(response)})})();break;case"probe":(function(){var rootFs=_fsMock.getRootFS(),remoteCb=args[1],probeResponse={type:SpecialArgType.PROBE,isReadOnly:rootFs.isReadOnly(),supportsLinks:rootFs.supportsLinks(),supportsProps:rootFs.supportsProps()},response={browserfsMessage:!0,cbId:remoteCb.id,args:[probeResponse]};worker.postMessage(response)})();break;default:for(var i2=0;i2<args.length;i2++)fixedArgs[i2]=argRemote2Local(args[i2],fixedArgs);var rootFS=_fsMock.getRootFS();rootFS[request.method].apply(rootFS,fixedArgs);break}}})},"attachRemoteListener"),WorkerFS2.prototype.getName=__name(function(){return WorkerFS2.Name},"getName"),WorkerFS2.prototype.initialize=__name(function(cb){var this$1$1=this;if(this._isInitialized)cb();else{var message={browserfsMessage:!0,method:"probe",args:[this._argLocal2Remote(emptyBuffer()),this._callbackConverter.toRemoteArg(function(probeResponse){this$1$1._isInitialized=!0,this$1$1._isReadOnly=probeResponse.isReadOnly,this$1$1._supportLinks=probeResponse.supportsLinks,this$1$1._supportProps=probeResponse.supportsProps,cb()})]};this._worker.postMessage(message)}},"initialize2"),WorkerFS2.prototype.isReadOnly=__name(function(){return this._isReadOnly},"isReadOnly"),WorkerFS2.prototype.supportsSynch=__name(function(){return!1},"supportsSynch"),WorkerFS2.prototype.supportsLinks=__name(function(){return this._supportLinks},"supportsLinks"),WorkerFS2.prototype.supportsProps=__name(function(){return this._supportProps},"supportsProps"),WorkerFS2.prototype.rename=__name(function(oldPath,newPath,cb){this._rpc("rename",arguments)},"rename"),WorkerFS2.prototype.stat=__name(function(p,isLstat,cb){this._rpc("stat",arguments)},"stat"),WorkerFS2.prototype.open=__name(function(p,flag,mode,cb){this._rpc("open",arguments)},"open"),WorkerFS2.prototype.unlink=__name(function(p,cb){this._rpc("unlink",arguments)},"unlink"),WorkerFS2.prototype.rmdir=__name(function(p,cb){this._rpc("rmdir",arguments)},"rmdir"),WorkerFS2.prototype.mkdir=__name(function(p,mode,cb){this._rpc("mkdir",arguments)},"mkdir"),WorkerFS2.prototype.readdir=__name(function(p,cb){this._rpc("readdir",arguments)},"readdir"),WorkerFS2.prototype.exists=__name(function(p,cb){this._rpc("exists",arguments)},"exists"),WorkerFS2.prototype.realpath=__name(function(p,cache,cb){this._rpc("realpath",arguments)},"realpath"),WorkerFS2.prototype.truncate=__name(function(p,len,cb){this._rpc("truncate",arguments)},"truncate"),WorkerFS2.prototype.readFile=__name(function(fname,encoding,flag,cb){this._rpc("readFile",arguments)},"readFile"),WorkerFS2.prototype.writeFile=__name(function(fname,data,encoding,flag,mode,cb){this._rpc("writeFile",arguments)},"writeFile"),WorkerFS2.prototype.appendFile=__name(function(fname,data,encoding,flag,mode,cb){this._rpc("appendFile",arguments)},"appendFile"),WorkerFS2.prototype.chmod=__name(function(p,isLchmod,mode,cb){this._rpc("chmod",arguments)},"chmod"),WorkerFS2.prototype.chown=__name(function(p,isLchown,uid,gid,cb){this._rpc("chown",arguments)},"chown"),WorkerFS2.prototype.utimes=__name(function(p,atime,mtime,cb){this._rpc("utimes",arguments)},"utimes"),WorkerFS2.prototype.link=__name(function(srcpath,dstpath,cb){this._rpc("link",arguments)},"link"),WorkerFS2.prototype.symlink=__name(function(srcpath,dstpath,type,cb){this._rpc("symlink",arguments)},"symlink"),WorkerFS2.prototype.readlink=__name(function(p,cb){this._rpc("readlink",arguments)},"readlink"),WorkerFS2.prototype.syncClose=__name(function(method,fd,cb){this._worker.postMessage({browserfsMessage:!0,method,args:[fd.toRemoteArg(),this._callbackConverter.toRemoteArg(cb)]})},"syncClose"),WorkerFS2.prototype._argRemote2Local=__name(function(arg){if(!arg)return arg;switch(typeof arg){case"object":if(typeof arg.type=="number"){var specialArg=arg;switch(specialArg.type){case SpecialArgType.API_ERROR:return apiErrorRemote2Local(specialArg);case SpecialArgType.FD:var fdArg=specialArg;return new WorkerFile(this,fdArg.path,FileFlag.getFileFlag(fdArg.flag),Stats.fromBuffer(transferrableObjectToBuffer(fdArg.stat)),fdArg.id,transferrableObjectToBuffer(fdArg.data));case SpecialArgType.STATS:return statsRemote2Local(specialArg);case SpecialArgType.FILEFLAG:return fileFlagRemote2Local(specialArg);case SpecialArgType.BUFFER:return bufferRemote2Local(specialArg);case SpecialArgType.ERROR:return errorRemote2Local(specialArg);default:return arg}}else return arg;default:return arg}},"_argRemote2Local"),WorkerFS2.prototype._rpc=__name(function(methodName,args){for(var this$1$1=this,fixedArgs=new Array(args.length),i2=0;i2<args.length;i2++)fixedArgs[i2]=this$1$1._argLocal2Remote(args[i2]);var message={browserfsMessage:!0,method:methodName,args:fixedArgs};this._worker.postMessage(message)},"_rpc"),WorkerFS2.prototype._argLocal2Remote=__name(function(arg){if(!arg)return arg;switch(typeof arg){case"object":return arg instanceof Stats?statsLocal2Remote(arg):arg instanceof ApiError?apiErrorLocal2Remote(arg):arg instanceof WorkerFile?arg.toRemoteArg():arg instanceof FileFlag?fileFlagLocal2Remote(arg):arg instanceof Buffer2?bufferLocal2Remote(arg):arg instanceof Error?errorLocal2Remote(arg):"Unknown argument";case"function":return this._callbackConverter.toRemoteArg(arg);default:return arg}},"_argLocal2Remote"),WorkerFS2})(BaseFileSystem);WorkerFS.Name="WorkerFS",WorkerFS.Options={worker:{type:"object",description:"The target worker that you want to connect to, or the current worker if in a worker context.",validator:__name(function(v,cb){v.postMessage?cb():cb(new ApiError(ErrorCode.EINVAL,"option must be a Web Worker instance."))},"validator")}};function asyncDownloadFileModern(p,type,cb){var req=new XMLHttpRequest;req.open("GET",p,!0);var jsonSupported=!0;switch(type){case"buffer":req.responseType="arraybuffer";break;case"json":try{req.responseType="json",jsonSupported=req.responseType==="json"}catch{jsonSupported=!1}break;default:return cb(new ApiError(ErrorCode.EINVAL,"Invalid download type: "+type))}req.onreadystatechange=function(e){if(req.readyState===4)if(req.status===200)switch(type){case"buffer":return cb(null,req.response?Buffer2.from(req.response):emptyBuffer());case"json":return jsonSupported?cb(null,req.response):cb(null,JSON.parse(req.responseText))}else return cb(new ApiError(req.status,"XHR error."))},req.send()}__name(asyncDownloadFileModern,"asyncDownloadFileModern");function syncDownloadFileModern(p,type){var req=new XMLHttpRequest;req.open("GET",p,!1);var data=null,err=null;if(req.overrideMimeType("text/plain; charset=x-user-defined"),req.onreadystatechange=function(e){if(req.readyState===4)if(req.status===200)switch(type){case"buffer":var text=req.responseText;data=Buffer2.alloc(text.length);for(var i2=0;i2<text.length;i2++)data[i2]=text.charCodeAt(i2);return;case"json":data=JSON.parse(req.responseText);return}else{err=new ApiError(req.status,"XHR error.");return}},req.send(),err)throw err;return data}__name(syncDownloadFileModern,"syncDownloadFileModern");function syncDownloadFileIE10(p,type){var req=new XMLHttpRequest;switch(req.open("GET",p,!1),type){case"buffer":req.responseType="arraybuffer";break;case"json":break;default:throw new ApiError(ErrorCode.EINVAL,"Invalid download type: "+type)}var data,err;if(req.onreadystatechange=function(e){if(req.readyState===4)if(req.status===200)switch(type){case"buffer":data=Buffer2.from(req.response);break;case"json":data=JSON.parse(req.response);break}else err=new ApiError(req.status,"XHR error.")},req.send(),err)throw err;return data}__name(syncDownloadFileIE10,"syncDownloadFileIE10");function getFileSize(async,p,cb){var req=new XMLHttpRequest;req.open("HEAD",p,async),req.onreadystatechange=function(e){if(req.readyState===4)if(req.status===200)try{return cb(null,parseInt(req.getResponseHeader("Content-Length")||"-1",10))}catch{return cb(new ApiError(ErrorCode.EIO,"XHR HEAD error: Could not read content-length."))}else return cb(new ApiError(req.status,"XHR HEAD error."))},req.send()}__name(getFileSize,"getFileSize");var asyncDownloadFile=asyncDownloadFileModern,syncDownloadFile=isIE&&typeof Blob<"u"?syncDownloadFileIE10:syncDownloadFileModern;function getFileSizeSync(p){var rv=-1;return getFileSize(!1,p,function(err,size){if(err)throw err;rv=size}),rv}__name(getFileSizeSync,"getFileSizeSync");function getFileSizeAsync(p,cb){getFileSize(!0,p,cb)}__name(getFileSizeAsync,"getFileSizeAsync");var FileIndex=__name(function(){this._index={},this.addPath("/",new DirInode)},"FileIndex2");FileIndex.fromListing=__name(function(listing){var idx=new FileIndex,rootInode=new DirInode;idx._index["/"]=rootInode;for(var queue=[["",listing,rootInode]];queue.length>0;){var inode=void 0,next=queue.pop(),pwd=next[0],tree=next[1],parent=next[2];for(var node in tree)if(tree.hasOwnProperty(node)){var children=tree[node],name=pwd+"/"+node;children?(idx._index[name]=inode=new DirInode,queue.push([name,children,inode])):inode=new FileInode(new Stats(FileType.FILE,-1,365)),parent&&(parent._ls[node]=inode)}}return idx},"fromListing"),FileIndex.prototype.fileIterator=__name(function(cb){var this$1$1=this;for(var path$$1 in this$1$1._index)if(this$1$1._index.hasOwnProperty(path$$1))for(var dir=this$1$1._index[path$$1],files=dir.getListing(),i2=0,list2=files;i2<list2.length;i2+=1){var file=list2[i2],item=dir.getItem(file);isFileInode(item)&&cb(item.getData())}},"fileIterator"),FileIndex.prototype.addPath=__name(function(path$$1,inode){if(!inode)throw new Error("Inode must be specified");if(path$$1[0]!=="/")throw new Error("Path must be absolute, got: "+path$$1);if(this._index.hasOwnProperty(path$$1))return this._index[path$$1]===inode;var splitPath=this._split_path(path$$1),dirpath=splitPath[0],itemname=splitPath[1],parent=this._index[dirpath];return parent===void 0&&path$$1!=="/"&&(parent=new DirInode,!this.addPath(dirpath,parent))||path$$1!=="/"&&!parent.addItem(itemname,inode)?!1:(isDirInode(inode)&&(this._index[path$$1]=inode),!0)},"addPath"),FileIndex.prototype.addPathFast=__name(function(path$$1,inode){var itemNameMark=path$$1.lastIndexOf("/"),parentPath=itemNameMark===0?"/":path$$1.substring(0,itemNameMark),itemName=path$$1.substring(itemNameMark+1),parent=this._index[parentPath];return parent===void 0&&(parent=new DirInode,this.addPathFast(parentPath,parent)),parent.addItem(itemName,inode)?(inode.isDir()&&(this._index[path$$1]=inode),!0):!1},"addPathFast"),FileIndex.prototype.removePath=__name(function(path$$1){var this$1$1=this,splitPath=this._split_path(path$$1),dirpath=splitPath[0],itemname=splitPath[1],parent=this._index[dirpath];if(parent===void 0)return null;var inode=parent.remItem(itemname);if(inode===null)return null;if(isDirInode(inode)){for(var children=inode.getListing(),i2=0,list2=children;i2<list2.length;i2+=1){var child=list2[i2];this$1$1.removePath(path$$1+"/"+child)}path$$1!=="/"&&delete this._index[path$$1]}return inode},"removePath"),FileIndex.prototype.ls=__name(function(path$$1){var item=this._index[path$$1];return item===void 0?null:item.getListing()},"ls"),FileIndex.prototype.getInode=__name(function(path$$1){var splitPath=this._split_path(path$$1),dirpath=splitPath[0],itemname=splitPath[1],parent=this._index[dirpath];return parent===void 0?null:dirpath===path$$1?parent:parent.getItem(itemname)},"getInode"),FileIndex.prototype._split_path=__name(function(p){var dirpath=path.dirname(p),itemname=p.substr(dirpath.length+(dirpath==="/"?0:1));return[dirpath,itemname]},"_split_path");var FileInode=__name(function(data){this.data=data},"FileInode2");FileInode.prototype.isFile=__name(function(){return!0},"isFile"),FileInode.prototype.isDir=__name(function(){return!1},"isDir"),FileInode.prototype.getData=__name(function(){return this.data},"getData"),FileInode.prototype.setData=__name(function(data){this.data=data},"setData");var DirInode=__name(function(data){data===void 0&&(data=null),this.data=data,this._ls={}},"DirInode2");DirInode.prototype.isFile=__name(function(){return!1},"isFile"),DirInode.prototype.isDir=__name(function(){return!0},"isDir"),DirInode.prototype.getData=__name(function(){return this.data},"getData"),DirInode.prototype.getStats=__name(function(){return new Stats(FileType.DIRECTORY,4096,365)},"getStats"),DirInode.prototype.getListing=__name(function(){return Object.keys(this._ls)},"getListing"),DirInode.prototype.getItem=__name(function(p){var item=this._ls[p];return item||null},"getItem"),DirInode.prototype.addItem=__name(function(p,inode){return p in this._ls?!1:(this._ls[p]=inode,!0)},"addItem"),DirInode.prototype.remItem=__name(function(p){var item=this._ls[p];return item===void 0?null:(delete this._ls[p],item)},"remItem");function isFileInode(inode){return!!inode&&inode.isFile()}__name(isFileInode,"isFileInode");function isDirInode(inode){return!!inode&&inode.isDir()}__name(isDirInode,"isDirInode");function tryToString(buff,encoding,cb){try{cb(null,buff.toString(encoding))}catch(e){cb(e)}}__name(tryToString,"tryToString");var XmlHttpRequest=(function(BaseFileSystem$$1){function XmlHttpRequest2(listingUrlOrObj,prefixUrl,deprecateMsg){prefixUrl===void 0&&(prefixUrl=""),deprecateMsg===void 0&&(deprecateMsg=!0),BaseFileSystem$$1.call(this),listingUrlOrObj||(listingUrlOrObj="index.json"),prefixUrl.length>0&&prefixUrl.charAt(prefixUrl.length-1)!=="/"&&(prefixUrl=prefixUrl+"/"),this.prefixUrl=prefixUrl;var listing=null;if(typeof listingUrlOrObj=="string"){if(listing=this._requestFileSync(listingUrlOrObj,"json"),!listing)throw new Error("Unable to find listing at URL: ${listingUrlOrObj}")}else listing=listingUrlOrObj;deprecationMessage(deprecateMsg,XmlHttpRequest2.Name,{index:typeof listingUrlOrObj=="string"?listingUrlOrObj:"file index as an object",baseUrl:prefixUrl}),this._index=FileIndex.fromListing(listing)}return __name(XmlHttpRequest2,"XmlHttpRequest2"),BaseFileSystem$$1&&(XmlHttpRequest2.__proto__=BaseFileSystem$$1),XmlHttpRequest2.prototype=Object.create(BaseFileSystem$$1&&BaseFileSystem$$1.prototype),XmlHttpRequest2.prototype.constructor=XmlHttpRequest2,XmlHttpRequest2.Create=__name(function(opts,cb){opts.index===void 0&&(opts.index="index.json"),typeof opts.index=="string"?XmlHttpRequest2.FromURL(opts.index,cb,opts.baseUrl,!1):cb(null,new XmlHttpRequest2(opts.index,opts.baseUrl,!1))},"Create"),XmlHttpRequest2.isAvailable=__name(function(){return typeof XMLHttpRequest<"u"&&XMLHttpRequest!==null},"isAvailable"),XmlHttpRequest2.FromURL=__name(function(url,cb,baseUrl,deprecateMsg){baseUrl===void 0&&(baseUrl=url.slice(0,url.lastIndexOf("/")+1)),deprecateMsg===void 0&&(deprecateMsg=!0),deprecateMsg&&console.warn(`[XmlHttpRequest] XmlHttpRequest.FromURL() is deprecated and will be removed in the next major release. Please use 'XmlHttpRequest.Create({ index: "`+url+'", baseUrl: "'+baseUrl+`" }, cb)' instead.`),asyncDownloadFile(url,"json",function(e,data){e?cb(e):cb(null,new XmlHttpRequest2(data,baseUrl,!1))})},"FromURL"),XmlHttpRequest2.prototype.empty=__name(function(){this._index.fileIterator(function(file){file.fileData=null})},"empty"),XmlHttpRequest2.prototype.getName=__name(function(){return XmlHttpRequest2.Name},"getName"),XmlHttpRequest2.prototype.diskSpace=__name(function(path$$1,cb){cb(0,0)},"diskSpace"),XmlHttpRequest2.prototype.isReadOnly=__name(function(){return!0},"isReadOnly"),XmlHttpRequest2.prototype.supportsLinks=__name(function(){return!1},"supportsLinks"),XmlHttpRequest2.prototype.supportsProps=__name(function(){return!1},"supportsProps"),XmlHttpRequest2.prototype.supportsSynch=__name(function(){return!0},"supportsSynch"),XmlHttpRequest2.prototype.preloadFile=__name(function(path$$1,buffer$$1){var inode=this._index.getInode(path$$1);if(isFileInode(inode)){if(inode===null)throw ApiError.ENOENT(path$$1);var stats=inode.getData();stats.size=buffer$$1.length,stats.fileData=buffer$$1}else throw ApiError.EISDIR(path$$1)},"preloadFile"),XmlHttpRequest2.prototype.stat=__name(function(path$$1,isLstat,cb){var inode=this._index.getInode(path$$1);if(inode===null)return cb(ApiError.ENOENT(path$$1));var stats;isFileInode(inode)?(stats=inode.getData(),stats.size<0?this._requestFileSizeAsync(path$$1,function(e,size){if(e)return cb(e);stats.size=size,cb(null,stats.clone())}):cb(null,stats.clone())):isDirInode(inode)?(stats=inode.getStats(),cb(null,stats)):cb(ApiError.FileError(ErrorCode.EINVAL,path$$1))},"stat"),XmlHttpRequest2.prototype.statSync=__name(function(path$$1,isLstat){var inode=this._index.getInode(path$$1);if(inode===null)throw ApiError.ENOENT(path$$1);var stats;if(isFileInode(inode))stats=inode.getData(),stats.size<0&&(stats.size=this._requestFileSizeSync(path$$1));else if(isDirInode(inode))stats=inode.getStats();else throw ApiError.FileError(ErrorCode.EINVAL,path$$1);return stats},"statSync"),XmlHttpRequest2.prototype.open=__name(function(path$$1,flags,mode,cb){if(flags.isWriteable())return cb(new ApiError(ErrorCode.EPERM,path$$1));var self2=this,inode=this._index.getInode(path$$1);if(inode===null)return cb(ApiError.ENOENT(path$$1));if(isFileInode(inode)){var stats=inode.getData();switch(flags.pathExistsAction()){case ActionType.THROW_EXCEPTION:case ActionType.TRUNCATE_FILE:return cb(ApiError.EEXIST(path$$1));case ActionType.NOP:if(stats.fileData)return cb(null,new NoSyncFile(self2,path$$1,flags,stats.clone(),stats.fileData));this._requestFileAsync(path$$1,"buffer",function(err,buffer$$1){return err?cb(err):(stats.size=buffer$$1.length,stats.fileData=buffer$$1,cb(null,new NoSyncFile(self2,path$$1,flags,stats.clone(),buffer$$1)))});break;default:return cb(new ApiError(ErrorCode.EINVAL,"Invalid FileMode object."))}}else return cb(ApiError.EISDIR(path$$1))},"open"),XmlHttpRequest2.prototype.openSync=__name(function(path$$1,flags,mode){if(flags.isWriteable())throw new ApiError(ErrorCode.EPERM,path$$1);var inode=this._index.getInode(path$$1);if(inode===null)throw ApiError.ENOENT(path$$1);if(isFileInode(inode)){var stats=inode.getData();switch(flags.pathExistsAction()){case ActionType.THROW_EXCEPTION:case ActionType.TRUNCATE_FILE:throw ApiError.EEXIST(path$$1);case ActionType.NOP:if(stats.fileData)return new NoSyncFile(this,path$$1,flags,stats.clone(),stats.fileData);var buffer$$1=this._requestFileSync(path$$1,"buffer");return stats.size=buffer$$1.length,stats.fileData=buffer$$1,new NoSyncFile(this,path$$1,flags,stats.clone(),buffer$$1);default:throw new ApiError(ErrorCode.EINVAL,"Invalid FileMode object.")}}else throw ApiError.EISDIR(path$$1)},"openSync"),XmlHttpRequest2.prototype.readdir=__name(function(path$$1,cb){try{cb(null,this.readdirSync(path$$1))}catch(e){cb(e)}},"readdir"),XmlHttpRequest2.prototype.readdirSync=__name(function(path$$1){var inode=this._index.getInode(path$$1);if(inode===null)throw ApiError.ENOENT(path$$1);if(isDirInode(inode))return inode.getListing();throw ApiError.ENOTDIR(path$$1)},"readdirSync"),XmlHttpRequest2.prototype.readFile=__name(function(fname,encoding,flag,cb){var oldCb=cb;this.open(fname,flag,420,function(err,fd){if(err)return cb(err);cb=__name(function(err2,arg){fd.close(function(err22){return err2||(err2=err22),oldCb(err2,arg)})},"cb");var fdCast=fd,fdBuff=fdCast.getBuffer();encoding===null?cb(err,copyingSlice(fdBuff)):tryToString(fdBuff,encoding,cb)})},"readFile"),XmlHttpRequest2.prototype.readFileSync=__name(function(fname,encoding,flag){var fd=this.openSync(fname,flag,420);try{var fdCast=fd,fdBuff=fdCast.getBuffer();return encoding===null?copyingSlice(fdBuff):fdBuff.toString(encoding)}finally{fd.closeSync()}},"readFileSync"),XmlHttpRequest2.prototype.getXhrPath=__name(function(filePath){return filePath.charAt(0)==="/"&&(filePath=filePath.slice(1)),this.prefixUrl+filePath},"getXhrPath"),XmlHttpRequest2.prototype._requestFileAsync=__name(function(p,type,cb){asyncDownloadFile(this.getXhrPath(p),type,cb)},"_requestFileAsync"),XmlHttpRequest2.prototype._requestFileSync=__name(function(p,type){return syncDownloadFile(this.getXhrPath(p),type)},"_requestFileSync"),XmlHttpRequest2.prototype._requestFileSizeAsync=__name(function(path$$1,cb){getFileSizeAsync(this.getXhrPath(path$$1),cb)},"_requestFileSizeAsync"),XmlHttpRequest2.prototype._requestFileSizeSync=__name(function(path$$1){return getFileSizeSync(this.getXhrPath(path$$1))},"_requestFileSizeSync"),XmlHttpRequest2})(BaseFileSystem);XmlHttpRequest.Name="XmlHttpRequest",XmlHttpRequest.Options={index:{type:["string","object"],optional:!0,description:"URL to a file index as a JSON file or the file index object itself, generated with the make_xhrfs_index script. Defaults to `index.json`."},baseUrl:{type:"string",optional:!0,description:"Used as the URL prefix for fetched files. Default: Fetch files relative to the index."}};var ExtendedASCII=__name(function(){},"ExtendedASCII2");ExtendedASCII.str2byte=__name(function(str,buf){for(var length=str.length>buf.length?buf.length:str.length,i2=0;i2<length;i2++){var charCode=str.charCodeAt(i2);if(charCode>127){var charIdx=ExtendedASCII.extendedChars.indexOf(str.charAt(i2));charIdx>-1&&(charCode=charIdx+128)}buf[charCode]=i2}return length},"str2byte"),ExtendedASCII.byte2str=__name(function(buff){for(var chars=new Array(buff.length),i2=0;i2<buff.length;i2++){var charCode=buff[i2];charCode>127?chars[i2]=ExtendedASCII.extendedChars[charCode-128]:chars[i2]=String.fromCharCode(charCode)}return chars.join("")},"byte2str"),ExtendedASCII.byteLength=__name(function(str){return str.length},"byteLength"),ExtendedASCII.extendedChars=["Ç","ü","é","â","ä","à","å","ç","ê","ë","è","ï","î","ì","Ä","Å","É","æ","Æ","ô","ö","ò","û","ù","ÿ","Ö","Ü","ø","£","Ø","×","ƒ","á","í","ó","ú","ñ","Ñ","ª","º","¿","®","¬","½","¼","¡","«","»","_","_","_","¦","¦","Á","Â","À","©","¦","¦","+","+","¢","¥","+","+","-","-","+","-","+","ã","Ã","+","+","-","-","¦","-","+","¤","ð","Ð","Ê","Ë","È","i","Í","Î","Ï","+","+","_","_","¦","Ì","_","Ó","ß","Ô","Ò","õ","Õ","µ","þ","Þ","Ú","Û","Ù","ý","Ý","¯","´","­","±","_","¾","¶","§","÷","¸","°","¨","·","¹","³","²","_"," "];var inflateRaw=__webpack_require__(31).inflateRaw,decompressionMethods={},ExternalFileAttributeType;(function(ExternalFileAttributeType2){ExternalFileAttributeType2[ExternalFileAttributeType2.MSDOS=0]="MSDOS",ExternalFileAttributeType2[ExternalFileAttributeType2.AMIGA=1]="AMIGA",ExternalFileAttributeType2[ExternalFileAttributeType2.OPENVMS=2]="OPENVMS",ExternalFileAttributeType2[ExternalFileAttributeType2.UNIX=3]="UNIX",ExternalFileAttributeType2[ExternalFileAttributeType2.VM_CMS=4]="VM_CMS",ExternalFileAttributeType2[ExternalFileAttributeType2.ATARI_ST=5]="ATARI_ST",ExternalFileAttributeType2[ExternalFileAttributeType2.OS2_HPFS=6]="OS2_HPFS",ExternalFileAttributeType2[ExternalFileAttributeType2.MAC=7]="MAC",ExternalFileAttributeType2[ExternalFileAttributeType2.Z_SYSTEM=8]="Z_SYSTEM",ExternalFileAttributeType2[ExternalFileAttributeType2.CP_M=9]="CP_M",ExternalFileAttributeType2[ExternalFileAttributeType2.NTFS=10]="NTFS",ExternalFileAttributeType2[ExternalFileAttributeType2.MVS=11]="MVS",ExternalFileAttributeType2[ExternalFileAttributeType2.VSE=12]="VSE",ExternalFileAttributeType2[ExternalFileAttributeType2.ACORN_RISC=13]="ACORN_RISC",ExternalFileAttributeType2[ExternalFileAttributeType2.VFAT=14]="VFAT",ExternalFileAttributeType2[ExternalFileAttributeType2.ALT_MVS=15]="ALT_MVS",ExternalFileAttributeType2[ExternalFileAttributeType2.BEOS=16]="BEOS",ExternalFileAttributeType2[ExternalFileAttributeType2.TANDEM=17]="TANDEM",ExternalFileAttributeType2[ExternalFileAttributeType2.OS_400=18]="OS_400",ExternalFileAttributeType2[ExternalFileAttributeType2.OSX=19]="OSX"})(ExternalFileAttributeType||(ExternalFileAttributeType={}));var CompressionMethod;(function(CompressionMethod2){CompressionMethod2[CompressionMethod2.STORED=0]="STORED",CompressionMethod2[CompressionMethod2.SHRUNK=1]="SHRUNK",CompressionMethod2[CompressionMethod2.REDUCED_1=2]="REDUCED_1",CompressionMethod2[CompressionMethod2.REDUCED_2=3]="REDUCED_2",CompressionMethod2[CompressionMethod2.REDUCED_3=4]="REDUCED_3",CompressionMethod2[CompressionMethod2.REDUCED_4=5]="REDUCED_4",CompressionMethod2[CompressionMethod2.IMPLODE=6]="IMPLODE",CompressionMethod2[CompressionMethod2.DEFLATE=8]="DEFLATE",CompressionMethod2[CompressionMethod2.DEFLATE64=9]="DEFLATE64",CompressionMethod2[CompressionMethod2.TERSE_OLD=10]="TERSE_OLD",CompressionMethod2[CompressionMethod2.BZIP2=12]="BZIP2",CompressionMethod2[CompressionMethod2.LZMA=14]="LZMA",CompressionMethod2[CompressionMethod2.TERSE_NEW=18]="TERSE_NEW",CompressionMethod2[CompressionMethod2.LZ77=19]="LZ77",CompressionMethod2[CompressionMethod2.WAVPACK=97]="WAVPACK",CompressionMethod2[CompressionMethod2.PPMD=98]="PPMD"})(CompressionMethod||(CompressionMethod={}));function msdos2date(time,date){var day=date&31,month=(date>>5&15)-1,year=(date>>9)+1980,second=time&31,minute=time>>5&63,hour=time>>11;return new Date(year,month,day,hour,minute,second)}__name(msdos2date,"msdos2date");function safeToString(buff,useUTF8,start,length){return length===0?"":useUTF8?buff.toString("utf8",start,start+length):ExtendedASCII.byte2str(buff.slice(start,start+length))}__name(safeToString,"safeToString");var FileHeader=__name(function(data){if(this.data=data,data.readUInt32LE(0)!==67324752)throw new ApiError(ErrorCode.EINVAL,"Invalid Zip file: Local file header has invalid signature: "+this.data.readUInt32LE(0))},"FileHeader2");FileHeader.prototype.versionNeeded=__name(function(){return this.data.readUInt16LE(4)},"versionNeeded"),FileHeader.prototype.flags=__name(function(){return this.data.readUInt16LE(6)},"flags"),FileHeader.prototype.compressionMethod=__name(function(){return this.data.readUInt16LE(8)},"compressionMethod"),FileHeader.prototype.lastModFileTime=__name(function(){return msdos2date(this.data.readUInt16LE(10),this.data.readUInt16LE(12))},"lastModFileTime"),FileHeader.prototype.rawLastModFileTime=__name(function(){return this.data.readUInt32LE(10)},"rawLastModFileTime"),FileHeader.prototype.crc32=__name(function(){return this.data.readUInt32LE(14)},"crc32"),FileHeader.prototype.fileNameLength=__name(function(){return this.data.readUInt16LE(26)},"fileNameLength"),FileHeader.prototype.extraFieldLength=__name(function(){return this.data.readUInt16LE(28)},"extraFieldLength"),FileHeader.prototype.fileName=__name(function(){return safeToString(this.data,this.useUTF8(),30,this.fileNameLength())},"fileName"),FileHeader.prototype.extraField=__name(function(){var start=30+this.fileNameLength();return this.data.slice(start,start+this.extraFieldLength())},"extraField"),FileHeader.prototype.totalSize=__name(function(){return 30+this.fileNameLength()+this.extraFieldLength()},"totalSize"),FileHeader.prototype.useUTF8=__name(function(){return(this.flags()&2048)===2048},"useUTF8");var FileData=__name(function(header,record,data){this.header=header,this.record=record,this.data=data},"FileData2");FileData.prototype.decompress=__name(function(){var compressionMethod=this.header.compressionMethod(),fcn=decompressionMethods[compressionMethod];if(fcn)return fcn(this.data,this.record.compressedSize(),this.record.uncompressedSize(),this.record.flag());var name=CompressionMethod[compressionMethod];throw name||(name="Unknown: "+compressionMethod),new ApiError(ErrorCode.EINVAL,"Invalid compression method on file '"+this.header.fileName()+"': "+name)},"decompress"),FileData.prototype.getHeader=__name(function(){return this.header},"getHeader"),FileData.prototype.getRecord=__name(function(){return this.record},"getRecord"),FileData.prototype.getRawData=__name(function(){return this.data},"getRawData");var DataDescriptor=__name(function(data){this.data=data},"DataDescriptor2");DataDescriptor.prototype.crc32=__name(function(){return this.data.readUInt32LE(0)},"crc32"),DataDescriptor.prototype.compressedSize=__name(function(){return this.data.readUInt32LE(4)},"compressedSize"),DataDescriptor.prototype.uncompressedSize=__name(function(){return this.data.readUInt32LE(8)},"uncompressedSize");var ArchiveExtraDataRecord=__name(function(data){if(this.data=data,this.data.readUInt32LE(0)!==134630224)throw new ApiError(ErrorCode.EINVAL,"Invalid archive extra data record signature: "+this.data.readUInt32LE(0))},"ArchiveExtraDataRecord2");ArchiveExtraDataRecord.prototype.length=__name(function(){return this.data.readUInt32LE(4)},"length"),ArchiveExtraDataRecord.prototype.extraFieldData=__name(function(){return this.data.slice(8,8+this.length())},"extraFieldData");var DigitalSignature=__name(function(data){if(this.data=data,this.data.readUInt32LE(0)!==84233040)throw new ApiError(ErrorCode.EINVAL,"Invalid digital signature signature: "+this.data.readUInt32LE(0))},"DigitalSignature2");DigitalSignature.prototype.size=__name(function(){return this.data.readUInt16LE(4)},"size"),DigitalSignature.prototype.signatureData=__name(function(){return this.data.slice(6,6+this.size())},"signatureData");var CentralDirectory=__name(function(zipData,data){if(this.zipData=zipData,this.data=data,this.data.readUInt32LE(0)!==33639248)throw new ApiError(ErrorCode.EINVAL,"Invalid Zip file: Central directory record has invalid signature: "+this.data.readUInt32LE(0));this._filename=this.produceFilename()},"CentralDirectory2");CentralDirectory.prototype.versionMadeBy=__name(function(){return this.data.readUInt16LE(4)},"versionMadeBy"),CentralDirectory.prototype.versionNeeded=__name(function(){return this.data.readUInt16LE(6)},"versionNeeded"),CentralDirectory.prototype.flag=__name(function(){return this.data.readUInt16LE(8)},"flag"),CentralDirectory.prototype.compressionMethod=__name(function(){return this.data.readUInt16LE(10)},"compressionMethod"),CentralDirectory.prototype.lastModFileTime=__name(function(){return msdos2date(this.data.readUInt16LE(12),this.data.readUInt16LE(14))},"lastModFileTime"),CentralDirectory.prototype.rawLastModFileTime=__name(function(){return this.data.readUInt32LE(12)},"rawLastModFileTime"),CentralDirectory.prototype.crc32=__name(function(){return this.data.readUInt32LE(16)},"crc32"),CentralDirectory.prototype.compressedSize=__name(function(){return this.data.readUInt32LE(20)},"compressedSize"),CentralDirectory.prototype.uncompressedSize=__name(function(){return this.data.readUInt32LE(24)},"uncompressedSize"),CentralDirectory.prototype.fileNameLength=__name(function(){return this.data.readUInt16LE(28)},"fileNameLength"),CentralDirectory.prototype.extraFieldLength=__name(function(){return this.data.readUInt16LE(30)},"extraFieldLength"),CentralDirectory.prototype.fileCommentLength=__name(function(){return this.data.readUInt16LE(32)},"fileCommentLength"),CentralDirectory.prototype.diskNumberStart=__name(function(){return this.data.readUInt16LE(34)},"diskNumberStart"),CentralDirectory.prototype.internalAttributes=__name(function(){return this.data.readUInt16LE(36)},"internalAttributes"),CentralDirectory.prototype.externalAttributes=__name(function(){return this.data.readUInt32LE(38)},"externalAttributes"),CentralDirectory.prototype.headerRelativeOffset=__name(function(){return this.data.readUInt32LE(42)},"headerRelativeOffset"),CentralDirectory.prototype.produceFilename=__name(function(){var fileName=safeToString(this.data,this.useUTF8(),46,this.fileNameLength());return fileName.replace(/\\/g,"/")},"produceFilename"),CentralDirectory.prototype.fileName=__name(function(){return this._filename},"fileName"),CentralDirectory.prototype.rawFileName=__name(function(){return this.data.slice(46,46+this.fileNameLength())},"rawFileName"),CentralDirectory.prototype.extraField=__name(function(){var start=44+this.fileNameLength();return this.data.slice(start,start+this.extraFieldLength())},"extraField"),CentralDirectory.prototype.fileComment=__name(function(){var start=46+this.fileNameLength()+this.extraFieldLength();return safeToString(this.data,this.useUTF8(),start,this.fileCommentLength())},"fileComment"),CentralDirectory.prototype.rawFileComment=__name(function(){var start=46+this.fileNameLength()+this.extraFieldLength();return this.data.slice(start,start+this.fileCommentLength())},"rawFileComment"),CentralDirectory.prototype.totalSize=__name(function(){return 46+this.fileNameLength()+this.extraFieldLength()+this.fileCommentLength()},"totalSize"),CentralDirectory.prototype.isDirectory=__name(function(){var fileName=this.fileName();return!!(this.externalAttributes()&16)||fileName.charAt(fileName.length-1)==="/"},"isDirectory"),CentralDirectory.prototype.isFile=__name(function(){return!this.isDirectory()},"isFile"),CentralDirectory.prototype.useUTF8=__name(function(){return(this.flag()&2048)===2048},"useUTF8"),CentralDirectory.prototype.isEncrypted=__name(function(){return(this.flag()&1)===1},"isEncrypted"),CentralDirectory.prototype.getFileData=__name(function(){var start=this.headerRelativeOffset(),header=new FileHeader(this.zipData.slice(start));return new FileData(header,this,this.zipData.slice(start+header.totalSize()))},"getFileData"),CentralDirectory.prototype.getData=__name(function(){return this.getFileData().decompress()},"getData"),CentralDirectory.prototype.getRawData=__name(function(){return this.getFileData().getRawData()},"getRawData"),CentralDirectory.prototype.getStats=__name(function(){return new Stats(FileType.FILE,this.uncompressedSize(),365,new Date,this.lastModFileTime())},"getStats");var EndOfCentralDirectory=__name(function(data){if(this.data=data,this.data.readUInt32LE(0)!==101010256)throw new ApiError(ErrorCode.EINVAL,"Invalid Zip file: End of central directory record has invalid signature: "+this.data.readUInt32LE(0))},"EndOfCentralDirectory2");EndOfCentralDirectory.prototype.diskNumber=__name(function(){return this.data.readUInt16LE(4)},"diskNumber"),EndOfCentralDirectory.prototype.cdDiskNumber=__name(function(){return this.data.readUInt16LE(6)},"cdDiskNumber"),EndOfCentralDirectory.prototype.cdDiskEntryCount=__name(function(){return this.data.readUInt16LE(8)},"cdDiskEntryCount"),EndOfCentralDirectory.prototype.cdTotalEntryCount=__name(function(){return this.data.readUInt16LE(10)},"cdTotalEntryCount"),EndOfCentralDirectory.prototype.cdSize=__name(function(){return this.data.readUInt32LE(12)},"cdSize"),EndOfCentralDirectory.prototype.cdOffset=__name(function(){return this.data.readUInt32LE(16)},"cdOffset"),EndOfCentralDirectory.prototype.cdZipCommentLength=__name(function(){return this.data.readUInt16LE(20)},"cdZipCommentLength"),EndOfCentralDirectory.prototype.cdZipComment=__name(function(){return safeToString(this.data,!0,22,this.cdZipCommentLength())},"cdZipComment"),EndOfCentralDirectory.prototype.rawCdZipComment=__name(function(){return this.data.slice(22,22+this.cdZipCommentLength())},"rawCdZipComment");var ZipTOC=__name(function(index,directoryEntries,eocd,data){this.index=index,this.directoryEntries=directoryEntries,this.eocd=eocd,this.data=data},"ZipTOC2"),ZipFS=(function(SynchronousFileSystem$$1){function ZipFS2(input,name,deprecateMsg){name===void 0&&(name=""),deprecateMsg===void 0&&(deprecateMsg=!0),SynchronousFileSystem$$1.call(this),this.name=name,this._index=new FileIndex,this._directoryEntries=[],this._eocd=null,deprecationMessage(deprecateMsg,ZipFS2.Name,{zipData:"zip data as a Buffer",name}),input instanceof ZipTOC?(this._index=input.index,this._directoryEntries=input.directoryEntries,this._eocd=input.eocd,this.data=input.data):(this.data=input,this.populateIndex())}return __name(ZipFS2,"ZipFS2"),SynchronousFileSystem$$1&&(ZipFS2.__proto__=SynchronousFileSystem$$1),ZipFS2.prototype=Object.create(SynchronousFileSystem$$1&&SynchronousFileSystem$$1.prototype),ZipFS2.prototype.constructor=ZipFS2,ZipFS2.Create=__name(function(opts,cb){try{ZipFS2.computeIndex(opts.zipData,function(zipTOC){var fs2=new ZipFS2(zipTOC,opts.name,!1);cb(null,fs2)},!1)}catch(e){cb(e)}},"Create"),ZipFS2.isAvailable=__name(function(){return!0},"isAvailable"),ZipFS2.RegisterDecompressionMethod=__name(function(m,fcn){decompressionMethods[m]=fcn},"RegisterDecompressionMethod"),ZipFS2.computeIndex=__name(function(data,cb,deprecateMsg){deprecateMsg===void 0&&(deprecateMsg=!0),deprecateMsg&&console.warn("[ZipFS] ZipFS.computeIndex is now deprecated, and will be removed in the next major release. Please update your code to use 'ZipFS.Create({ zipData: zip file as a Buffer}, cb)' instead.");var index=new FileIndex,eocd=ZipFS2.getEOCD(data);if(eocd.diskNumber()!==eocd.cdDiskNumber())throw new ApiError(ErrorCode.EINVAL,"ZipFS does not support spanned zip files.");var cdPtr=eocd.cdOffset();if(cdPtr===4294967295)throw new ApiError(ErrorCode.EINVAL,"ZipFS does not support Zip64.");var cdEnd=cdPtr+eocd.cdSize();ZipFS2.computeIndexResponsive(data,index,cdPtr,cdEnd,cb,[],eocd)},"computeIndex"),ZipFS2.getEOCD=__name(function(data){for(var startOffset=22,endOffset=Math.min(startOffset+65535,data.length-1),i2=startOffset;i2<endOffset;i2++)if(data.readUInt32LE(data.length-i2)===101010256)return new EndOfCentralDirectory(data.slice(data.length-i2));throw new ApiError(ErrorCode.EINVAL,"Invalid ZIP file: Could not locate End of Central Directory signature.")},"getEOCD"),ZipFS2.addToIndex=__name(function(cd,index){var filename=cd.fileName();if(filename.charAt(0)==="/")throw new Error("WHY IS THIS ABSOLUTE");filename.charAt(filename.length-1)==="/"&&(filename=filename.substr(0,filename.length-1)),cd.isDirectory()?index.addPathFast("/"+filename,new DirInode(cd)):index.addPathFast("/"+filename,new FileInode(cd))},"addToIndex"),ZipFS2.computeIndexResponsive=__name(function(data,index,cdPtr,cdEnd,cb,cdEntries,eocd){if(cdPtr<cdEnd){for(var count=0;count++<200&&cdPtr<cdEnd;){var cd=new CentralDirectory(data,data.slice(cdPtr));ZipFS2.addToIndex(cd,index),cdPtr+=cd.totalSize(),cdEntries.push(cd)}setImmediate$3(function(){ZipFS2.computeIndexResponsive(data,index,cdPtr,cdEnd,cb,cdEntries,eocd)})}else cb(new ZipTOC(index,cdEntries,eocd,data))},"computeIndexResponsive"),ZipFS2.prototype.getName=__name(function(){return ZipFS2.Name+(this.name!==""?" "+this.name:"")},"getName"),ZipFS2.prototype.getCentralDirectoryEntry=__name(function(path$$1){var inode=this._index.getInode(path$$1);if(inode===null)throw ApiError.ENOENT(path$$1);if(isFileInode(inode))return inode.getData();if(isDirInode(inode))return inode.getData();throw ApiError.EPERM("Invalid inode: "+inode)},"getCentralDirectoryEntry"),ZipFS2.prototype.getCentralDirectoryEntryAt=__name(function(index){var dirEntry=this._directoryEntries[index];if(!dirEntry)throw new RangeError("Invalid directory index: "+index+".");return dirEntry},"getCentralDirectoryEntryAt"),ZipFS2.prototype.getNumberOfCentralDirectoryEntries=__name(function(){return this._directoryEntries.length},"getNumberOfCentralDirectoryEntries"),ZipFS2.prototype.getEndOfCentralDirectory=__name(function(){return this._eocd},"getEndOfCentralDirectory"),ZipFS2.prototype.diskSpace=__name(function(path$$1,cb){cb(this.data.length,0)},"diskSpace"),ZipFS2.prototype.isReadOnly=__name(function(){return!0},"isReadOnly"),ZipFS2.prototype.supportsLinks=__name(function(){return!1},"supportsLinks"),ZipFS2.prototype.supportsProps=__name(function(){return!1},"supportsProps"),ZipFS2.prototype.supportsSynch=__name(function(){return!0},"supportsSynch"),ZipFS2.prototype.statSync=__name(function(path$$1,isLstat){var inode=this._index.getInode(path$$1);if(inode===null)throw ApiError.ENOENT(path$$1);var stats;if(isFileInode(inode))stats=inode.getData().getStats();else if(isDirInode(inode))stats=inode.getStats();else throw new ApiError(ErrorCode.EINVAL,"Invalid inode.");return stats},"statSync"),ZipFS2.prototype.openSync=__name(function(path$$1,flags,mode){if(flags.isWriteable())throw new ApiError(ErrorCode.EPERM,path$$1);var inode=this._index.getInode(path$$1);if(inode)if(isFileInode(inode)){var cdRecord=inode.getData(),stats=cdRecord.getStats();switch(flags.pathExistsAction()){case ActionType.THROW_EXCEPTION:case ActionType.TRUNCATE_FILE:throw ApiError.EEXIST(path$$1);case ActionType.NOP:return new NoSyncFile(this,path$$1,flags,stats,cdRecord.getData());default:throw new ApiError(ErrorCode.EINVAL,"Invalid FileMode object.")}}else throw ApiError.EISDIR(path$$1);else throw ApiError.ENOENT(path$$1)},"openSync"),ZipFS2.prototype.readdirSync=__name(function(path$$1){var inode=this._index.getInode(path$$1);if(inode){if(isDirInode(inode))return inode.getListing();throw ApiError.ENOTDIR(path$$1)}else throw ApiError.ENOENT(path$$1)},"readdirSync"),ZipFS2.prototype.readFileSync=__name(function(fname,encoding,flag){var fd=this.openSync(fname,flag,420);try{var fdCast=fd,fdBuff=fdCast.getBuffer();return encoding===null?copyingSlice(fdBuff):fdBuff.toString(encoding)}finally{fd.closeSync()}},"readFileSync"),ZipFS2.prototype.populateIndex=__name(function(){var this$1$1=this,eocd=this._eocd=ZipFS2.getEOCD(this.data);if(eocd.diskNumber()!==eocd.cdDiskNumber())throw new ApiError(ErrorCode.EINVAL,"ZipFS does not support spanned zip files.");var cdPtr=eocd.cdOffset();if(cdPtr===4294967295)throw new ApiError(ErrorCode.EINVAL,"ZipFS does not support Zip64.");for(var cdEnd=cdPtr+eocd.cdSize();cdPtr<cdEnd;){var cd=new CentralDirectory(this$1$1.data,this$1$1.data.slice(cdPtr));cdPtr+=cd.totalSize(),ZipFS2.addToIndex(cd,this$1$1._index),this$1$1._directoryEntries.push(cd)}},"populateIndex"),ZipFS2})(SynchronousFileSystem);ZipFS.Name="ZipFS",ZipFS.Options={zipData:{type:"object",description:"The zip file as a Buffer object.",validator:bufferValidator},name:{type:"string",optional:!0,description:"The name of the zip file (optional)."}},ZipFS.CompressionMethod=CompressionMethod,ZipFS.RegisterDecompressionMethod(CompressionMethod.DEFLATE,function(data,compressedSize,uncompressedSize){return arrayish2Buffer(inflateRaw(data.slice(0,compressedSize),{chunkSize:uncompressedSize}))}),ZipFS.RegisterDecompressionMethod(CompressionMethod.STORED,function(data,compressedSize,uncompressedSize){return copyingSlice(data,0,uncompressedSize)});var rockRidgeIdentifier="IEEE_P1282";function getASCIIString(data,startIndex,length){return data.toString("ascii",startIndex,startIndex+length).trim()}__name(getASCIIString,"getASCIIString");function getJolietString(data,startIndex,length){if(length===1)return String.fromCharCode(data[startIndex]);for(var pairs=Math.floor(length/2),chars=new Array(pairs),i2=0;i2<pairs;i2++){var pos=startIndex+(i2<<1);chars[i2]=String.fromCharCode(data[pos+1]|data[pos]<<8)}return chars.join("")}__name(getJolietString,"getJolietString");function getDate(data,startIndex){var year=parseInt(getASCIIString(data,startIndex,4),10),mon=parseInt(getASCIIString(data,startIndex+4,2),10),day=parseInt(getASCIIString(data,startIndex+6,2),10),hour=parseInt(getASCIIString(data,startIndex+8,2),10),min=parseInt(getASCIIString(data,startIndex+10,2),10),sec=parseInt(getASCIIString(data,startIndex+12,2),10),hundrethsSec=parseInt(getASCIIString(data,startIndex+14,2),10);return new Date(year,mon,day,hour,min,sec,hundrethsSec*100)}__name(getDate,"getDate");function getShortFormDate(data,startIndex){var yearsSince1900=data[startIndex],month=data[startIndex+1],day=data[startIndex+2],hour=data[startIndex+3],minute=data[startIndex+4],second=data[startIndex+5];return new Date(yearsSince1900,month-1,day,hour,minute,second)}__name(getShortFormDate,"getShortFormDate");function constructSystemUseEntry(bigData,i2){var data=bigData.slice(i2),sue=new SystemUseEntry(data);switch(sue.signatureWord()){case 17221:return new CEEntry(data);case 20548:return new PDEntry(data);case 21328:return new SPEntry(data);case 21332:return new STEntry(data);case 17746:return new EREntry(data);case 17747:return new ESEntry(data);case 20568:return new PXEntry(data);case 20558:return new PNEntry(data);case 21324:return new SLEntry(data);case 20045:return new NMEntry(data);case 17228:return new CLEntry(data);case 20556:return new PLEntry(data);case 21061:return new REEntry(data);case 21574:return new TFEntry(data);case 21318:return new SFEntry(data);case 21074:return new RREntry(data);default:return sue}}__name(constructSystemUseEntry,"constructSystemUseEntry");function constructSystemUseEntries(data,i2,len,isoData){len=len-4;for(var entries=new Array;i2<len;){var entry=constructSystemUseEntry(data,i2),length=entry.length();if(length===0)return entries;if(i2+=length,entry instanceof STEntry)break;entry instanceof CEEntry?entries=entries.concat(entry.getEntries(isoData)):entries.push(entry)}return entries}__name(constructSystemUseEntries,"constructSystemUseEntries");var VolumeDescriptor=__name(function(data){this._data=data},"VolumeDescriptor2");VolumeDescriptor.prototype.type=__name(function(){return this._data[0]},"type"),VolumeDescriptor.prototype.standardIdentifier=__name(function(){return getASCIIString(this._data,1,5)},"standardIdentifier"),VolumeDescriptor.prototype.version=__name(function(){return this._data[6]},"version"),VolumeDescriptor.prototype.data=__name(function(){return this._data.slice(7,2048)},"data");var PrimaryOrSupplementaryVolumeDescriptor=(function(VolumeDescriptor2){function PrimaryOrSupplementaryVolumeDescriptor2(data){VolumeDescriptor2.call(this,data),this._root=null}return __name(PrimaryOrSupplementaryVolumeDescriptor2,"PrimaryOrSupplementaryVolumeDescriptor2"),VolumeDescriptor2&&(PrimaryOrSupplementaryVolumeDescriptor2.__proto__=VolumeDescriptor2),PrimaryOrSupplementaryVolumeDescriptor2.prototype=Object.create(VolumeDescriptor2&&VolumeDescriptor2.prototype),PrimaryOrSupplementaryVolumeDescriptor2.prototype.constructor=PrimaryOrSupplementaryVolumeDescriptor2,PrimaryOrSupplementaryVolumeDescriptor2.prototype.systemIdentifier=__name(function(){return this._getString32(8)},"systemIdentifier"),PrimaryOrSupplementaryVolumeDescriptor2.prototype.volumeIdentifier=__name(function(){return this._getString32(40)},"volumeIdentifier"),PrimaryOrSupplementaryVolumeDescriptor2.prototype.volumeSpaceSize=__name(function(){return this._data.readUInt32LE(80)},"volumeSpaceSize"),PrimaryOrSupplementaryVolumeDescriptor2.prototype.volumeSetSize=__name(function(){return this._data.readUInt16LE(120)},"volumeSetSize"),PrimaryOrSupplementaryVolumeDescriptor2.prototype.volumeSequenceNumber=__name(function(){return this._data.readUInt16LE(124)},"volumeSequenceNumber"),PrimaryOrSupplementaryVolumeDescriptor2.prototype.logicalBlockSize=__name(function(){return this._data.readUInt16LE(128)},"logicalBlockSize"),PrimaryOrSupplementaryVolumeDescriptor2.prototype.pathTableSize=__name(function(){return this._data.readUInt32LE(132)},"pathTableSize"),PrimaryOrSupplementaryVolumeDescriptor2.prototype.locationOfTypeLPathTable=__name(function(){return this._data.readUInt32LE(140)},"locationOfTypeLPathTable"),PrimaryOrSupplementaryVolumeDescriptor2.prototype.locationOfOptionalTypeLPathTable=__name(function(){return this._data.readUInt32LE(144)},"locationOfOptionalTypeLPathTable"),PrimaryOrSupplementaryVolumeDescriptor2.prototype.locationOfTypeMPathTable=__name(function(){return this._data.readUInt32BE(148)},"locationOfTypeMPathTable"),PrimaryOrSupplementaryVolumeDescriptor2.prototype.locationOfOptionalTypeMPathTable=__name(function(){return this._data.readUInt32BE(152)},"locationOfOptionalTypeMPathTable"),PrimaryOrSupplementaryVolumeDescriptor2.prototype.rootDirectoryEntry=__name(function(isoData){return this._root===null&&(this._root=this._constructRootDirectoryRecord(this._data.slice(156)),this._root.rootCheckForRockRidge(isoData)),this._root},"rootDirectoryEntry"),PrimaryOrSupplementaryVolumeDescriptor2.prototype.volumeSetIdentifier=__name(function(){return this._getString(190,128)},"volumeSetIdentifier"),PrimaryOrSupplementaryVolumeDescriptor2.prototype.publisherIdentifier=__name(function(){return this._getString(318,128)},"publisherIdentifier"),PrimaryOrSupplementaryVolumeDescriptor2.prototype.dataPreparerIdentifier=__name(function(){return this._getString(446,128)},"dataPreparerIdentifier"),PrimaryOrSupplementaryVolumeDescriptor2.prototype.applicationIdentifier=__name(function(){return this._getString(574,128)},"applicationIdentifier"),PrimaryOrSupplementaryVolumeDescriptor2.prototype.copyrightFileIdentifier=__name(function(){return this._getString(702,38)},"copyrightFileIdentifier"),PrimaryOrSupplementaryVolumeDescriptor2.prototype.abstractFileIdentifier=__name(function(){return this._getString(740,36)},"abstractFileIdentifier"),PrimaryOrSupplementaryVolumeDescriptor2.prototype.bibliographicFileIdentifier=__name(function(){return this._getString(776,37)},"bibliographicFileIdentifier"),PrimaryOrSupplementaryVolumeDescriptor2.prototype.volumeCreationDate=__name(function(){return getDate(this._data,813)},"volumeCreationDate"),PrimaryOrSupplementaryVolumeDescriptor2.prototype.volumeModificationDate=__name(function(){return getDate(this._data,830)},"volumeModificationDate"),PrimaryOrSupplementaryVolumeDescriptor2.prototype.volumeExpirationDate=__name(function(){return getDate(this._data,847)},"volumeExpirationDate"),PrimaryOrSupplementaryVolumeDescriptor2.prototype.volumeEffectiveDate=__name(function(){return getDate(this._data,864)},"volumeEffectiveDate"),PrimaryOrSupplementaryVolumeDescriptor2.prototype.fileStructureVersion=__name(function(){return this._data[881]},"fileStructureVersion"),PrimaryOrSupplementaryVolumeDescriptor2.prototype.applicationUsed=__name(function(){return this._data.slice(883,1395)},"applicationUsed"),PrimaryOrSupplementaryVolumeDescriptor2.prototype.reserved=__name(function(){return this._data.slice(1395,2048)},"reserved"),PrimaryOrSupplementaryVolumeDescriptor2.prototype._getString32=__name(function(idx){return this._getString(idx,32)},"_getString32"),PrimaryOrSupplementaryVolumeDescriptor2})(VolumeDescriptor),PrimaryVolumeDescriptor=(function(PrimaryOrSupplementaryVolumeDescriptor2){function PrimaryVolumeDescriptor2(data){if(PrimaryOrSupplementaryVolumeDescriptor2.call(this,data),this.type()!==1)throw new ApiError(ErrorCode.EIO,"Invalid primary volume descriptor.")}return __name(PrimaryVolumeDescriptor2,"PrimaryVolumeDescriptor2"),PrimaryOrSupplementaryVolumeDescriptor2&&(PrimaryVolumeDescriptor2.__proto__=PrimaryOrSupplementaryVolumeDescriptor2),PrimaryVolumeDescriptor2.prototype=Object.create(PrimaryOrSupplementaryVolumeDescriptor2&&PrimaryOrSupplementaryVolumeDescriptor2.prototype),PrimaryVolumeDescriptor2.prototype.constructor=PrimaryVolumeDescriptor2,PrimaryVolumeDescriptor2.prototype.name=__name(function(){return"ISO9660"},"name"),PrimaryVolumeDescriptor2.prototype._constructRootDirectoryRecord=__name(function(data){return new ISODirectoryRecord(data,-1)},"_constructRootDirectoryRecord"),PrimaryVolumeDescriptor2.prototype._getString=__name(function(idx,len){return this._getString(idx,len)},"_getString"),PrimaryVolumeDescriptor2})(PrimaryOrSupplementaryVolumeDescriptor),SupplementaryVolumeDescriptor=(function(PrimaryOrSupplementaryVolumeDescriptor2){function SupplementaryVolumeDescriptor2(data){if(PrimaryOrSupplementaryVolumeDescriptor2.call(this,data),this.type()!==2)throw new ApiError(ErrorCode.EIO,"Invalid supplementary volume descriptor.");var escapeSequence=this.escapeSequence(),third=escapeSequence[2];if(escapeSequence[0]!==37||escapeSequence[1]!==47||third!==64&&third!==67&&third!==69)throw new ApiError(ErrorCode.EIO,"Unrecognized escape sequence for SupplementaryVolumeDescriptor: "+escapeSequence.toString())}return __name(SupplementaryVolumeDescriptor2,"SupplementaryVolumeDescriptor2"),PrimaryOrSupplementaryVolumeDescriptor2&&(SupplementaryVolumeDescriptor2.__proto__=PrimaryOrSupplementaryVolumeDescriptor2),SupplementaryVolumeDescriptor2.prototype=Object.create(PrimaryOrSupplementaryVolumeDescriptor2&&PrimaryOrSupplementaryVolumeDescriptor2.prototype),SupplementaryVolumeDescriptor2.prototype.constructor=SupplementaryVolumeDescriptor2,SupplementaryVolumeDescriptor2.prototype.name=__name(function(){return"Joliet"},"name"),SupplementaryVolumeDescriptor2.prototype.escapeSequence=__name(function(){return this._data.slice(88,120)},"escapeSequence"),SupplementaryVolumeDescriptor2.prototype._constructRootDirectoryRecord=__name(function(data){return new JolietDirectoryRecord(data,-1)},"_constructRootDirectoryRecord"),SupplementaryVolumeDescriptor2.prototype._getString=__name(function(idx,len){return getJolietString(this._data,idx,len)},"_getString"),SupplementaryVolumeDescriptor2})(PrimaryOrSupplementaryVolumeDescriptor),DirectoryRecord=__name(function(data,rockRidgeOffset){this._suEntries=null,this._fileOrDir=null,this._data=data,this._rockRidgeOffset=rockRidgeOffset},"DirectoryRecord2");DirectoryRecord.prototype.hasRockRidge=__name(function(){return this._rockRidgeOffset>-1},"hasRockRidge"),DirectoryRecord.prototype.getRockRidgeOffset=__name(function(){return this._rockRidgeOffset},"getRockRidgeOffset"),DirectoryRecord.prototype.rootCheckForRockRidge=__name(function(isoData){var dir=this.getDirectory(isoData);this._rockRidgeOffset=dir.getDotEntry(isoData)._getRockRidgeOffset(isoData),this._rockRidgeOffset>-1&&(this._fileOrDir=null)},"rootCheckForRockRidge"),DirectoryRecord.prototype.length=__name(function(){return this._data[0]},"length"),DirectoryRecord.prototype.extendedAttributeRecordLength=__name(function(){return this._data[1]},"extendedAttributeRecordLength"),DirectoryRecord.prototype.lba=__name(function(){return this._data.readUInt32LE(2)*2048},"lba"),DirectoryRecord.prototype.dataLength=__name(function(){return this._data.readUInt32LE(10)},"dataLength"),DirectoryRecord.prototype.recordingDate=__name(function(){return getShortFormDate(this._data,18)},"recordingDate"),DirectoryRecord.prototype.fileFlags=__name(function(){return this._data[25]},"fileFlags"),DirectoryRecord.prototype.fileUnitSize=__name(function(){return this._data[26]},"fileUnitSize"),DirectoryRecord.prototype.interleaveGapSize=__name(function(){return this._data[27]},"interleaveGapSize"),DirectoryRecord.prototype.volumeSequenceNumber=__name(function(){return this._data.readUInt16LE(28)},"volumeSequenceNumber"),DirectoryRecord.prototype.identifier=__name(function(){return this._getString(33,this._data[32])},"identifier"),DirectoryRecord.prototype.fileName=__name(function(isoData){if(this.hasRockRidge()){var fn=this._rockRidgeFilename(isoData);if(fn!==null)return fn}var ident=this.identifier();if(this.isDirectory(isoData))return ident;var versionSeparator=ident.indexOf(";");return versionSeparator===-1?ident:ident[versionSeparator-1]==="."?ident.slice(0,versionSeparator-1):ident.slice(0,versionSeparator)},"fileName"),DirectoryRecord.prototype.isDirectory=__name(function(isoData){var rv=!!(this.fileFlags()&2);return!rv&&this.hasRockRidge()&&(rv=this.getSUEntries(isoData).filter(function(e){return e instanceof CLEntry}).length>0),rv},"isDirectory"),DirectoryRecord.prototype.isSymlink=__name(function(isoData){return this.hasRockRidge()&&this.getSUEntries(isoData).filter(function(e){return e instanceof SLEntry}).length>0},"isSymlink"),DirectoryRecord.prototype.getSymlinkPath=__name(function(isoData){for(var p="",entries=this.getSUEntries(isoData),getStr=this._getGetString(),i2=0,list2=entries;i2<list2.length;i2+=1){var entry=list2[i2];if(entry instanceof SLEntry){for(var components=entry.componentRecords(),i$12=0,list$1=components;i$12<list$1.length;i$12+=1){var component=list$1[i$12],flags=component.flags();flags&2?p+="./":flags&4?p+="../":flags&8?p+="/":(p+=component.content(getStr),flags&1||(p+="/"))}if(!entry.continueFlag())break}}return p.length>1&&p[p.length-1]==="/"?p.slice(0,p.length-1):p},"getSymlinkPath"),DirectoryRecord.prototype.getFile=__name(function(isoData){if(this.isDirectory(isoData))throw new Error("Tried to get a File from a directory.");return this._fileOrDir===null&&(this._fileOrDir=isoData.slice(this.lba(),this.lba()+this.dataLength())),this._fileOrDir},"getFile"),DirectoryRecord.prototype.getDirectory=__name(function(isoData){if(!this.isDirectory(isoData))throw new Error("Tried to get a Directory from a file.");return this._fileOrDir===null&&(this._fileOrDir=this._constructDirectory(isoData)),this._fileOrDir},"getDirectory"),DirectoryRecord.prototype.getSUEntries=__name(function(isoData){return this._suEntries||this._constructSUEntries(isoData),this._suEntries},"getSUEntries"),DirectoryRecord.prototype._rockRidgeFilename=__name(function(isoData){var nmEntries=this.getSUEntries(isoData).filter(function(e2){return e2 instanceof NMEntry});if(nmEntries.length===0||nmEntries[0].flags()&6)return null;for(var str="",getString=this._getGetString(),i2=0,list2=nmEntries;i2<list2.length;i2+=1){var e=list2[i2];if(str+=e.name(getString),!(e.flags()&1))break}return str},"_rockRidgeFilename"),DirectoryRecord.prototype._constructSUEntries=__name(function(isoData){var i2=33+this._data[32];i2%2===1&&i2++,i2+=this._rockRidgeOffset,this._suEntries=constructSystemUseEntries(this._data,i2,this.length(),isoData)},"_constructSUEntries"),DirectoryRecord.prototype._getRockRidgeOffset=__name(function(isoData){this._rockRidgeOffset=0;var suEntries=this.getSUEntries(isoData);if(suEntries.length>0){var spEntry=suEntries[0];if(spEntry instanceof SPEntry&&spEntry.checkBytesPass())for(var i2=1;i2<suEntries.length;i2++){var entry=suEntries[i2];if(entry instanceof RREntry||entry instanceof EREntry&&entry.extensionIdentifier()===rockRidgeIdentifier)return spEntry.bytesSkipped()}}return this._rockRidgeOffset=-1,-1},"_getRockRidgeOffset");var ISODirectoryRecord=(function(DirectoryRecord2){function ISODirectoryRecord2(data,rockRidgeOffset){DirectoryRecord2.call(this,data,rockRidgeOffset)}return __name(ISODirectoryRecord2,"ISODirectoryRecord2"),DirectoryRecord2&&(ISODirectoryRecord2.__proto__=DirectoryRecord2),ISODirectoryRecord2.prototype=Object.create(DirectoryRecord2&&DirectoryRecord2.prototype),ISODirectoryRecord2.prototype.constructor=ISODirectoryRecord2,ISODirectoryRecord2.prototype._getString=__name(function(i2,len){return getASCIIString(this._data,i2,len)},"_getString"),ISODirectoryRecord2.prototype._constructDirectory=__name(function(isoData){return new ISODirectory(this,isoData)},"_constructDirectory"),ISODirectoryRecord2.prototype._getGetString=__name(function(){return getASCIIString},"_getGetString"),ISODirectoryRecord2})(DirectoryRecord),JolietDirectoryRecord=(function(DirectoryRecord2){function JolietDirectoryRecord2(data,rockRidgeOffset){DirectoryRecord2.call(this,data,rockRidgeOffset)}return __name(JolietDirectoryRecord2,"JolietDirectoryRecord2"),DirectoryRecord2&&(JolietDirectoryRecord2.__proto__=DirectoryRecord2),JolietDirectoryRecord2.prototype=Object.create(DirectoryRecord2&&DirectoryRecord2.prototype),JolietDirectoryRecord2.prototype.constructor=JolietDirectoryRecord2,JolietDirectoryRecord2.prototype._getString=__name(function(i2,len){return getJolietString(this._data,i2,len)},"_getString"),JolietDirectoryRecord2.prototype._constructDirectory=__name(function(isoData){return new JolietDirectory(this,isoData)},"_constructDirectory"),JolietDirectoryRecord2.prototype._getGetString=__name(function(){return getJolietString},"_getGetString"),JolietDirectoryRecord2})(DirectoryRecord),SystemUseEntry=__name(function(data){this._data=data},"SystemUseEntry2");SystemUseEntry.prototype.signatureWord=__name(function(){return this._data.readUInt16BE(0)},"signatureWord"),SystemUseEntry.prototype.signatureWordString=__name(function(){return getASCIIString(this._data,0,2)},"signatureWordString"),SystemUseEntry.prototype.length=__name(function(){return this._data[2]},"length"),SystemUseEntry.prototype.suVersion=__name(function(){return this._data[3]},"suVersion");var CEEntry=(function(SystemUseEntry2){function CEEntry2(data){SystemUseEntry2.call(this,data),this._entries=null}return __name(CEEntry2,"CEEntry2"),SystemUseEntry2&&(CEEntry2.__proto__=SystemUseEntry2),CEEntry2.prototype=Object.create(SystemUseEntry2&&SystemUseEntry2.prototype),CEEntry2.prototype.constructor=CEEntry2,CEEntry2.prototype.continuationLba=__name(function(){return this._data.readUInt32LE(4)},"continuationLba"),CEEntry2.prototype.continuationLbaOffset=__name(function(){return this._data.readUInt32LE(12)},"continuationLbaOffset"),CEEntry2.prototype.continuationLength=__name(function(){return this._data.readUInt32LE(20)},"continuationLength"),CEEntry2.prototype.getEntries=__name(function(isoData){if(!this._entries){var start=this.continuationLba()*2048+this.continuationLbaOffset();this._entries=constructSystemUseEntries(isoData,start,this.continuationLength(),isoData)}return this._entries},"getEntries"),CEEntry2})(SystemUseEntry),PDEntry=(function(SystemUseEntry2){function PDEntry2(data){SystemUseEntry2.call(this,data)}return __name(PDEntry2,"PDEntry2"),SystemUseEntry2&&(PDEntry2.__proto__=SystemUseEntry2),PDEntry2.prototype=Object.create(SystemUseEntry2&&SystemUseEntry2.prototype),PDEntry2.prototype.constructor=PDEntry2,PDEntry2})(SystemUseEntry),SPEntry=(function(SystemUseEntry2){function SPEntry2(data){SystemUseEntry2.call(this,data)}return __name(SPEntry2,"SPEntry2"),SystemUseEntry2&&(SPEntry2.__proto__=SystemUseEntry2),SPEntry2.prototype=Object.create(SystemUseEntry2&&SystemUseEntry2.prototype),SPEntry2.prototype.constructor=SPEntry2,SPEntry2.prototype.checkBytesPass=__name(function(){return this._data[4]===190&&this._data[5]===239},"checkBytesPass"),SPEntry2.prototype.bytesSkipped=__name(function(){return this._data[6]},"bytesSkipped"),SPEntry2})(SystemUseEntry),STEntry=(function(SystemUseEntry2){function STEntry2(data){SystemUseEntry2.call(this,data)}return __name(STEntry2,"STEntry2"),SystemUseEntry2&&(STEntry2.__proto__=SystemUseEntry2),STEntry2.prototype=Object.create(SystemUseEntry2&&SystemUseEntry2.prototype),STEntry2.prototype.constructor=STEntry2,STEntry2})(SystemUseEntry),EREntry=(function(SystemUseEntry2){function EREntry2(data){SystemUseEntry2.call(this,data)}return __name(EREntry2,"EREntry2"),SystemUseEntry2&&(EREntry2.__proto__=SystemUseEntry2),EREntry2.prototype=Object.create(SystemUseEntry2&&SystemUseEntry2.prototype),EREntry2.prototype.constructor=EREntry2,EREntry2.prototype.identifierLength=__name(function(){return this._data[4]},"identifierLength"),EREntry2.prototype.descriptorLength=__name(function(){return this._data[5]},"descriptorLength"),EREntry2.prototype.sourceLength=__name(function(){return this._data[6]},"sourceLength"),EREntry2.prototype.extensionVersion=__name(function(){return this._data[7]},"extensionVersion"),EREntry2.prototype.extensionIdentifier=__name(function(){return getASCIIString(this._data,8,this.identifierLength())},"extensionIdentifier"),EREntry2.prototype.extensionDescriptor=__name(function(){return getASCIIString(this._data,8+this.identifierLength(),this.descriptorLength())},"extensionDescriptor"),EREntry2.prototype.extensionSource=__name(function(){return getASCIIString(this._data,8+this.identifierLength()+this.descriptorLength(),this.sourceLength())},"extensionSource"),EREntry2})(SystemUseEntry),ESEntry=(function(SystemUseEntry2){function ESEntry2(data){SystemUseEntry2.call(this,data)}return __name(ESEntry2,"ESEntry2"),SystemUseEntry2&&(ESEntry2.__proto__=SystemUseEntry2),ESEntry2.prototype=Object.create(SystemUseEntry2&&SystemUseEntry2.prototype),ESEntry2.prototype.constructor=ESEntry2,ESEntry2.prototype.extensionSequence=__name(function(){return this._data[4]},"extensionSequence"),ESEntry2})(SystemUseEntry),RREntry=(function(SystemUseEntry2){function RREntry2(data){SystemUseEntry2.call(this,data)}return __name(RREntry2,"RREntry2"),SystemUseEntry2&&(RREntry2.__proto__=SystemUseEntry2),RREntry2.prototype=Object.create(SystemUseEntry2&&SystemUseEntry2.prototype),RREntry2.prototype.constructor=RREntry2,RREntry2})(SystemUseEntry),PXEntry=(function(SystemUseEntry2){function PXEntry2(data){SystemUseEntry2.call(this,data)}return __name(PXEntry2,"PXEntry2"),SystemUseEntry2&&(PXEntry2.__proto__=SystemUseEntry2),PXEntry2.prototype=Object.create(SystemUseEntry2&&SystemUseEntry2.prototype),PXEntry2.prototype.constructor=PXEntry2,PXEntry2.prototype.mode=__name(function(){return this._data.readUInt32LE(4)},"mode"),PXEntry2.prototype.fileLinks=__name(function(){return this._data.readUInt32LE(12)},"fileLinks"),PXEntry2.prototype.uid=__name(function(){return this._data.readUInt32LE(20)},"uid"),PXEntry2.prototype.gid=__name(function(){return this._data.readUInt32LE(28)},"gid"),PXEntry2.prototype.inode=__name(function(){return this._data.readUInt32LE(36)},"inode"),PXEntry2})(SystemUseEntry),PNEntry=(function(SystemUseEntry2){function PNEntry2(data){SystemUseEntry2.call(this,data)}return __name(PNEntry2,"PNEntry2"),SystemUseEntry2&&(PNEntry2.__proto__=SystemUseEntry2),PNEntry2.prototype=Object.create(SystemUseEntry2&&SystemUseEntry2.prototype),PNEntry2.prototype.constructor=PNEntry2,PNEntry2.prototype.devTHigh=__name(function(){return this._data.readUInt32LE(4)},"devTHigh"),PNEntry2.prototype.devTLow=__name(function(){return this._data.readUInt32LE(12)},"devTLow"),PNEntry2})(SystemUseEntry),SLEntry=(function(SystemUseEntry2){function SLEntry2(data){SystemUseEntry2.call(this,data)}return __name(SLEntry2,"SLEntry2"),SystemUseEntry2&&(SLEntry2.__proto__=SystemUseEntry2),SLEntry2.prototype=Object.create(SystemUseEntry2&&SystemUseEntry2.prototype),SLEntry2.prototype.constructor=SLEntry2,SLEntry2.prototype.flags=__name(function(){return this._data[4]},"flags"),SLEntry2.prototype.continueFlag=__name(function(){return this.flags()&1},"continueFlag"),SLEntry2.prototype.componentRecords=__name(function(){for(var this$1$1=this,records=new Array,i2=5;i2<this.length();){var record=new SLComponentRecord(this$1$1._data.slice(i2));records.push(record),i2+=record.length()}return records},"componentRecords"),SLEntry2})(SystemUseEntry),SLComponentRecord=__name(function(data){this._data=data},"SLComponentRecord2");SLComponentRecord.prototype.flags=__name(function(){return this._data[0]},"flags"),SLComponentRecord.prototype.length=__name(function(){return 2+this.componentLength()},"length"),SLComponentRecord.prototype.componentLength=__name(function(){return this._data[1]},"componentLength"),SLComponentRecord.prototype.content=__name(function(getString){return getString(this._data,2,this.componentLength())},"content");var NMEntry=(function(SystemUseEntry2){function NMEntry2(data){SystemUseEntry2.call(this,data)}return __name(NMEntry2,"NMEntry2"),SystemUseEntry2&&(NMEntry2.__proto__=SystemUseEntry2),NMEntry2.prototype=Object.create(SystemUseEntry2&&SystemUseEntry2.prototype),NMEntry2.prototype.constructor=NMEntry2,NMEntry2.prototype.flags=__name(function(){return this._data[4]},"flags"),NMEntry2.prototype.name=__name(function(getString){return getString(this._data,5,this.length()-5)},"name"),NMEntry2})(SystemUseEntry),CLEntry=(function(SystemUseEntry2){function CLEntry2(data){SystemUseEntry2.call(this,data)}return __name(CLEntry2,"CLEntry2"),SystemUseEntry2&&(CLEntry2.__proto__=SystemUseEntry2),CLEntry2.prototype=Object.create(SystemUseEntry2&&SystemUseEntry2.prototype),CLEntry2.prototype.constructor=CLEntry2,CLEntry2.prototype.childDirectoryLba=__name(function(){return this._data.readUInt32LE(4)},"childDirectoryLba"),CLEntry2})(SystemUseEntry),PLEntry=(function(SystemUseEntry2){function PLEntry2(data){SystemUseEntry2.call(this,data)}return __name(PLEntry2,"PLEntry2"),SystemUseEntry2&&(PLEntry2.__proto__=SystemUseEntry2),PLEntry2.prototype=Object.create(SystemUseEntry2&&SystemUseEntry2.prototype),PLEntry2.prototype.constructor=PLEntry2,PLEntry2.prototype.parentDirectoryLba=__name(function(){return this._data.readUInt32LE(4)},"parentDirectoryLba"),PLEntry2})(SystemUseEntry),REEntry=(function(SystemUseEntry2){function REEntry2(data){SystemUseEntry2.call(this,data)}return __name(REEntry2,"REEntry2"),SystemUseEntry2&&(REEntry2.__proto__=SystemUseEntry2),REEntry2.prototype=Object.create(SystemUseEntry2&&SystemUseEntry2.prototype),REEntry2.prototype.constructor=REEntry2,REEntry2})(SystemUseEntry),TFEntry=(function(SystemUseEntry2){function TFEntry2(data){SystemUseEntry2.call(this,data)}return __name(TFEntry2,"TFEntry2"),SystemUseEntry2&&(TFEntry2.__proto__=SystemUseEntry2),TFEntry2.prototype=Object.create(SystemUseEntry2&&SystemUseEntry2.prototype),TFEntry2.prototype.constructor=TFEntry2,TFEntry2.prototype.flags=__name(function(){return this._data[4]},"flags"),TFEntry2.prototype.creation=__name(function(){return this.flags()&1?this._longFormDates()?getDate(this._data,5):getShortFormDate(this._data,5):null},"creation"),TFEntry2.prototype.modify=__name(function(){if(this.flags()&2){var previousDates=this.flags()&1?1:0;return this._longFormDates?getDate(this._data,5+previousDates*17):getShortFormDate(this._data,5+previousDates*7)}else return null},"modify"),TFEntry2.prototype.access=__name(function(){if(this.flags()&4){var previousDates=this.flags()&1?1:0;return previousDates+=this.flags()&2?1:0,this._longFormDates?getDate(this._data,5+previousDates*17):getShortFormDate(this._data,5+previousDates*7)}else return null},"access"),TFEntry2.prototype.backup=__name(function(){if(this.flags()&16){var previousDates=this.flags()&1?1:0;return previousDates+=this.flags()&2?1:0,previousDates+=this.flags()&4?1:0,this._longFormDates?getDate(this._data,5+previousDates*17):getShortFormDate(this._data,5+previousDates*7)}else return null},"backup"),TFEntry2.prototype.expiration=__name(function(){if(this.flags()&32){var previousDates=this.flags()&1?1:0;return previousDates+=this.flags()&2?1:0,previousDates+=this.flags()&4?1:0,previousDates+=this.flags()&16?1:0,this._longFormDates?getDate(this._data,5+previousDates*17):getShortFormDate(this._data,5+previousDates*7)}else return null},"expiration"),TFEntry2.prototype.effective=__name(function(){if(this.flags()&64){var previousDates=this.flags()&1?1:0;return previousDates+=this.flags()&2?1:0,previousDates+=this.flags()&4?1:0,previousDates+=this.flags()&16?1:0,previousDates+=this.flags()&32?1:0,this._longFormDates?getDate(this._data,5+previousDates*17):getShortFormDate(this._data,5+previousDates*7)}else return null},"effective"),TFEntry2.prototype._longFormDates=__name(function(){return!!this.flags()},"_longFormDates"),TFEntry2})(SystemUseEntry),SFEntry=(function(SystemUseEntry2){function SFEntry2(data){SystemUseEntry2.call(this,data)}return __name(SFEntry2,"SFEntry2"),SystemUseEntry2&&(SFEntry2.__proto__=SystemUseEntry2),SFEntry2.prototype=Object.create(SystemUseEntry2&&SystemUseEntry2.prototype),SFEntry2.prototype.constructor=SFEntry2,SFEntry2.prototype.virtualSizeHigh=__name(function(){return this._data.readUInt32LE(4)},"virtualSizeHigh"),SFEntry2.prototype.virtualSizeLow=__name(function(){return this._data.readUInt32LE(12)},"virtualSizeLow"),SFEntry2.prototype.tableDepth=__name(function(){return this._data[20]},"tableDepth"),SFEntry2})(SystemUseEntry),Directory=__name(function(record,isoData){var this$1$1=this;this._fileList=[],this._fileMap={},this._record=record;var i2=record.lba(),iLimit=i2+record.dataLength();if(!(record.fileFlags()&2)){var cl=record.getSUEntries(isoData).filter(function(e){return e instanceof CLEntry})[0];i2=cl.childDirectoryLba()*2048,iLimit=1/0}for(;i2<iLimit;){var len=isoData[i2];if(len===0){i2++;continue}var r=this$1$1._constructDirectoryRecord(isoData.slice(i2)),fname=r.fileName(isoData);fname!=="\0"&&fname!==""?(!r.hasRockRidge()||r.getSUEntries(isoData).filter(function(e){return e instanceof REEntry}).length===0)&&(this$1$1._fileMap[fname]=r,this$1$1._fileList.push(fname)):iLimit===1/0&&(iLimit=i2+r.dataLength()),i2+=r.length()}},"Directory2");Directory.prototype.getRecord=__name(function(name){return this._fileMap[name]},"getRecord"),Directory.prototype.getFileList=__name(function(){return this._fileList},"getFileList"),Directory.prototype.getDotEntry=__name(function(isoData){return this._constructDirectoryRecord(isoData.slice(this._record.lba()))},"getDotEntry");var ISODirectory=(function(Directory2){function ISODirectory2(record,isoData){Directory2.call(this,record,isoData)}return __name(ISODirectory2,"ISODirectory2"),Directory2&&(ISODirectory2.__proto__=Directory2),ISODirectory2.prototype=Object.create(Directory2&&Directory2.prototype),ISODirectory2.prototype.constructor=ISODirectory2,ISODirectory2.prototype._constructDirectoryRecord=__name(function(data){return new ISODirectoryRecord(data,this._record.getRockRidgeOffset())},"_constructDirectoryRecord"),ISODirectory2})(Directory),JolietDirectory=(function(Directory2){function JolietDirectory2(record,isoData){Directory2.call(this,record,isoData)}return __name(JolietDirectory2,"JolietDirectory2"),Directory2&&(JolietDirectory2.__proto__=Directory2),JolietDirectory2.prototype=Object.create(Directory2&&Directory2.prototype),JolietDirectory2.prototype.constructor=JolietDirectory2,JolietDirectory2.prototype._constructDirectoryRecord=__name(function(data){return new JolietDirectoryRecord(data,this._record.getRockRidgeOffset())},"_constructDirectoryRecord"),JolietDirectory2})(Directory),IsoFS=(function(SynchronousFileSystem$$1){function IsoFS2(data,name,deprecateMsg){var this$1$1=this;name===void 0&&(name=""),deprecateMsg===void 0&&(deprecateMsg=!0),SynchronousFileSystem$$1.call(this),this._data=data,deprecationMessage(deprecateMsg,IsoFS2.Name,{data:"ISO data as a Buffer",name});for(var vdTerminatorFound=!1,i2=16*2048,candidateVDs=new Array;!vdTerminatorFound;){var slice=data.slice(i2),vd=new VolumeDescriptor(slice);switch(vd.type()){case 1:candidateVDs.push(new PrimaryVolumeDescriptor(slice));break;case 2:candidateVDs.push(new SupplementaryVolumeDescriptor(slice));break;case 255:vdTerminatorFound=!0;break}i2+=2048}if(candidateVDs.length===0)throw new ApiError(ErrorCode.EIO,"Unable to find a suitable volume descriptor.");candidateVDs.forEach(function(v){(!this$1$1._pvd||this$1$1._pvd.type()!==2)&&(this$1$1._pvd=v)}),this._root=this._pvd.rootDirectoryEntry(data),this._name=name}return __name(IsoFS2,"IsoFS2"),SynchronousFileSystem$$1&&(IsoFS2.__proto__=SynchronousFileSystem$$1),IsoFS2.prototype=Object.create(SynchronousFileSystem$$1&&SynchronousFileSystem$$1.prototype),IsoFS2.prototype.constructor=IsoFS2,IsoFS2.Create=__name(function(opts,cb){var fs2,e;try{fs2=new IsoFS2(opts.data,opts.name,!1)}catch(e2){e2=e2}finally{cb(e,fs2)}},"Create"),IsoFS2.isAvailable=__name(function(){return!0},"isAvailable"),IsoFS2.prototype.getName=__name(function(){var name="IsoFS"+this._name+(this._pvd?"-"+this._pvd.name():"");return this._root&&this._root.hasRockRidge()&&(name+="-RockRidge"),name},"getName"),IsoFS2.prototype.diskSpace=__name(function(path$$1,cb){cb(this._data.length,0)},"diskSpace"),IsoFS2.prototype.isReadOnly=__name(function(){return!0},"isReadOnly"),IsoFS2.prototype.supportsLinks=__name(function(){return!1},"supportsLinks"),IsoFS2.prototype.supportsProps=__name(function(){return!1},"supportsProps"),IsoFS2.prototype.supportsSynch=__name(function(){return!0},"supportsSynch"),IsoFS2.prototype.statSync=__name(function(p,isLstat){var record=this._getDirectoryRecord(p);if(record===null)throw ApiError.ENOENT(p);return this._getStats(p,record)},"statSync"),IsoFS2.prototype.openSync=__name(function(p,flags,mode){if(flags.isWriteable())throw new ApiError(ErrorCode.EPERM,p);var record=this._getDirectoryRecord(p);if(record){if(record.isSymlink(this._data))return this.openSync(path.resolve(p,record.getSymlinkPath(this._data)),flags,mode);if(record.isDirectory(this._data))throw ApiError.EISDIR(p);var data=record.getFile(this._data),stats=this._getStats(p,record);switch(flags.pathExistsAction()){case ActionType.THROW_EXCEPTION:case ActionType.TRUNCATE_FILE:throw ApiError.EEXIST(p);case ActionType.NOP:return new NoSyncFile(this,p,flags,stats,data);default:throw new ApiError(ErrorCode.EINVAL,"Invalid FileMode object.")}}else throw ApiError.ENOENT(p)},"openSync"),IsoFS2.prototype.readdirSync=__name(function(path$$1){var record=this._getDirectoryRecord(path$$1);if(record){if(record.isDirectory(this._data))return record.getDirectory(this._data).getFileList().slice(0);throw ApiError.ENOTDIR(path$$1)}else throw ApiError.ENOENT(path$$1)},"readdirSync"),IsoFS2.prototype.readFileSync=__name(function(fname,encoding,flag){var fd=this.openSync(fname,flag,420);try{var fdCast=fd,fdBuff=fdCast.getBuffer();return encoding===null?copyingSlice(fdBuff):fdBuff.toString(encoding)}finally{fd.closeSync()}},"readFileSync"),IsoFS2.prototype._getDirectoryRecord=__name(function(path$$1){var this$1$1=this;if(path$$1==="/")return this._root;for(var components=path$$1.split("/").slice(1),dir=this._root,i2=0,list2=components;i2<list2.length;i2+=1){var component=list2[i2];if(dir.isDirectory(this$1$1._data)){if(dir=dir.getDirectory(this$1$1._data).getRecord(component),!dir)return null}else return null}return dir},"_getDirectoryRecord"),IsoFS2.prototype._getStats=__name(function(p,record){if(record.isSymlink(this._data)){var newP=path.resolve(p,record.getSymlinkPath(this._data)),dirRec=this._getDirectoryRecord(newP);return dirRec?this._getStats(newP,dirRec):null}else{var len=record.dataLength(),mode=365,date=record.recordingDate(),atime=date,mtime=date,ctime=date;if(record.hasRockRidge())for(var entries=record.getSUEntries(this._data),i2=0,list2=entries;i2<list2.length;i2+=1){var entry=list2[i2];if(entry instanceof PXEntry)mode=entry.mode();else if(entry instanceof TFEntry){var flags=entry.flags();flags&4&&(atime=entry.access()),flags&2&&(mtime=entry.modify()),flags&1&&(ctime=entry.creation())}}return mode=mode&365,new Stats(record.isDirectory(this._data)?FileType.DIRECTORY:FileType.FILE,len,mode,atime,mtime,ctime)}},"_getStats"),IsoFS2})(SynchronousFileSystem);IsoFS.Name="IsoFS",IsoFS.Options={data:{type:"object",description:"The ISO file in a buffer",validator:bufferValidator}},[AsyncMirror,DropboxFileSystem,EmscriptenFileSystem,FolderAdapter,HTML5FS,InMemoryFileSystem,IndexedDBFileSystem,IsoFS,LocalStorageFileSystem,MountableFileSystem,OverlayFS,WorkerFS,XmlHttpRequest,ZipFS].forEach(function(fsType){var create=fsType.Create;fsType.Create=function(opts,cb){var oneArg=typeof opts=="function",normalizedCb=oneArg?opts:cb,normalizedOpts=oneArg?{}:opts;function wrappedCb(e){e?normalizedCb(e):create.call(fsType,normalizedOpts,normalizedCb)}__name(wrappedCb,"wrappedCb"),checkOptions(fsType,normalizedOpts,wrappedCb)}});var Backends={AsyncMirror,Dropbox:DropboxFileSystem,Emscripten:EmscriptenFileSystem,FolderAdapter,HTML5FS,InMemory:InMemoryFileSystem,IndexedDB:IndexedDBFileSystem,IsoFS,LocalStorage:LocalStorageFileSystem,MountableFileSystem,OverlayFS,WorkerFS,XmlHttpRequest,ZipFS};process.initializeTTYs&&process.initializeTTYs();function install(obj){obj.Buffer=Buffer2,obj.process=process;var oldRequire=obj.require?obj.require:null;obj.require=function(arg){var rv=BFSRequire(arg);return rv||oldRequire.apply(null,Array.prototype.slice.call(arguments,0))}}__name(install,"install");function registerFileSystem(name,fs2){Backends[name]=fs2}__name(registerFileSystem,"registerFileSystem");function BFSRequire(module4){switch(module4){case"fs":return _fsMock;case"path":return path;case"buffer":return buffer;case"process":return process;case"bfs_utils":return BFSUtils;default:return Backends[module4]}}__name(BFSRequire,"BFSRequire");function initialize(rootfs){return _fsMock.initialize(rootfs)}__name(initialize,"initialize");function configure(config,cb){getFileSystem(config,function(e,fs2){fs2?(initialize(fs2),cb()):cb(e)})}__name(configure,"configure");function getFileSystem(config,cb){var fsName=config.fs;if(!fsName)return cb(new ApiError(ErrorCode.EPERM,'Missing "fs" property on configuration object.'));var options=config.options,waitCount=0,called=!1;function finish(){if(!called){called=!0;var fsc=Backends[fsName];fsc?fsc.Create(options,cb):cb(new ApiError(ErrorCode.EPERM,"File system "+fsName+" is not available in BrowserFS."))}}if(__name(finish,"finish"),options!==null&&typeof options=="object"){var finishedIterating=!1,props=Object.keys(options).filter(function(k){return k!=="fs"});props.forEach(function(p){var d=options[p];d!==null&&typeof d=="object"&&d.fs&&(waitCount++,getFileSystem(d,function(e,fs2){if(waitCount--,e){if(called)return;called=!0,cb(e)}else options[p]=fs2,waitCount===0&&finishedIterating&&finish()}))}),finishedIterating=!0}waitCount===0&&finish()}__name(getFileSystem,"getFileSystem"),"ab".substr(-1)!=="b"&&(String.prototype.substr=(function(substr){return function(start,length){return start<0&&(start=this.length+start),substr.call(this,start,length)}})(String.prototype.substr)),typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&(Uint8Array.prototype.slice||(Uint8Array.prototype.slice=function(start,end){start===void 0&&(start=0),end===void 0&&(end=this.length);var self2=this;return start<0&&(start=this.length+start,start<0&&(start=0)),end<0&&(end=this.length+end,end<0&&(end=0)),end<start&&(end=start),new Uint8Array(self2.buffer,self2.byteOffset+start,end-start)})),exports2.install=install,exports2.registerFileSystem=registerFileSystem,exports2.BFSRequire=BFSRequire,exports2.initialize=initialize,exports2.configure=configure,exports2.getFileSystem=getFileSystem,exports2.EmscriptenFS=BFSEmscriptenFS,exports2.FileSystem=Backends,exports2.Errors=api_error,exports2.setImmediate=setImmediate$3}).call(exports2,__webpack_require__(1),(function(){return this})(),__webpack_require__(5)(module2),__webpack_require__(6))},function(module2,exports2,__webpack_require__){module2.exports=__webpack_require__(2).Buffer},function(module2,exports2,__webpack_require__){(function(Buffer2){/*!
* The buffer module from node.js, for the browser.
*
* @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
* @license  MIT
*/"use strict";var base64=__webpack_require__(3),ieee754=__webpack_require__(4);exports2.Buffer=Buffer2,exports2.SlowBuffer=SlowBuffer,exports2.INSPECT_MAX_BYTES=50;var K_MAX_LENGTH=2147483647;exports2.kMaxLength=K_MAX_LENGTH,Buffer2.TYPED_ARRAY_SUPPORT=typedArraySupport(),!Buffer2.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function typedArraySupport(){try{var arr=new Uint8Array(1);return arr.__proto__={__proto__:Uint8Array.prototype,foo:__name(function(){return 42},"foo")},arr.foo()===42}catch{return!1}}__name(typedArraySupport,"typedArraySupport");function createBuffer(length){if(length>K_MAX_LENGTH)throw new RangeError("Invalid typed array length");var buf=new Uint8Array(length);return buf.__proto__=Buffer2.prototype,buf}__name(createBuffer,"createBuffer");function Buffer2(arg,encodingOrOffset,length){if(typeof arg=="number"){if(typeof encodingOrOffset=="string")throw new Error("If encoding is specified then the first argument must be a string");return allocUnsafe(arg)}return from(arg,encodingOrOffset,length)}__name(Buffer2,"Buffer"),typeof Symbol<"u"&&Symbol.species&&Buffer2[Symbol.species]===Buffer2&&Object.defineProperty(Buffer2,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),Buffer2.poolSize=8192;function from(value,encodingOrOffset,length){if(typeof value=="number")throw new TypeError('"value" argument must not be a number');return isArrayBuffer(value)?fromArrayBuffer(value,encodingOrOffset,length):typeof value=="string"?fromString(value,encodingOrOffset):fromObject(value)}__name(from,"from"),Buffer2.from=function(value,encodingOrOffset,length){return from(value,encodingOrOffset,length)},Buffer2.prototype.__proto__=Uint8Array.prototype,Buffer2.__proto__=Uint8Array;function assertSize(size){if(typeof size!="number")throw new TypeError('"size" argument must be a number');if(size<0)throw new RangeError('"size" argument must not be negative')}__name(assertSize,"assertSize");function alloc(size,fill,encoding){return assertSize(size),size<=0?createBuffer(size):fill!==void 0?typeof encoding=="string"?createBuffer(size).fill(fill,encoding):createBuffer(size).fill(fill):createBuffer(size)}__name(alloc,"alloc"),Buffer2.alloc=function(size,fill,encoding){return alloc(size,fill,encoding)};function allocUnsafe(size){return assertSize(size),createBuffer(size<0?0:checked(size)|0)}__name(allocUnsafe,"allocUnsafe"),Buffer2.allocUnsafe=function(size){return allocUnsafe(size)},Buffer2.allocUnsafeSlow=function(size){return allocUnsafe(size)};function fromString(string,encoding){if((typeof encoding!="string"||encoding==="")&&(encoding="utf8"),!Buffer2.isEncoding(encoding))throw new TypeError('"encoding" must be a valid string encoding');var length=byteLength(string,encoding)|0,buf=createBuffer(length),actual=buf.write(string,encoding);return actual!==length&&(buf=buf.slice(0,actual)),buf}__name(fromString,"fromString");function fromArrayLike(array){for(var length=array.length<0?0:checked(array.length)|0,buf=createBuffer(length),i=0;i<length;i+=1)buf[i]=array[i]&255;return buf}__name(fromArrayLike,"fromArrayLike");function fromArrayBuffer(array,byteOffset,length){if(byteOffset<0||array.byteLength<byteOffset)throw new RangeError("'offset' is out of bounds");if(array.byteLength<byteOffset+(length||0))throw new RangeError("'length' is out of bounds");var buf;return byteOffset===void 0&&length===void 0?buf=new Uint8Array(array):length===void 0?buf=new Uint8Array(array,byteOffset):buf=new Uint8Array(array,byteOffset,length),buf.__proto__=Buffer2.prototype,buf}__name(fromArrayBuffer,"fromArrayBuffer");function fromObject(obj){if(Buffer2.isBuffer(obj)){var len=checked(obj.length)|0,buf=createBuffer(len);return buf.length===0||obj.copy(buf,0,0,len),buf}if(obj){if(isArrayBufferView(obj)||"length"in obj)return typeof obj.length!="number"||numberIsNaN(obj.length)?createBuffer(0):fromArrayLike(obj);if(obj.type==="Buffer"&&Array.isArray(obj.data))return fromArrayLike(obj.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}__name(fromObject,"fromObject");function checked(length){if(length>=K_MAX_LENGTH)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+K_MAX_LENGTH.toString(16)+" bytes");return length|0}__name(checked,"checked");function SlowBuffer(length){return+length!=length&&(length=0),Buffer2.alloc(+length)}__name(SlowBuffer,"SlowBuffer"),Buffer2.isBuffer=__name(function(b){return b!=null&&b._isBuffer===!0},"isBuffer"),Buffer2.compare=__name(function(a,b){if(!Buffer2.isBuffer(a)||!Buffer2.isBuffer(b))throw new TypeError("Arguments must be Buffers");if(a===b)return 0;for(var x=a.length,y=b.length,i=0,len=Math.min(x,y);i<len;++i)if(a[i]!==b[i]){x=a[i],y=b[i];break}return x<y?-1:y<x?1:0},"compare"),Buffer2.isEncoding=__name(function(encoding){switch(String(encoding).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},"isEncoding"),Buffer2.concat=__name(function(list,length){if(!Array.isArray(list))throw new TypeError('"list" argument must be an Array of Buffers');if(list.length===0)return Buffer2.alloc(0);var i;if(length===void 0)for(length=0,i=0;i<list.length;++i)length+=list[i].length;var buffer=Buffer2.allocUnsafe(length),pos=0;for(i=0;i<list.length;++i){var buf=list[i];if(!Buffer2.isBuffer(buf))throw new TypeError('"list" argument must be an Array of Buffers');buf.copy(buffer,pos),pos+=buf.length}return buffer},"concat");function byteLength(string,encoding){if(Buffer2.isBuffer(string))return string.length;if(isArrayBufferView(string)||isArrayBuffer(string))return string.byteLength;typeof string!="string"&&(string=""+string);var len=string.length;if(len===0)return 0;for(var loweredCase=!1;;)switch(encoding){case"ascii":case"latin1":case"binary":return len;case"utf8":case"utf-8":case void 0:return utf8ToBytes(string).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return len*2;case"hex":return len>>>1;case"base64":return base64ToBytes(string).length;default:if(loweredCase)return utf8ToBytes(string).length;encoding=(""+encoding).toLowerCase(),loweredCase=!0}}__name(byteLength,"byteLength"),Buffer2.byteLength=byteLength;function slowToString(encoding,start,end){var loweredCase=!1;if((start===void 0||start<0)&&(start=0),start>this.length||((end===void 0||end>this.length)&&(end=this.length),end<=0)||(end>>>=0,start>>>=0,end<=start))return"";for(encoding||(encoding="utf8");;)switch(encoding){case"hex":return hexSlice(this,start,end);case"utf8":case"utf-8":return utf8Slice(this,start,end);case"ascii":return asciiSlice(this,start,end);case"latin1":case"binary":return latin1Slice(this,start,end);case"base64":return base64Slice(this,start,end);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return utf16leSlice(this,start,end);default:if(loweredCase)throw new TypeError("Unknown encoding: "+encoding);encoding=(encoding+"").toLowerCase(),loweredCase=!0}}__name(slowToString,"slowToString"),Buffer2.prototype._isBuffer=!0;function swap(b,n,m){var i=b[n];b[n]=b[m],b[m]=i}__name(swap,"swap"),Buffer2.prototype.swap16=__name(function(){var len=this.length;if(len%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var i=0;i<len;i+=2)swap(this,i,i+1);return this},"swap16"),Buffer2.prototype.swap32=__name(function(){var len=this.length;if(len%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var i=0;i<len;i+=4)swap(this,i,i+3),swap(this,i+1,i+2);return this},"swap32"),Buffer2.prototype.swap64=__name(function(){var len=this.length;if(len%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var i=0;i<len;i+=8)swap(this,i,i+7),swap(this,i+1,i+6),swap(this,i+2,i+5),swap(this,i+3,i+4);return this},"swap64"),Buffer2.prototype.toString=__name(function(){var length=this.length;return length===0?"":arguments.length===0?utf8Slice(this,0,length):slowToString.apply(this,arguments)},"toString"),Buffer2.prototype.equals=__name(function(b){if(!Buffer2.isBuffer(b))throw new TypeError("Argument must be a Buffer");return this===b?!0:Buffer2.compare(this,b)===0},"equals"),Buffer2.prototype.inspect=__name(function(){var str="",max=exports2.INSPECT_MAX_BYTES;return this.length>0&&(str=this.toString("hex",0,max).match(/.{2}/g).join(" "),this.length>max&&(str+=" ... ")),"<Buffer "+str+">"},"inspect"),Buffer2.prototype.compare=__name(function(target,start,end,thisStart,thisEnd){if(!Buffer2.isBuffer(target))throw new TypeError("Argument must be a Buffer");if(start===void 0&&(start=0),end===void 0&&(end=target?target.length:0),thisStart===void 0&&(thisStart=0),thisEnd===void 0&&(thisEnd=this.length),start<0||end>target.length||thisStart<0||thisEnd>this.length)throw new RangeError("out of range index");if(thisStart>=thisEnd&&start>=end)return 0;if(thisStart>=thisEnd)return-1;if(start>=end)return 1;if(start>>>=0,end>>>=0,thisStart>>>=0,thisEnd>>>=0,this===target)return 0;for(var x=thisEnd-thisStart,y=end-start,len=Math.min(x,y),thisCopy=this.slice(thisStart,thisEnd),targetCopy=target.slice(start,end),i=0;i<len;++i)if(thisCopy[i]!==targetCopy[i]){x=thisCopy[i],y=targetCopy[i];break}return x<y?-1:y<x?1:0},"compare");function bidirectionalIndexOf(buffer,val,byteOffset,encoding,dir){if(buffer.length===0)return-1;if(typeof byteOffset=="string"?(encoding=byteOffset,byteOffset=0):byteOffset>2147483647?byteOffset=2147483647:byteOffset<-2147483648&&(byteOffset=-2147483648),byteOffset=+byteOffset,numberIsNaN(byteOffset)&&(byteOffset=dir?0:buffer.length-1),byteOffset<0&&(byteOffset=buffer.length+byteOffset),byteOffset>=buffer.length){if(dir)return-1;byteOffset=buffer.length-1}else if(byteOffset<0)if(dir)byteOffset=0;else return-1;if(typeof val=="string"&&(val=Buffer2.from(val,encoding)),Buffer2.isBuffer(val))return val.length===0?-1:arrayIndexOf(buffer,val,byteOffset,encoding,dir);if(typeof val=="number")return val=val&255,typeof Uint8Array.prototype.indexOf=="function"?dir?Uint8Array.prototype.indexOf.call(buffer,val,byteOffset):Uint8Array.prototype.lastIndexOf.call(buffer,val,byteOffset):arrayIndexOf(buffer,[val],byteOffset,encoding,dir);throw new TypeError("val must be string, number or Buffer")}__name(bidirectionalIndexOf,"bidirectionalIndexOf");function arrayIndexOf(arr,val,byteOffset,encoding,dir){var indexSize=1,arrLength=arr.length,valLength=val.length;if(encoding!==void 0&&(encoding=String(encoding).toLowerCase(),encoding==="ucs2"||encoding==="ucs-2"||encoding==="utf16le"||encoding==="utf-16le")){if(arr.length<2||val.length<2)return-1;indexSize=2,arrLength/=2,valLength/=2,byteOffset/=2}function read(buf,i2){return indexSize===1?buf[i2]:buf.readUInt16BE(i2*indexSize)}__name(read,"read");var i;if(dir){var foundIndex=-1;for(i=byteOffset;i<arrLength;i++)if(read(arr,i)===read(val,foundIndex===-1?0:i-foundIndex)){if(foundIndex===-1&&(foundIndex=i),i-foundIndex+1===valLength)return foundIndex*indexSize}else foundIndex!==-1&&(i-=i-foundIndex),foundIndex=-1}else for(byteOffset+valLength>arrLength&&(byteOffset=arrLength-valLength),i=byteOffset;i>=0;i--){for(var found=!0,j=0;j<valLength;j++)if(read(arr,i+j)!==read(val,j)){found=!1;break}if(found)return i}return-1}__name(arrayIndexOf,"arrayIndexOf"),Buffer2.prototype.includes=__name(function(val,byteOffset,encoding){return this.indexOf(val,byteOffset,encoding)!==-1},"includes"),Buffer2.prototype.indexOf=__name(function(val,byteOffset,encoding){return bidirectionalIndexOf(this,val,byteOffset,encoding,!0)},"indexOf"),Buffer2.prototype.lastIndexOf=__name(function(val,byteOffset,encoding){return bidirectionalIndexOf(this,val,byteOffset,encoding,!1)},"lastIndexOf");function hexWrite(buf,string,offset,length){offset=Number(offset)||0;var remaining=buf.length-offset;length?(length=Number(length),length>remaining&&(length=remaining)):length=remaining;var strLen=string.length;if(strLen%2!==0)throw new TypeError("Invalid hex string");length>strLen/2&&(length=strLen/2);for(var i=0;i<length;++i){var parsed=parseInt(string.substr(i*2,2),16);if(numberIsNaN(parsed))return i;buf[offset+i]=parsed}return i}__name(hexWrite,"hexWrite");function utf8Write(buf,string,offset,length){return blitBuffer(utf8ToBytes(string,buf.length-offset),buf,offset,length)}__name(utf8Write,"utf8Write");function asciiWrite(buf,string,offset,length){return blitBuffer(asciiToBytes(string),buf,offset,length)}__name(asciiWrite,"asciiWrite");function latin1Write(buf,string,offset,length){return asciiWrite(buf,string,offset,length)}__name(latin1Write,"latin1Write");function base64Write(buf,string,offset,length){return blitBuffer(base64ToBytes(string),buf,offset,length)}__name(base64Write,"base64Write");function ucs2Write(buf,string,offset,length){return blitBuffer(utf16leToBytes(string,buf.length-offset),buf,offset,length)}__name(ucs2Write,"ucs2Write"),Buffer2.prototype.write=__name(function(string,offset,length,encoding){if(offset===void 0)encoding="utf8",length=this.length,offset=0;else if(length===void 0&&typeof offset=="string")encoding=offset,length=this.length,offset=0;else if(isFinite(offset))offset=offset>>>0,isFinite(length)?(length=length>>>0,encoding===void 0&&(encoding="utf8")):(encoding=length,length=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var remaining=this.length-offset;if((length===void 0||length>remaining)&&(length=remaining),string.length>0&&(length<0||offset<0)||offset>this.length)throw new RangeError("Attempt to write outside buffer bounds");encoding||(encoding="utf8");for(var loweredCase=!1;;)switch(encoding){case"hex":return hexWrite(this,string,offset,length);case"utf8":case"utf-8":return utf8Write(this,string,offset,length);case"ascii":return asciiWrite(this,string,offset,length);case"latin1":case"binary":return latin1Write(this,string,offset,length);case"base64":return base64Write(this,string,offset,length);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ucs2Write(this,string,offset,length);default:if(loweredCase)throw new TypeError("Unknown encoding: "+encoding);encoding=(""+encoding).toLowerCase(),loweredCase=!0}},"write"),Buffer2.prototype.toJSON=__name(function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},"toJSON");function base64Slice(buf,start,end){return start===0&&end===buf.length?base64.fromByteArray(buf):base64.fromByteArray(buf.slice(start,end))}__name(base64Slice,"base64Slice");function utf8Slice(buf,start,end){end=Math.min(buf.length,end);for(var res=[],i=start;i<end;){var firstByte=buf[i],codePoint=null,bytesPerSequence=firstByte>239?4:firstByte>223?3:firstByte>191?2:1;if(i+bytesPerSequence<=end){var secondByte,thirdByte,fourthByte,tempCodePoint;switch(bytesPerSequence){case 1:firstByte<128&&(codePoint=firstByte);break;case 2:secondByte=buf[i+1],(secondByte&192)===128&&(tempCodePoint=(firstByte&31)<<6|secondByte&63,tempCodePoint>127&&(codePoint=tempCodePoint));break;case 3:secondByte=buf[i+1],thirdByte=buf[i+2],(secondByte&192)===128&&(thirdByte&192)===128&&(tempCodePoint=(firstByte&15)<<12|(secondByte&63)<<6|thirdByte&63,tempCodePoint>2047&&(tempCodePoint<55296||tempCodePoint>57343)&&(codePoint=tempCodePoint));break;case 4:secondByte=buf[i+1],thirdByte=buf[i+2],fourthByte=buf[i+3],(secondByte&192)===128&&(thirdByte&192)===128&&(fourthByte&192)===128&&(tempCodePoint=(firstByte&15)<<18|(secondByte&63)<<12|(thirdByte&63)<<6|fourthByte&63,tempCodePoint>65535&&tempCodePoint<1114112&&(codePoint=tempCodePoint))}}codePoint===null?(codePoint=65533,bytesPerSequence=1):codePoint>65535&&(codePoint-=65536,res.push(codePoint>>>10&1023|55296),codePoint=56320|codePoint&1023),res.push(codePoint),i+=bytesPerSequence}return decodeCodePointsArray(res)}__name(utf8Slice,"utf8Slice");var MAX_ARGUMENTS_LENGTH=4096;function decodeCodePointsArray(codePoints){var len=codePoints.length;if(len<=MAX_ARGUMENTS_LENGTH)return String.fromCharCode.apply(String,codePoints);for(var res="",i=0;i<len;)res+=String.fromCharCode.apply(String,codePoints.slice(i,i+=MAX_ARGUMENTS_LENGTH));return res}__name(decodeCodePointsArray,"decodeCodePointsArray");function asciiSlice(buf,start,end){var ret="";end=Math.min(buf.length,end);for(var i=start;i<end;++i)ret+=String.fromCharCode(buf[i]&127);return ret}__name(asciiSlice,"asciiSlice");function latin1Slice(buf,start,end){var ret="";end=Math.min(buf.length,end);for(var i=start;i<end;++i)ret+=String.fromCharCode(buf[i]);return ret}__name(latin1Slice,"latin1Slice");function hexSlice(buf,start,end){var len=buf.length;(!start||start<0)&&(start=0),(!end||end<0||end>len)&&(end=len);for(var out="",i=start;i<end;++i)out+=toHex(buf[i]);return out}__name(hexSlice,"hexSlice");function utf16leSlice(buf,start,end){for(var bytes=buf.slice(start,end),res="",i=0;i<bytes.length;i+=2)res+=String.fromCharCode(bytes[i]+bytes[i+1]*256);return res}__name(utf16leSlice,"utf16leSlice"),Buffer2.prototype.slice=__name(function(start,end){var len=this.length;start=~~start,end=end===void 0?len:~~end,start<0?(start+=len,start<0&&(start=0)):start>len&&(start=len),end<0?(end+=len,end<0&&(end=0)):end>len&&(end=len),end<start&&(end=start);var newBuf=this.subarray(start,end);return newBuf.__proto__=Buffer2.prototype,newBuf},"slice");function checkOffset(offset,ext,length){if(offset%1!==0||offset<0)throw new RangeError("offset is not uint");if(offset+ext>length)throw new RangeError("Trying to access beyond buffer length")}__name(checkOffset,"checkOffset"),Buffer2.prototype.readUIntLE=__name(function(offset,byteLength2,noAssert){offset=offset>>>0,byteLength2=byteLength2>>>0,noAssert||checkOffset(offset,byteLength2,this.length);for(var val=this[offset],mul=1,i=0;++i<byteLength2&&(mul*=256);)val+=this[offset+i]*mul;return val},"readUIntLE"),Buffer2.prototype.readUIntBE=__name(function(offset,byteLength2,noAssert){offset=offset>>>0,byteLength2=byteLength2>>>0,noAssert||checkOffset(offset,byteLength2,this.length);for(var val=this[offset+--byteLength2],mul=1;byteLength2>0&&(mul*=256);)val+=this[offset+--byteLength2]*mul;return val},"readUIntBE"),Buffer2.prototype.readUInt8=__name(function(offset,noAssert){return offset=offset>>>0,noAssert||checkOffset(offset,1,this.length),this[offset]},"readUInt8"),Buffer2.prototype.readUInt16LE=__name(function(offset,noAssert){return offset=offset>>>0,noAssert||checkOffset(offset,2,this.length),this[offset]|this[offset+1]<<8},"readUInt16LE"),Buffer2.prototype.readUInt16BE=__name(function(offset,noAssert){return offset=offset>>>0,noAssert||checkOffset(offset,2,this.length),this[offset]<<8|this[offset+1]},"readUInt16BE"),Buffer2.prototype.readUInt32LE=__name(function(offset,noAssert){return offset=offset>>>0,noAssert||checkOffset(offset,4,this.length),(this[offset]|this[offset+1]<<8|this[offset+2]<<16)+this[offset+3]*16777216},"readUInt32LE"),Buffer2.prototype.readUInt32BE=__name(function(offset,noAssert){return offset=offset>>>0,noAssert||checkOffset(offset,4,this.length),this[offset]*16777216+(this[offset+1]<<16|this[offset+2]<<8|this[offset+3])},"readUInt32BE"),Buffer2.prototype.readIntLE=__name(function(offset,byteLength2,noAssert){offset=offset>>>0,byteLength2=byteLength2>>>0,noAssert||checkOffset(offset,byteLength2,this.length);for(var val=this[offset],mul=1,i=0;++i<byteLength2&&(mul*=256);)val+=this[offset+i]*mul;return mul*=128,val>=mul&&(val-=Math.pow(2,8*byteLength2)),val},"readIntLE"),Buffer2.prototype.readIntBE=__name(function(offset,byteLength2,noAssert){offset=offset>>>0,byteLength2=byteLength2>>>0,noAssert||checkOffset(offset,byteLength2,this.length);for(var i=byteLength2,mul=1,val=this[offset+--i];i>0&&(mul*=256);)val+=this[offset+--i]*mul;return mul*=128,val>=mul&&(val-=Math.pow(2,8*byteLength2)),val},"readIntBE"),Buffer2.prototype.readInt8=__name(function(offset,noAssert){return offset=offset>>>0,noAssert||checkOffset(offset,1,this.length),this[offset]&128?(255-this[offset]+1)*-1:this[offset]},"readInt8"),Buffer2.prototype.readInt16LE=__name(function(offset,noAssert){offset=offset>>>0,noAssert||checkOffset(offset,2,this.length);var val=this[offset]|this[offset+1]<<8;return val&32768?val|4294901760:val},"readInt16LE"),Buffer2.prototype.readInt16BE=__name(function(offset,noAssert){offset=offset>>>0,noAssert||checkOffset(offset,2,this.length);var val=this[offset+1]|this[offset]<<8;return val&32768?val|4294901760:val},"readInt16BE"),Buffer2.prototype.readInt32LE=__name(function(offset,noAssert){return offset=offset>>>0,noAssert||checkOffset(offset,4,this.length),this[offset]|this[offset+1]<<8|this[offset+2]<<16|this[offset+3]<<24},"readInt32LE"),Buffer2.prototype.readInt32BE=__name(function(offset,noAssert){return offset=offset>>>0,noAssert||checkOffset(offset,4,this.length),this[offset]<<24|this[offset+1]<<16|this[offset+2]<<8|this[offset+3]},"readInt32BE"),Buffer2.prototype.readFloatLE=__name(function(offset,noAssert){return offset=offset>>>0,noAssert||checkOffset(offset,4,this.length),ieee754.read(this,offset,!0,23,4)},"readFloatLE"),Buffer2.prototype.readFloatBE=__name(function(offset,noAssert){return offset=offset>>>0,noAssert||checkOffset(offset,4,this.length),ieee754.read(this,offset,!1,23,4)},"readFloatBE"),Buffer2.prototype.readDoubleLE=__name(function(offset,noAssert){return offset=offset>>>0,noAssert||checkOffset(offset,8,this.length),ieee754.read(this,offset,!0,52,8)},"readDoubleLE"),Buffer2.prototype.readDoubleBE=__name(function(offset,noAssert){return offset=offset>>>0,noAssert||checkOffset(offset,8,this.length),ieee754.read(this,offset,!1,52,8)},"readDoubleBE");function checkInt(buf,value,offset,ext,max,min){if(!Buffer2.isBuffer(buf))throw new TypeError('"buffer" argument must be a Buffer instance');if(value>max||value<min)throw new RangeError('"value" argument is out of bounds');if(offset+ext>buf.length)throw new RangeError("Index out of range")}__name(checkInt,"checkInt"),Buffer2.prototype.writeUIntLE=__name(function(value,offset,byteLength2,noAssert){if(value=+value,offset=offset>>>0,byteLength2=byteLength2>>>0,!noAssert){var maxBytes=Math.pow(2,8*byteLength2)-1;checkInt(this,value,offset,byteLength2,maxBytes,0)}var mul=1,i=0;for(this[offset]=value&255;++i<byteLength2&&(mul*=256);)this[offset+i]=value/mul&255;return offset+byteLength2},"writeUIntLE"),Buffer2.prototype.writeUIntBE=__name(function(value,offset,byteLength2,noAssert){if(value=+value,offset=offset>>>0,byteLength2=byteLength2>>>0,!noAssert){var maxBytes=Math.pow(2,8*byteLength2)-1;checkInt(this,value,offset,byteLength2,maxBytes,0)}var i=byteLength2-1,mul=1;for(this[offset+i]=value&255;--i>=0&&(mul*=256);)this[offset+i]=value/mul&255;return offset+byteLength2},"writeUIntBE"),Buffer2.prototype.writeUInt8=__name(function(value,offset,noAssert){return value=+value,offset=offset>>>0,noAssert||checkInt(this,value,offset,1,255,0),this[offset]=value&255,offset+1},"writeUInt8"),Buffer2.prototype.writeUInt16LE=__name(function(value,offset,noAssert){return value=+value,offset=offset>>>0,noAssert||checkInt(this,value,offset,2,65535,0),this[offset]=value&255,this[offset+1]=value>>>8,offset+2},"writeUInt16LE"),Buffer2.prototype.writeUInt16BE=__name(function(value,offset,noAssert){return value=+value,offset=offset>>>0,noAssert||checkInt(this,value,offset,2,65535,0),this[offset]=value>>>8,this[offset+1]=value&255,offset+2},"writeUInt16BE"),Buffer2.prototype.writeUInt32LE=__name(function(value,offset,noAssert){return value=+value,offset=offset>>>0,noAssert||checkInt(this,value,offset,4,4294967295,0),this[offset+3]=value>>>24,this[offset+2]=value>>>16,this[offset+1]=value>>>8,this[offset]=value&255,offset+4},"writeUInt32LE"),Buffer2.prototype.writeUInt32BE=__name(function(value,offset,noAssert){return value=+value,offset=offset>>>0,noAssert||checkInt(this,value,offset,4,4294967295,0),this[offset]=value>>>24,this[offset+1]=value>>>16,this[offset+2]=value>>>8,this[offset+3]=value&255,offset+4},"writeUInt32BE"),Buffer2.prototype.writeIntLE=__name(function(value,offset,byteLength2,noAssert){if(value=+value,offset=offset>>>0,!noAssert){var limit=Math.pow(2,8*byteLength2-1);checkInt(this,value,offset,byteLength2,limit-1,-limit)}var i=0,mul=1,sub=0;for(this[offset]=value&255;++i<byteLength2&&(mul*=256);)value<0&&sub===0&&this[offset+i-1]!==0&&(sub=1),this[offset+i]=(value/mul>>0)-sub&255;return offset+byteLength2},"writeIntLE"),Buffer2.prototype.writeIntBE=__name(function(value,offset,byteLength2,noAssert){if(value=+value,offset=offset>>>0,!noAssert){var limit=Math.pow(2,8*byteLength2-1);checkInt(this,value,offset,byteLength2,limit-1,-limit)}var i=byteLength2-1,mul=1,sub=0;for(this[offset+i]=value&255;--i>=0&&(mul*=256);)value<0&&sub===0&&this[offset+i+1]!==0&&(sub=1),this[offset+i]=(value/mul>>0)-sub&255;return offset+byteLength2},"writeIntBE"),Buffer2.prototype.writeInt8=__name(function(value,offset,noAssert){return value=+value,offset=offset>>>0,noAssert||checkInt(this,value,offset,1,127,-128),value<0&&(value=255+value+1),this[offset]=value&255,offset+1},"writeInt8"),Buffer2.prototype.writeInt16LE=__name(function(value,offset,noAssert){return value=+value,offset=offset>>>0,noAssert||checkInt(this,value,offset,2,32767,-32768),this[offset]=value&255,this[offset+1]=value>>>8,offset+2},"writeInt16LE"),Buffer2.prototype.writeInt16BE=__name(function(value,offset,noAssert){return value=+value,offset=offset>>>0,noAssert||checkInt(this,value,offset,2,32767,-32768),this[offset]=value>>>8,this[offset+1]=value&255,offset+2},"writeInt16BE"),Buffer2.prototype.writeInt32LE=__name(function(value,offset,noAssert){return value=+value,offset=offset>>>0,noAssert||checkInt(this,value,offset,4,2147483647,-2147483648),this[offset]=value&255,this[offset+1]=value>>>8,this[offset+2]=value>>>16,this[offset+3]=value>>>24,offset+4},"writeInt32LE"),Buffer2.prototype.writeInt32BE=__name(function(value,offset,noAssert){return value=+value,offset=offset>>>0,noAssert||checkInt(this,value,offset,4,2147483647,-2147483648),value<0&&(value=4294967295+value+1),this[offset]=value>>>24,this[offset+1]=value>>>16,this[offset+2]=value>>>8,this[offset+3]=value&255,offset+4},"writeInt32BE");function checkIEEE754(buf,value,offset,ext,max,min){if(offset+ext>buf.length)throw new RangeError("Index out of range");if(offset<0)throw new RangeError("Index out of range")}__name(checkIEEE754,"checkIEEE754");function writeFloat(buf,value,offset,littleEndian,noAssert){return value=+value,offset=offset>>>0,noAssert||checkIEEE754(buf,value,offset,4,34028234663852886e22,-34028234663852886e22),ieee754.write(buf,value,offset,littleEndian,23,4),offset+4}__name(writeFloat,"writeFloat"),Buffer2.prototype.writeFloatLE=__name(function(value,offset,noAssert){return writeFloat(this,value,offset,!0,noAssert)},"writeFloatLE"),Buffer2.prototype.writeFloatBE=__name(function(value,offset,noAssert){return writeFloat(this,value,offset,!1,noAssert)},"writeFloatBE");function writeDouble(buf,value,offset,littleEndian,noAssert){return value=+value,offset=offset>>>0,noAssert||checkIEEE754(buf,value,offset,8,17976931348623157e292,-17976931348623157e292),ieee754.write(buf,value,offset,littleEndian,52,8),offset+8}__name(writeDouble,"writeDouble"),Buffer2.prototype.writeDoubleLE=__name(function(value,offset,noAssert){return writeDouble(this,value,offset,!0,noAssert)},"writeDoubleLE"),Buffer2.prototype.writeDoubleBE=__name(function(value,offset,noAssert){return writeDouble(this,value,offset,!1,noAssert)},"writeDoubleBE"),Buffer2.prototype.copy=__name(function(target,targetStart,start,end){if(start||(start=0),!end&&end!==0&&(end=this.length),targetStart>=target.length&&(targetStart=target.length),targetStart||(targetStart=0),end>0&&end<start&&(end=start),end===start||target.length===0||this.length===0)return 0;if(targetStart<0)throw new RangeError("targetStart out of bounds");if(start<0||start>=this.length)throw new RangeError("sourceStart out of bounds");if(end<0)throw new RangeError("sourceEnd out of bounds");end>this.length&&(end=this.length),target.length-targetStart<end-start&&(end=target.length-targetStart+start);var len=end-start,i;if(this===target&&start<targetStart&&targetStart<end)for(i=len-1;i>=0;--i)target[i+targetStart]=this[i+start];else if(len<1e3)for(i=0;i<len;++i)target[i+targetStart]=this[i+start];else Uint8Array.prototype.set.call(target,this.subarray(start,start+len),targetStart);return len},"copy"),Buffer2.prototype.fill=__name(function(val,start,end,encoding){if(typeof val=="string"){if(typeof start=="string"?(encoding=start,start=0,end=this.length):typeof end=="string"&&(encoding=end,end=this.length),val.length===1){var code=val.charCodeAt(0);code<256&&(val=code)}if(encoding!==void 0&&typeof encoding!="string")throw new TypeError("encoding must be a string");if(typeof encoding=="string"&&!Buffer2.isEncoding(encoding))throw new TypeError("Unknown encoding: "+encoding)}else typeof val=="number"&&(val=val&255);if(start<0||this.length<start||this.length<end)throw new RangeError("Out of range index");if(end<=start)return this;start=start>>>0,end=end===void 0?this.length:end>>>0,val||(val=0);var i;if(typeof val=="number")for(i=start;i<end;++i)this[i]=val;else{var bytes=Buffer2.isBuffer(val)?val:new Buffer2(val,encoding),len=bytes.length;for(i=0;i<end-start;++i)this[i+start]=bytes[i%len]}return this},"fill");var INVALID_BASE64_RE=/[^+/0-9A-Za-z-_]/g;function base64clean(str){if(str=str.trim().replace(INVALID_BASE64_RE,""),str.length<2)return"";for(;str.length%4!==0;)str=str+"=";return str}__name(base64clean,"base64clean");function toHex(n){return n<16?"0"+n.toString(16):n.toString(16)}__name(toHex,"toHex");function utf8ToBytes(string,units){units=units||1/0;for(var codePoint,length=string.length,leadSurrogate=null,bytes=[],i=0;i<length;++i){if(codePoint=string.charCodeAt(i),codePoint>55295&&codePoint<57344){if(!leadSurrogate){if(codePoint>56319){(units-=3)>-1&&bytes.push(239,191,189);continue}else if(i+1===length){(units-=3)>-1&&bytes.push(239,191,189);continue}leadSurrogate=codePoint;continue}if(codePoint<56320){(units-=3)>-1&&bytes.push(239,191,189),leadSurrogate=codePoint;continue}codePoint=(leadSurrogate-55296<<10|codePoint-56320)+65536}else leadSurrogate&&(units-=3)>-1&&bytes.push(239,191,189);if(leadSurrogate=null,codePoint<128){if((units-=1)<0)break;bytes.push(codePoint)}else if(codePoint<2048){if((units-=2)<0)break;bytes.push(codePoint>>6|192,codePoint&63|128)}else if(codePoint<65536){if((units-=3)<0)break;bytes.push(codePoint>>12|224,codePoint>>6&63|128,codePoint&63|128)}else if(codePoint<1114112){if((units-=4)<0)break;bytes.push(codePoint>>18|240,codePoint>>12&63|128,codePoint>>6&63|128,codePoint&63|128)}else throw new Error("Invalid code point")}return bytes}__name(utf8ToBytes,"utf8ToBytes");function asciiToBytes(str){for(var byteArray=[],i=0;i<str.length;++i)byteArray.push(str.charCodeAt(i)&255);return byteArray}__name(asciiToBytes,"asciiToBytes");function utf16leToBytes(str,units){for(var c,hi,lo,byteArray=[],i=0;i<str.length&&!((units-=2)<0);++i)c=str.charCodeAt(i),hi=c>>8,lo=c%256,byteArray.push(lo),byteArray.push(hi);return byteArray}__name(utf16leToBytes,"utf16leToBytes");function base64ToBytes(str){return base64.toByteArray(base64clean(str))}__name(base64ToBytes,"base64ToBytes");function blitBuffer(src,dst,offset,length){for(var i=0;i<length&&!(i+offset>=dst.length||i>=src.length);++i)dst[i+offset]=src[i];return i}__name(blitBuffer,"blitBuffer");function isArrayBuffer(obj){return obj instanceof ArrayBuffer||obj!=null&&obj.constructor!=null&&obj.constructor.name==="ArrayBuffer"&&typeof obj.byteLength=="number"}__name(isArrayBuffer,"isArrayBuffer");function isArrayBufferView(obj){return typeof ArrayBuffer.isView=="function"&&ArrayBuffer.isView(obj)}__name(isArrayBufferView,"isArrayBufferView");function numberIsNaN(obj){return obj!==obj}__name(numberIsNaN,"numberIsNaN")}).call(exports2,__webpack_require__(1))},function(module2,exports2){"use strict";exports2.byteLength=byteLength,exports2.toByteArray=toByteArray,exports2.fromByteArray=fromByteArray;for(var lookup=[],revLookup=[],Arr=typeof Uint8Array<"u"?Uint8Array:Array,code="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i=0,len=code.length;i<len;++i)lookup[i]=code[i],revLookup[code.charCodeAt(i)]=i;revLookup[45]=62,revLookup[95]=63;function placeHoldersCount(b64){var len2=b64.length;if(len2%4>0)throw new Error("Invalid string. Length must be a multiple of 4");return b64[len2-2]==="="?2:b64[len2-1]==="="?1:0}__name(placeHoldersCount,"placeHoldersCount");function byteLength(b64){return b64.length*3/4-placeHoldersCount(b64)}__name(byteLength,"byteLength");function toByteArray(b64){var i2,j,l,tmp,placeHolders,arr,len2=b64.length;placeHolders=placeHoldersCount(b64),arr=new Arr(len2*3/4-placeHolders),l=placeHolders>0?len2-4:len2;var L=0;for(i2=0,j=0;i2<l;i2+=4,j+=3)tmp=revLookup[b64.charCodeAt(i2)]<<18|revLookup[b64.charCodeAt(i2+1)]<<12|revLookup[b64.charCodeAt(i2+2)]<<6|revLookup[b64.charCodeAt(i2+3)],arr[L++]=tmp>>16&255,arr[L++]=tmp>>8&255,arr[L++]=tmp&255;return placeHolders===2?(tmp=revLookup[b64.charCodeAt(i2)]<<2|revLookup[b64.charCodeAt(i2+1)]>>4,arr[L++]=tmp&255):placeHolders===1&&(tmp=revLookup[b64.charCodeAt(i2)]<<10|revLookup[b64.charCodeAt(i2+1)]<<4|revLookup[b64.charCodeAt(i2+2)]>>2,arr[L++]=tmp>>8&255,arr[L++]=tmp&255),arr}__name(toByteArray,"toByteArray");function tripletToBase64(num){return lookup[num>>18&63]+lookup[num>>12&63]+lookup[num>>6&63]+lookup[num&63]}__name(tripletToBase64,"tripletToBase64");function encodeChunk(uint8,start,end){for(var tmp,output=[],i2=start;i2<end;i2+=3)tmp=(uint8[i2]<<16)+(uint8[i2+1]<<8)+uint8[i2+2],output.push(tripletToBase64(tmp));return output.join("")}__name(encodeChunk,"encodeChunk");function fromByteArray(uint8){for(var tmp,len2=uint8.length,extraBytes=len2%3,output="",parts=[],maxChunkLength=16383,i2=0,len22=len2-extraBytes;i2<len22;i2+=maxChunkLength)parts.push(encodeChunk(uint8,i2,i2+maxChunkLength>len22?len22:i2+maxChunkLength));return extraBytes===1?(tmp=uint8[len2-1],output+=lookup[tmp>>2],output+=lookup[tmp<<4&63],output+="=="):extraBytes===2&&(tmp=(uint8[len2-2]<<8)+uint8[len2-1],output+=lookup[tmp>>10],output+=lookup[tmp>>4&63],output+=lookup[tmp<<2&63],output+="="),parts.push(output),parts.join("")}__name(fromByteArray,"fromByteArray")},function(module2,exports2){exports2.read=function(buffer,offset,isLE,mLen,nBytes){var e,m,eLen=nBytes*8-mLen-1,eMax=(1<<eLen)-1,eBias=eMax>>1,nBits=-7,i=isLE?nBytes-1:0,d=isLE?-1:1,s=buffer[offset+i];for(i+=d,e=s&(1<<-nBits)-1,s>>=-nBits,nBits+=eLen;nBits>0;e=e*256+buffer[offset+i],i+=d,nBits-=8);for(m=e&(1<<-nBits)-1,e>>=-nBits,nBits+=mLen;nBits>0;m=m*256+buffer[offset+i],i+=d,nBits-=8);if(e===0)e=1-eBias;else{if(e===eMax)return m?NaN:(s?-1:1)*(1/0);m=m+Math.pow(2,mLen),e=e-eBias}return(s?-1:1)*m*Math.pow(2,e-mLen)},exports2.write=function(buffer,value,offset,isLE,mLen,nBytes){var e,m,c,eLen=nBytes*8-mLen-1,eMax=(1<<eLen)-1,eBias=eMax>>1,rt=mLen===23?Math.pow(2,-24)-Math.pow(2,-77):0,i=isLE?0:nBytes-1,d=isLE?1:-1,s=value<0||value===0&&1/value<0?1:0;for(value=Math.abs(value),isNaN(value)||value===1/0?(m=isNaN(value)?1:0,e=eMax):(e=Math.floor(Math.log(value)/Math.LN2),value*(c=Math.pow(2,-e))<1&&(e--,c*=2),e+eBias>=1?value+=rt/c:value+=rt*Math.pow(2,1-eBias),value*c>=2&&(e++,c/=2),e+eBias>=eMax?(m=0,e=eMax):e+eBias>=1?(m=(value*c-1)*Math.pow(2,mLen),e=e+eBias):(m=value*Math.pow(2,eBias-1)*Math.pow(2,mLen),e=0));mLen>=8;buffer[offset+i]=m&255,i+=d,m/=256,mLen-=8);for(e=e<<mLen|m,eLen+=mLen;eLen>0;buffer[offset+i]=e&255,i+=d,e/=256,eLen-=8);buffer[offset+i-d]|=s*128}},function(module2,exports2){module2.exports=function(module3){return module3.webpackPolyfill||(module3.deprecate=function(){},module3.paths=[],module3.children=[],module3.webpackPolyfill=1),module3}},function(module2,exports2,__webpack_require__){"use strict";var Process=__webpack_require__(7),process=new Process,processProxy={};function defineKey(key2){processProxy[key2]||(typeof process[key2]=="function"?processProxy[key2]=function(){return process[key2].apply(process,arguments)}:processProxy[key2]=process[key2])}__name(defineKey,"defineKey");for(var key in process)defineKey(key);processProxy.initializeTTYs=function(){process.stdin===null&&(process.initializeTTYs(),processProxy.stdin=process.stdin,processProxy.stdout=process.stdout,processProxy.stderr=process.stderr)},process.nextTick(function(){processProxy.initializeTTYs()}),module2.exports=processProxy},function(module2,exports2,__webpack_require__){(function(__dirname){"use strict";var __extends=this&&this.__extends||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);function __(){this.constructor=d}__name(__,"__"),d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)},events=__webpack_require__(8),path=null,Item=(function(){function Item2(fun,array){this.fun=fun,this.array=array}return __name(Item2,"Item2"),Item2.prototype.run=function(){this.fun.apply(null,this.array)},Item2})(),NextTickQueue=(function(){function NextTickQueue2(){this._queue=[],this._draining=!1,this._currentQueue=null,this._queueIndex=-1}return __name(NextTickQueue2,"NextTickQueue2"),NextTickQueue2.prototype.push=function(item){var _this=this;this._queue.push(item)===1&&!this._draining&&setTimeout(function(){return _this._drainQueue()},0)},NextTickQueue2.prototype._cleanUpNextTick=function(){this._draining=!1,this._currentQueue&&this._currentQueue.length?this._queue=this._currentQueue.concat(this._queue):this._queueIndex=-1,this._queue.length&&this._drainQueue()},NextTickQueue2.prototype._drainQueue=function(){var _this=this;if(!this._draining){var timeout=setTimeout(function(){return _this._cleanUpNextTick()});this._draining=!0;for(var len=this._queue.length;len;){for(this._currentQueue=this._queue,this._queue=[];++this._queueIndex<len;)this._currentQueue&&this._currentQueue[this._queueIndex].run();this._queueIndex=-1,len=this._queue.length}this._currentQueue=null,this._draining=!1,clearTimeout(timeout)}},NextTickQueue2})(),Process=(function(_super){__extends(Process2,_super);function Process2(){_super.apply(this,arguments),this.startTime=Date.now(),this._cwd="/",this.platform="browser",this.argv=[],this.execArgv=[],this.stdout=null,this.stderr=null,this.stdin=null,this.domain=null,this._queue=new NextTickQueue,this.execPath=__dirname,this.env={},this.exitCode=0,this._gid=1,this._uid=1,this.version="v5.0",this.versions={http_parser:"0.0",node:"5.0",v8:"0.0",uv:"0.0",zlib:"0.0",ares:"0.0",icu:"0.0",modules:"0",openssl:"0.0"},this.config={target_defaults:{cflags:[],default_configuration:"Release",defines:[],include_dirs:[],libraries:[]},variables:{clang:0,host_arch:"x32",node_install_npm:!1,node_install_waf:!1,node_prefix:"",node_shared_cares:!1,node_shared_http_parser:!1,node_shared_libuv:!1,node_shared_zlib:!1,node_shared_v8:!1,node_use_dtrace:!1,node_use_etw:!1,node_use_openssl:!1,node_shared_openssl:!1,strict_aliasing:!1,target_arch:"x32",v8_use_snapshot:!1,v8_no_strict_aliasing:0,visibility:""}},this.pid=Math.random()*1e3|0,this.title="node",this.arch="x32",this._mask=18,this.connected=void 0}return __name(Process2,"Process2"),Process2.prototype.chdir=function(dir){path===null&&(path=__webpack_require__(9)),this._cwd=path.resolve(dir)},Process2.prototype.cwd=function(){return this._cwd},Process2.prototype.uptime=function(){return(Date.now()-this.startTime)/1e3|0},Process2.prototype.nextTick=function(fun){for(var args=[],_i=1;_i<arguments.length;_i++)args[_i-1]=arguments[_i];this._queue.push(new Item(fun,args))},Process2.prototype.abort=function(){this.emit("abort")},Process2.prototype.exit=function(code){this.exitCode=code,this.emit("exit",[code])},Process2.prototype.getgid=function(){return this._gid},Process2.prototype.setgid=function(gid){typeof gid=="number"?this._gid=gid:this._gid=1},Process2.prototype.getuid=function(){return this._uid},Process2.prototype.setuid=function(uid){typeof uid=="number"?this._uid=uid:this._uid=1},Process2.prototype.kill=function(pid,signal){this.emit("kill",[pid,signal])},Process2.prototype.memoryUsage=function(){return{rss:0,heapTotal:0,heapUsed:0}},Process2.prototype.umask=function(mask){mask===void 0&&(mask=this._mask);var oldMask=this._mask;return this._mask=mask,this.emit("umask",[mask]),oldMask},Process2.prototype.hrtime=function(){var timeinfo;typeof performance<"u"?timeinfo=performance.now():Date.now?timeinfo=Date.now():timeinfo=new Date().getTime();var secs=timeinfo/1e3|0;return timeinfo-=secs*1e3,timeinfo=timeinfo*1e6|0,[secs,timeinfo]},Process2.prototype.initializeTTYs=function(){if(this.stdout===null){var TTY=__webpack_require__(10);this.stdout=new TTY,this.stderr=new TTY,this.stdin=new TTY}},Process2.prototype.disconnect=function(){},Process2})(events.EventEmitter);module2.exports=Process}).call(exports2,"/")},function(module2,exports2){function EventEmitter(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}__name(EventEmitter,"EventEmitter"),module2.exports=EventEmitter,EventEmitter.EventEmitter=EventEmitter,EventEmitter.prototype._events=void 0,EventEmitter.prototype._maxListeners=void 0,EventEmitter.defaultMaxListeners=10,EventEmitter.prototype.setMaxListeners=function(n){if(!isNumber(n)||n<0||isNaN(n))throw TypeError("n must be a positive number");return this._maxListeners=n,this},EventEmitter.prototype.emit=function(type){var er,handler,len,args,i,listeners;if(this._events||(this._events={}),type==="error"&&(!this._events.error||isObject(this._events.error)&&!this._events.error.length)){if(er=arguments[1],er instanceof Error)throw er;var err=new Error('Uncaught, unspecified "error" event. ('+er+")");throw err.context=er,err}if(handler=this._events[type],isUndefined(handler))return!1;if(isFunction(handler))switch(arguments.length){case 1:handler.call(this);break;case 2:handler.call(this,arguments[1]);break;case 3:handler.call(this,arguments[1],arguments[2]);break;default:args=Array.prototype.slice.call(arguments,1),handler.apply(this,args)}else if(isObject(handler))for(args=Array.prototype.slice.call(arguments,1),listeners=handler.slice(),len=listeners.length,i=0;i<len;i++)listeners[i].apply(this,args);return!0},EventEmitter.prototype.addListener=function(type,listener){var m;if(!isFunction(listener))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",type,isFunction(listener.listener)?listener.listener:listener),this._events[type]?isObject(this._events[type])?this._events[type].push(listener):this._events[type]=[this._events[type],listener]:this._events[type]=listener,isObject(this._events[type])&&!this._events[type].warned&&(isUndefined(this._maxListeners)?m=EventEmitter.defaultMaxListeners:m=this._maxListeners,m&&m>0&&this._events[type].length>m&&(this._events[type].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[type].length),typeof console.trace=="function"&&console.trace())),this},EventEmitter.prototype.on=EventEmitter.prototype.addListener,EventEmitter.prototype.once=function(type,listener){if(!isFunction(listener))throw TypeError("listener must be a function");var fired=!1;function g(){this.removeListener(type,g),fired||(fired=!0,listener.apply(this,arguments))}return __name(g,"g"),g.listener=listener,this.on(type,g),this},EventEmitter.prototype.removeListener=function(type,listener){var list,position,length,i;if(!isFunction(listener))throw TypeError("listener must be a function");if(!this._events||!this._events[type])return this;if(list=this._events[type],length=list.length,position=-1,list===listener||isFunction(list.listener)&&list.listener===listener)delete this._events[type],this._events.removeListener&&this.emit("removeListener",type,listener);else if(isObject(list)){for(i=length;i-- >0;)if(list[i]===listener||list[i].listener&&list[i].listener===listener){position=i;break}if(position<0)return this;list.length===1?(list.length=0,delete this._events[type]):list.splice(position,1),this._events.removeListener&&this.emit("removeListener",type,listener)}return this},EventEmitter.prototype.removeAllListeners=function(type){var key,listeners;if(!this._events)return this;if(!this._events.removeListener)return arguments.length===0?this._events={}:this._events[type]&&delete this._events[type],this;if(arguments.length===0){for(key in this._events)key!=="removeListener"&&this.removeAllListeners(key);return this.removeAllListeners("removeListener"),this._events={},this}if(listeners=this._events[type],isFunction(listeners))this.removeListener(type,listeners);else if(listeners)for(;listeners.length;)this.removeListener(type,listeners[listeners.length-1]);return delete this._events[type],this},EventEmitter.prototype.listeners=function(type){var ret;return!this._events||!this._events[type]?ret=[]:isFunction(this._events[type])?ret=[this._events[type]]:ret=this._events[type].slice(),ret},EventEmitter.prototype.listenerCount=function(type){if(this._events){var evlistener=this._events[type];if(isFunction(evlistener))return 1;if(evlistener)return evlistener.length}return 0},EventEmitter.listenerCount=function(emitter,type){return emitter.listenerCount(type)};function isFunction(arg){return typeof arg=="function"}__name(isFunction,"isFunction");function isNumber(arg){return typeof arg=="number"}__name(isNumber,"isNumber");function isObject(arg){return typeof arg=="object"&&arg!==null}__name(isObject,"isObject");function isUndefined(arg){return arg===void 0}__name(isUndefined,"isUndefined")},function(module2,exports2,__webpack_require__){(function(process){"use strict";var splitPathRe=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/;function posixSplitPath(filename){var out=splitPathRe.exec(filename);return out.shift(),out}__name(posixSplitPath,"posixSplitPath");var path=(function(){function path2(){}return __name(path2,"path2"),path2.normalize=function(p){p===""&&(p=".");var absolute=p.charAt(0)===path2.sep;p=path2._removeDuplicateSeps(p);for(var components=p.split(path2.sep),goodComponents=[],idx=0;idx<components.length;idx++){var c=components[idx];c!=="."&&(c===".."&&(absolute||!absolute&&goodComponents.length>0&&goodComponents[0]!=="..")?goodComponents.pop():goodComponents.push(c))}if(!absolute&&goodComponents.length<2)switch(goodComponents.length){case 1:goodComponents[0]===""&&goodComponents.unshift(".");break;default:goodComponents.push(".")}return p=goodComponents.join(path2.sep),absolute&&p.charAt(0)!==path2.sep&&(p=path2.sep+p),p},path2.join=function(){for(var paths=[],_i=0;_i<arguments.length;_i++)paths[_i-0]=arguments[_i];for(var processed=[],i=0;i<paths.length;i++){var segment=paths[i];if(typeof segment!="string")throw new TypeError("Invalid argument type to path.join: "+typeof segment);segment!==""&&processed.push(segment)}return path2.normalize(processed.join(path2.sep))},path2.resolve=function(){for(var paths=[],_i=0;_i<arguments.length;_i++)paths[_i-0]=arguments[_i];for(var processed=[],i=0;i<paths.length;i++){var p=paths[i];if(typeof p!="string")throw new TypeError("Invalid argument type to path.join: "+typeof p);p!==""&&(p.charAt(0)===path2.sep&&(processed=[]),processed.push(p))}var resolved=path2.normalize(processed.join(path2.sep));if(resolved.length>1&&resolved.charAt(resolved.length-1)===path2.sep)return resolved.substr(0,resolved.length-1);if(resolved.charAt(0)!==path2.sep){resolved.charAt(0)==="."&&(resolved.length===1||resolved.charAt(1)===path2.sep)&&(resolved=resolved.length===1?"":resolved.substr(2));var cwd=process.cwd();resolved!==""?resolved=this.normalize(cwd+(cwd!=="/"?path2.sep:"")+resolved):resolved=cwd}return resolved},path2.relative=function(from,to){var i;from=path2.resolve(from),to=path2.resolve(to);var fromSegs=from.split(path2.sep),toSegs=to.split(path2.sep);toSegs.shift(),fromSegs.shift();var upCount=0,downSegs=[];for(i=0;i<fromSegs.length;i++){var seg=fromSegs[i];if(seg!==toSegs[i]){upCount=fromSegs.length-i;break}}downSegs=toSegs.slice(i),fromSegs.length===1&&fromSegs[0]===""&&(upCount=0),upCount>fromSegs.length&&(upCount=fromSegs.length);var rv="";for(i=0;i<upCount;i++)rv+="../";return rv+=downSegs.join(path2.sep),rv.length>1&&rv.charAt(rv.length-1)===path2.sep&&(rv=rv.substr(0,rv.length-1)),rv},path2.dirname=function(p){p=path2._removeDuplicateSeps(p);var absolute=p.charAt(0)===path2.sep,sections=p.split(path2.sep);return sections.pop()===""&&sections.length>0&&sections.pop(),sections.length>1||sections.length===1&&!absolute?sections.join(path2.sep):absolute?path2.sep:"."},path2.basename=function(p,ext){if(ext===void 0&&(ext=""),p==="")return p;p=path2.normalize(p);var sections=p.split(path2.sep),lastPart=sections[sections.length-1];if(lastPart===""&&sections.length>1)return sections[sections.length-2];if(ext.length>0){var lastPartExt=lastPart.substr(lastPart.length-ext.length);if(lastPartExt===ext)return lastPart.substr(0,lastPart.length-ext.length)}return lastPart},path2.extname=function(p){p=path2.normalize(p);var sections=p.split(path2.sep);if(p=sections.pop(),p===""&&sections.length>0&&(p=sections.pop()),p==="..")return"";var i=p.lastIndexOf(".");return i===-1||i===0?"":p.substr(i)},path2.isAbsolute=function(p){return p.length>0&&p.charAt(0)===path2.sep},path2._makeLong=function(p){return p},path2.parse=function(p){var allParts=posixSplitPath(p);return{root:allParts[0],dir:allParts[0]+allParts[1].slice(0,-1),base:allParts[2],ext:allParts[3],name:allParts[2].slice(0,allParts[2].length-allParts[3].length)}},path2.format=function(pathObject){if(pathObject===null||typeof pathObject!="object")throw new TypeError("Parameter 'pathObject' must be an object, not "+typeof pathObject);var root=pathObject.root||"";if(typeof root!="string")throw new TypeError("'pathObject.root' must be a string or undefined, not "+typeof pathObject.root);var dir=pathObject.dir?pathObject.dir+path2.sep:"",base=pathObject.base||"";return dir+base},path2._removeDuplicateSeps=function(p){return p=p.replace(this._replaceRegex,this.sep),p},path2.sep="/",path2._replaceRegex=new RegExp("//+","g"),path2.delimiter=":",path2.posix=path2,path2.win32=path2,path2})(),_=path;module2.exports=path}).call(exports2,__webpack_require__(6))},function(module2,exports2,__webpack_require__){(function(Buffer2){"use strict";var __extends=this&&this.__extends||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);function __(){this.constructor=d}__name(__,"__"),d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)},stream=__webpack_require__(11),TTY=(function(_super){__extends(TTY2,_super);function TTY2(){_super.call(this),this.isRaw=!1,this.columns=80,this.rows=120,this.isTTY=!0,this._bufferedWrites=[],this._waitingForWrites=!1}return __name(TTY2,"TTY2"),TTY2.prototype.setRawMode=function(mode){this.isRaw!==mode&&(this.isRaw=mode,this.emit("modeChange"))},TTY2.prototype.changeColumns=function(columns){columns!==this.columns&&(this.columns=columns,this.emit("resize"))},TTY2.prototype.changeRows=function(rows){rows!==this.rows&&(this.rows=rows,this.emit("resize"))},TTY2.isatty=function(fd){return fd&&fd instanceof TTY2},TTY2.prototype._write=function(chunk,encoding,cb){var error;try{var data;typeof chunk=="string"?data=new Buffer2(chunk,encoding):data=chunk,this._bufferedWrites.push(data),this._waitingForWrites&&this._read(1024)}catch(e){error=e}finally{cb(error)}},TTY2.prototype._read=function(size){if(this._bufferedWrites.length===0)this._waitingForWrites=!0;else for(;this._bufferedWrites.length>0&&(this._waitingForWrites=this.push(this._bufferedWrites.shift()),!!this._waitingForWrites););},TTY2})(stream.Duplex);module2.exports=TTY}).call(exports2,__webpack_require__(1))},function(module2,exports2,__webpack_require__){module2.exports=Stream;var EE=__webpack_require__(8).EventEmitter,inherits=__webpack_require__(12);inherits(Stream,EE),Stream.Readable=__webpack_require__(13),Stream.Writable=__webpack_require__(27),Stream.Duplex=__webpack_require__(28),Stream.Transform=__webpack_require__(29),Stream.PassThrough=__webpack_require__(30),Stream.Stream=Stream;function Stream(){EE.call(this)}__name(Stream,"Stream"),Stream.prototype.pipe=function(dest,options){var source=this;function ondata(chunk){dest.writable&&dest.write(chunk)===!1&&source.pause&&source.pause()}__name(ondata,"ondata"),source.on("data",ondata);function ondrain(){source.readable&&source.resume&&source.resume()}__name(ondrain,"ondrain"),dest.on("drain",ondrain),!dest._isStdio&&(!options||options.end!==!1)&&(source.on("end",onend),source.on("close",onclose));var didOnEnd=!1;function onend(){didOnEnd||(didOnEnd=!0,dest.end())}__name(onend,"onend");function onclose(){didOnEnd||(didOnEnd=!0,typeof dest.destroy=="function"&&dest.destroy())}__name(onclose,"onclose");function onerror(er){if(cleanup(),EE.listenerCount(this,"error")===0)throw er}__name(onerror,"onerror"),source.on("error",onerror),dest.on("error",onerror);function cleanup(){source.removeListener("data",ondata),dest.removeListener("drain",ondrain),source.removeListener("end",onend),source.removeListener("close",onclose),source.removeListener("error",onerror),dest.removeListener("error",onerror),source.removeListener("end",cleanup),source.removeListener("close",cleanup),dest.removeListener("close",cleanup)}return __name(cleanup,"cleanup"),source.on("end",cleanup),source.on("close",cleanup),dest.on("close",cleanup),dest.emit("pipe",source),dest}},function(module2,exports2){typeof Object.create=="function"?module2.exports=__name(function(ctor,superCtor){ctor.super_=superCtor,ctor.prototype=Object.create(superCtor.prototype,{constructor:{value:ctor,enumerable:!1,writable:!0,configurable:!0}})},"inherits"):module2.exports=__name(function(ctor,superCtor){ctor.super_=superCtor;var TempCtor=__name(function(){},"TempCtor");TempCtor.prototype=superCtor.prototype,ctor.prototype=new TempCtor,ctor.prototype.constructor=ctor},"inherits")},function(module2,exports2,__webpack_require__){(function(process){var Stream=(function(){try{return __webpack_require__(11)}catch{}})();exports2=module2.exports=__webpack_require__(14),exports2.Stream=Stream||exports2,exports2.Readable=exports2,exports2.Writable=__webpack_require__(22),exports2.Duplex=__webpack_require__(21),exports2.Transform=__webpack_require__(25),exports2.PassThrough=__webpack_require__(26),!process.browser&&process.env.READABLE_STREAM==="disable"&&Stream&&(module2.exports=Stream)}).call(exports2,__webpack_require__(6))},function(module2,exports2,__webpack_require__){(function(process){"use strict";module2.exports=Readable;var processNextTick=__webpack_require__(15),isArray=__webpack_require__(16),Duplex;Readable.ReadableState=ReadableState;var EE=__webpack_require__(8).EventEmitter,EElistenerCount=__name(function(emitter,type){return emitter.listeners(type).length},"EElistenerCount"),Stream;(function(){try{Stream=__webpack_require__(11)}catch{}finally{Stream||(Stream=__webpack_require__(8).EventEmitter)}})();var Buffer2=__webpack_require__(2).Buffer,bufferShim=__webpack_require__(17),util=__webpack_require__(18);util.inherits=__webpack_require__(12);var debugUtil=__webpack_require__(19),debug=void 0;debugUtil&&debugUtil.debuglog?debug=debugUtil.debuglog("stream"):debug=__name(function(){},"debug");var BufferList=__webpack_require__(20),StringDecoder;util.inherits(Readable,Stream);function prependListener(emitter,event,fn){if(typeof emitter.prependListener=="function")return emitter.prependListener(event,fn);!emitter._events||!emitter._events[event]?emitter.on(event,fn):isArray(emitter._events[event])?emitter._events[event].unshift(fn):emitter._events[event]=[fn,emitter._events[event]]}__name(prependListener,"prependListener");function ReadableState(options,stream){Duplex=Duplex||__webpack_require__(21),options=options||{},this.objectMode=!!options.objectMode,stream instanceof Duplex&&(this.objectMode=this.objectMode||!!options.readableObjectMode);var hwm=options.highWaterMark,defaultHwm=this.objectMode?16:16*1024;this.highWaterMark=hwm||hwm===0?hwm:defaultHwm,this.highWaterMark=~~this.highWaterMark,this.buffer=new BufferList,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.defaultEncoding=options.defaultEncoding||"utf8",this.ranOut=!1,this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,options.encoding&&(StringDecoder||(StringDecoder=__webpack_require__(24).StringDecoder),this.decoder=new StringDecoder(options.encoding),this.encoding=options.encoding)}__name(ReadableState,"ReadableState");function Readable(options){if(Duplex=Duplex||__webpack_require__(21),!(this instanceof Readable))return new Readable(options);this._readableState=new ReadableState(options,this),this.readable=!0,options&&typeof options.read=="function"&&(this._read=options.read),Stream.call(this)}__name(Readable,"Readable"),Readable.prototype.push=function(chunk,encoding){var state=this._readableState;return!state.objectMode&&typeof chunk=="string"&&(encoding=encoding||state.defaultEncoding,encoding!==state.encoding&&(chunk=bufferShim.from(chunk,encoding),encoding="")),readableAddChunk(this,state,chunk,encoding,!1)},Readable.prototype.unshift=function(chunk){var state=this._readableState;return readableAddChunk(this,state,chunk,"",!0)},Readable.prototype.isPaused=function(){return this._readableState.flowing===!1};function readableAddChunk(stream,state,chunk,encoding,addToFront){var er=chunkInvalid(state,chunk);if(er)stream.emit("error",er);else if(chunk===null)state.reading=!1,onEofChunk(stream,state);else if(state.objectMode||chunk&&chunk.length>0)if(state.ended&&!addToFront){var e=new Error("stream.push() after EOF");stream.emit("error",e)}else if(state.endEmitted&&addToFront){var _e=new Error("stream.unshift() after end event");stream.emit("error",_e)}else{var skipAdd;state.decoder&&!addToFront&&!encoding&&(chunk=state.decoder.write(chunk),skipAdd=!state.objectMode&&chunk.length===0),addToFront||(state.reading=!1),skipAdd||(state.flowing&&state.length===0&&!state.sync?(stream.emit("data",chunk),stream.read(0)):(state.length+=state.objectMode?1:chunk.length,addToFront?state.buffer.unshift(chunk):state.buffer.push(chunk),state.needReadable&&emitReadable(stream))),maybeReadMore(stream,state)}else addToFront||(state.reading=!1);return needMoreData(state)}__name(readableAddChunk,"readableAddChunk");function needMoreData(state){return!state.ended&&(state.needReadable||state.length<state.highWaterMark||state.length===0)}__name(needMoreData,"needMoreData"),Readable.prototype.setEncoding=function(enc){return StringDecoder||(StringDecoder=__webpack_require__(24).StringDecoder),this._readableState.decoder=new StringDecoder(enc),this._readableState.encoding=enc,this};var MAX_HWM=8388608;function computeNewHighWaterMark(n){return n>=MAX_HWM?n=MAX_HWM:(n--,n|=n>>>1,n|=n>>>2,n|=n>>>4,n|=n>>>8,n|=n>>>16,n++),n}__name(computeNewHighWaterMark,"computeNewHighWaterMark");function howMuchToRead(n,state){return n<=0||state.length===0&&state.ended?0:state.objectMode?1:n!==n?state.flowing&&state.length?state.buffer.head.data.length:state.length:(n>state.highWaterMark&&(state.highWaterMark=computeNewHighWaterMark(n)),n<=state.length?n:state.ended?state.length:(state.needReadable=!0,0))}__name(howMuchToRead,"howMuchToRead"),Readable.prototype.read=function(n){debug("read",n),n=parseInt(n,10);var state=this._readableState,nOrig=n;if(n!==0&&(state.emittedReadable=!1),n===0&&state.needReadable&&(state.length>=state.highWaterMark||state.ended))return debug("read: emitReadable",state.length,state.ended),state.length===0&&state.ended?endReadable(this):emitReadable(this),null;if(n=howMuchToRead(n,state),n===0&&state.ended)return state.length===0&&endReadable(this),null;var doRead=state.needReadable;debug("need readable",doRead),(state.length===0||state.length-n<state.highWaterMark)&&(doRead=!0,debug("length less than watermark",doRead)),state.ended||state.reading?(doRead=!1,debug("reading or ended",doRead)):doRead&&(debug("do read"),state.reading=!0,state.sync=!0,state.length===0&&(state.needReadable=!0),this._read(state.highWaterMark),state.sync=!1,state.reading||(n=howMuchToRead(nOrig,state)));var ret;return n>0?ret=fromList(n,state):ret=null,ret===null?(state.needReadable=!0,n=0):state.length-=n,state.length===0&&(state.ended||(state.needReadable=!0),nOrig!==n&&state.ended&&endReadable(this)),ret!==null&&this.emit("data",ret),ret};function chunkInvalid(state,chunk){var er=null;return!Buffer2.isBuffer(chunk)&&typeof chunk!="string"&&chunk!==null&&chunk!==void 0&&!state.objectMode&&(er=new TypeError("Invalid non-string/buffer chunk")),er}__name(chunkInvalid,"chunkInvalid");function onEofChunk(stream,state){if(!state.ended){if(state.decoder){var chunk=state.decoder.end();chunk&&chunk.length&&(state.buffer.push(chunk),state.length+=state.objectMode?1:chunk.length)}state.ended=!0,emitReadable(stream)}}__name(onEofChunk,"onEofChunk");function emitReadable(stream){var state=stream._readableState;state.needReadable=!1,state.emittedReadable||(debug("emitReadable",state.flowing),state.emittedReadable=!0,state.sync?processNextTick(emitReadable_,stream):emitReadable_(stream))}__name(emitReadable,"emitReadable");function emitReadable_(stream){debug("emit readable"),stream.emit("readable"),flow(stream)}__name(emitReadable_,"emitReadable_");function maybeReadMore(stream,state){state.readingMore||(state.readingMore=!0,processNextTick(maybeReadMore_,stream,state))}__name(maybeReadMore,"maybeReadMore");function maybeReadMore_(stream,state){for(var len=state.length;!state.reading&&!state.flowing&&!state.ended&&state.length<state.highWaterMark&&(debug("maybeReadMore read 0"),stream.read(0),len!==state.length);)len=state.length;state.readingMore=!1}__name(maybeReadMore_,"maybeReadMore_"),Readable.prototype._read=function(n){this.emit("error",new Error("_read() is not implemented"))},Readable.prototype.pipe=function(dest,pipeOpts){var src=this,state=this._readableState;switch(state.pipesCount){case 0:state.pipes=dest;break;case 1:state.pipes=[state.pipes,dest];break;default:state.pipes.push(dest);break}state.pipesCount+=1,debug("pipe count=%d opts=%j",state.pipesCount,pipeOpts);var doEnd=(!pipeOpts||pipeOpts.end!==!1)&&dest!==process.stdout&&dest!==process.stderr,endFn=doEnd?onend:cleanup;state.endEmitted?processNextTick(endFn):src.once("end",endFn),dest.on("unpipe",onunpipe);function onunpipe(readable){debug("onunpipe"),readable===src&&cleanup()}__name(onunpipe,"onunpipe");function onend(){debug("onend"),dest.end()}__name(onend,"onend");var ondrain=pipeOnDrain(src);dest.on("drain",ondrain);var cleanedUp=!1;function cleanup(){debug("cleanup"),dest.removeListener("close",onclose),dest.removeListener("finish",onfinish),dest.removeListener("drain",ondrain),dest.removeListener("error",onerror),dest.removeListener("unpipe",onunpipe),src.removeListener("end",onend),src.removeListener("end",cleanup),src.removeListener("data",ondata),cleanedUp=!0,state.awaitDrain&&(!dest._writableState||dest._writableState.needDrain)&&ondrain()}__name(cleanup,"cleanup");var increasedAwaitDrain=!1;src.on("data",ondata);function ondata(chunk){debug("ondata"),increasedAwaitDrain=!1;var ret=dest.write(chunk);ret===!1&&!increasedAwaitDrain&&((state.pipesCount===1&&state.pipes===dest||state.pipesCount>1&&indexOf(state.pipes,dest)!==-1)&&!cleanedUp&&(debug("false write response, pause",src._readableState.awaitDrain),src._readableState.awaitDrain++,increasedAwaitDrain=!0),src.pause())}__name(ondata,"ondata");function onerror(er){debug("onerror",er),unpipe(),dest.removeListener("error",onerror),EElistenerCount(dest,"error")===0&&dest.emit("error",er)}__name(onerror,"onerror"),prependListener(dest,"error",onerror);function onclose(){dest.removeListener("finish",onfinish),unpipe()}__name(onclose,"onclose"),dest.once("close",onclose);function onfinish(){debug("onfinish"),dest.removeListener("close",onclose),unpipe()}__name(onfinish,"onfinish"),dest.once("finish",onfinish);function unpipe(){debug("unpipe"),src.unpipe(dest)}return __name(unpipe,"unpipe"),dest.emit("pipe",src),state.flowing||(debug("pipe resume"),src.resume()),dest};function pipeOnDrain(src){return function(){var state=src._readableState;debug("pipeOnDrain",state.awaitDrain),state.awaitDrain&&state.awaitDrain--,state.awaitDrain===0&&EElistenerCount(src,"data")&&(state.flowing=!0,flow(src))}}__name(pipeOnDrain,"pipeOnDrain"),Readable.prototype.unpipe=function(dest){var state=this._readableState;if(state.pipesCount===0)return this;if(state.pipesCount===1)return dest&&dest!==state.pipes?this:(dest||(dest=state.pipes),state.pipes=null,state.pipesCount=0,state.flowing=!1,dest&&dest.emit("unpipe",this),this);if(!dest){var dests=state.pipes,len=state.pipesCount;state.pipes=null,state.pipesCount=0,state.flowing=!1;for(var i=0;i<len;i++)dests[i].emit("unpipe",this);return this}var index=indexOf(state.pipes,dest);return index===-1?this:(state.pipes.splice(index,1),state.pipesCount-=1,state.pipesCount===1&&(state.pipes=state.pipes[0]),dest.emit("unpipe",this),this)},Readable.prototype.on=function(ev,fn){var res=Stream.prototype.on.call(this,ev,fn);if(ev==="data")this._readableState.flowing!==!1&&this.resume();else if(ev==="readable"){var state=this._readableState;!state.endEmitted&&!state.readableListening&&(state.readableListening=state.needReadable=!0,state.emittedReadable=!1,state.reading?state.length&&emitReadable(this,state):processNextTick(nReadingNextTick,this))}return res},Readable.prototype.addListener=Readable.prototype.on;function nReadingNextTick(self2){debug("readable nexttick read 0"),self2.read(0)}__name(nReadingNextTick,"nReadingNextTick"),Readable.prototype.resume=function(){var state=this._readableState;return state.flowing||(debug("resume"),state.flowing=!0,resume(this,state)),this};function resume(stream,state){state.resumeScheduled||(state.resumeScheduled=!0,processNextTick(resume_,stream,state))}__name(resume,"resume");function resume_(stream,state){state.reading||(debug("resume read 0"),stream.read(0)),state.resumeScheduled=!1,state.awaitDrain=0,stream.emit("resume"),flow(stream),state.flowing&&!state.reading&&stream.read(0)}__name(resume_,"resume_"),Readable.prototype.pause=function(){return debug("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(debug("pause"),this._readableState.flowing=!1,this.emit("pause")),this};function flow(stream){var state=stream._readableState;for(debug("flow",state.flowing);state.flowing&&stream.read()!==null;);}__name(flow,"flow"),Readable.prototype.wrap=function(stream){var state=this._readableState,paused=!1,self2=this;stream.on("end",function(){if(debug("wrapped end"),state.decoder&&!state.ended){var chunk=state.decoder.end();chunk&&chunk.length&&self2.push(chunk)}self2.push(null)}),stream.on("data",function(chunk){if(debug("wrapped data"),state.decoder&&(chunk=state.decoder.write(chunk)),!(state.objectMode&&chunk==null)&&!(!state.objectMode&&(!chunk||!chunk.length))){var ret=self2.push(chunk);ret||(paused=!0,stream.pause())}});for(var i in stream)this[i]===void 0&&typeof stream[i]=="function"&&(this[i]=(function(method){return function(){return stream[method].apply(stream,arguments)}})(i));var events=["error","close","destroy","pause","resume"];return forEach(events,function(ev){stream.on(ev,self2.emit.bind(self2,ev))}),self2._read=function(n){debug("wrapped _read",n),paused&&(paused=!1,stream.resume())},self2},Readable._fromList=fromList;function fromList(n,state){if(state.length===0)return null;var ret;return state.objectMode?ret=state.buffer.shift():!n||n>=state.length?(state.decoder?ret=state.buffer.join(""):state.buffer.length===1?ret=state.buffer.head.data:ret=state.buffer.concat(state.length),state.buffer.clear()):ret=fromListPartial(n,state.buffer,state.decoder),ret}__name(fromList,"fromList");function fromListPartial(n,list,hasStrings){var ret;return n<list.head.data.length?(ret=list.head.data.slice(0,n),list.head.data=list.head.data.slice(n)):n===list.head.data.length?ret=list.shift():ret=hasStrings?copyFromBufferString(n,list):copyFromBuffer(n,list),ret}__name(fromListPartial,"fromListPartial");function copyFromBufferString(n,list){var p=list.head,c=1,ret=p.data;for(n-=ret.length;p=p.next;){var str=p.data,nb=n>str.length?str.length:n;if(nb===str.length?ret+=str:ret+=str.slice(0,n),n-=nb,n===0){nb===str.length?(++c,p.next?list.head=p.next:list.head=list.tail=null):(list.head=p,p.data=str.slice(nb));break}++c}return list.length-=c,ret}__name(copyFromBufferString,"copyFromBufferString");function copyFromBuffer(n,list){var ret=bufferShim.allocUnsafe(n),p=list.head,c=1;for(p.data.copy(ret),n-=p.data.length;p=p.next;){var buf=p.data,nb=n>buf.length?buf.length:n;if(buf.copy(ret,ret.length-n,0,nb),n-=nb,n===0){nb===buf.length?(++c,p.next?list.head=p.next:list.head=list.tail=null):(list.head=p,p.data=buf.slice(nb));break}++c}return list.length-=c,ret}__name(copyFromBuffer,"copyFromBuffer");function endReadable(stream){var state=stream._readableState;if(state.length>0)throw new Error('"endReadable()" called on non-empty stream');state.endEmitted||(state.ended=!0,processNextTick(endReadableNT,state,stream))}__name(endReadable,"endReadable");function endReadableNT(state,stream){!state.endEmitted&&state.length===0&&(state.endEmitted=!0,stream.readable=!1,stream.emit("end"))}__name(endReadableNT,"endReadableNT");function forEach(xs,f){for(var i=0,l=xs.length;i<l;i++)f(xs[i],i)}__name(forEach,"forEach");function indexOf(xs,x){for(var i=0,l=xs.length;i<l;i++)if(xs[i]===x)return i;return-1}__name(indexOf,"indexOf")}).call(exports2,__webpack_require__(6))},function(module2,exports2,__webpack_require__){(function(process){"use strict";!process.version||process.version.indexOf("v0.")===0||process.version.indexOf("v1.")===0&&process.version.indexOf("v1.8.")!==0?module2.exports=nextTick:module2.exports=process.nextTick;function nextTick(fn,arg1,arg2,arg3){if(typeof fn!="function")throw new TypeError('"callback" argument must be a function');var len=arguments.length,args,i;switch(len){case 0:case 1:return process.nextTick(fn);case 2:return process.nextTick(__name(function(){fn.call(null,arg1)},"afterTickOne"));case 3:return process.nextTick(__name(function(){fn.call(null,arg1,arg2)},"afterTickTwo"));case 4:return process.nextTick(__name(function(){fn.call(null,arg1,arg2,arg3)},"afterTickThree"));default:for(args=new Array(len-1),i=0;i<args.length;)args[i++]=arguments[i];return process.nextTick(__name(function(){fn.apply(null,args)},"afterTick"))}}__name(nextTick,"nextTick")}).call(exports2,__webpack_require__(6))},function(module2,exports2){var toString={}.toString;module2.exports=Array.isArray||function(arr){return toString.call(arr)=="[object Array]"}},function(module2,exports2,__webpack_require__){(function(global){"use strict";var buffer=__webpack_require__(2),Buffer2=buffer.Buffer,SlowBuffer=buffer.SlowBuffer,MAX_LEN=buffer.kMaxLength||2147483647;exports2.alloc=__name(function(size,fill,encoding){if(typeof Buffer2.alloc=="function")return Buffer2.alloc(size,fill,encoding);if(typeof encoding=="number")throw new TypeError("encoding must not be number");if(typeof size!="number")throw new TypeError("size must be a number");if(size>MAX_LEN)throw new RangeError("size is too large");var enc=encoding,_fill=fill;_fill===void 0&&(enc=void 0,_fill=0);var buf=new Buffer2(size);if(typeof _fill=="string")for(var fillBuf=new Buffer2(_fill,enc),flen=fillBuf.length,i=-1;++i<size;)buf[i]=fillBuf[i%flen];else buf.fill(_fill);return buf},"alloc"),exports2.allocUnsafe=__name(function(size){if(typeof Buffer2.allocUnsafe=="function")return Buffer2.allocUnsafe(size);if(typeof size!="number")throw new TypeError("size must be a number");if(size>MAX_LEN)throw new RangeError("size is too large");return new Buffer2(size)},"allocUnsafe"),exports2.from=__name(function(value,encodingOrOffset,length){if(typeof Buffer2.from=="function"&&(!global.Uint8Array||Uint8Array.from!==Buffer2.from))return Buffer2.from(value,encodingOrOffset,length);if(typeof value=="number")throw new TypeError('"value" argument must not be a number');if(typeof value=="string")return new Buffer2(value,encodingOrOffset);if(typeof ArrayBuffer<"u"&&value instanceof ArrayBuffer){var offset=encodingOrOffset;if(arguments.length===1)return new Buffer2(value);typeof offset>"u"&&(offset=0);var len=length;if(typeof len>"u"&&(len=value.byteLength-offset),offset>=value.byteLength)throw new RangeError("'offset' is out of bounds");if(len>value.byteLength-offset)throw new RangeError("'length' is out of bounds");return new Buffer2(value.slice(offset,offset+len))}if(Buffer2.isBuffer(value)){var out=new Buffer2(value.length);return value.copy(out,0,0,value.length),out}if(value){if(Array.isArray(value)||typeof ArrayBuffer<"u"&&value.buffer instanceof ArrayBuffer||"length"in value)return new Buffer2(value);if(value.type==="Buffer"&&Array.isArray(value.data))return new Buffer2(value.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")},"from"),exports2.allocUnsafeSlow=__name(function(size){if(typeof Buffer2.allocUnsafeSlow=="function")return Buffer2.allocUnsafeSlow(size);if(typeof size!="number")throw new TypeError("size must be a number");if(size>=MAX_LEN)throw new RangeError("size is too large");return new SlowBuffer(size)},"allocUnsafeSlow")}).call(exports2,(function(){return this})())},function(module2,exports2,__webpack_require__){(function(Buffer2){function isArray(arg){return Array.isArray?Array.isArray(arg):objectToString(arg)==="[object Array]"}__name(isArray,"isArray"),exports2.isArray=isArray;function isBoolean(arg){return typeof arg=="boolean"}__name(isBoolean,"isBoolean"),exports2.isBoolean=isBoolean;function isNull(arg){return arg===null}__name(isNull,"isNull"),exports2.isNull=isNull;function isNullOrUndefined(arg){return arg==null}__name(isNullOrUndefined,"isNullOrUndefined"),exports2.isNullOrUndefined=isNullOrUndefined;function isNumber(arg){return typeof arg=="number"}__name(isNumber,"isNumber"),exports2.isNumber=isNumber;function isString(arg){return typeof arg=="string"}__name(isString,"isString"),exports2.isString=isString;function isSymbol(arg){return typeof arg=="symbol"}__name(isSymbol,"isSymbol"),exports2.isSymbol=isSymbol;function isUndefined(arg){return arg===void 0}__name(isUndefined,"isUndefined"),exports2.isUndefined=isUndefined;function isRegExp(re){return objectToString(re)==="[object RegExp]"}__name(isRegExp,"isRegExp"),exports2.isRegExp=isRegExp;function isObject(arg){return typeof arg=="object"&&arg!==null}__name(isObject,"isObject"),exports2.isObject=isObject;function isDate(d){return objectToString(d)==="[object Date]"}__name(isDate,"isDate"),exports2.isDate=isDate;function isError(e){return objectToString(e)==="[object Error]"||e instanceof Error}__name(isError,"isError"),exports2.isError=isError;function isFunction(arg){return typeof arg=="function"}__name(isFunction,"isFunction"),exports2.isFunction=isFunction;function isPrimitive(arg){return arg===null||typeof arg=="boolean"||typeof arg=="number"||typeof arg=="string"||typeof arg=="symbol"||typeof arg>"u"}__name(isPrimitive,"isPrimitive"),exports2.isPrimitive=isPrimitive,exports2.isBuffer=Buffer2.isBuffer;function objectToString(o){return Object.prototype.toString.call(o)}__name(objectToString,"objectToString")}).call(exports2,__webpack_require__(1))},function(module2,exports2){},function(module2,exports2,__webpack_require__){"use strict";var Buffer2=__webpack_require__(2).Buffer,bufferShim=__webpack_require__(17);module2.exports=BufferList;function BufferList(){this.head=null,this.tail=null,this.length=0}__name(BufferList,"BufferList"),BufferList.prototype.push=function(v){var entry={data:v,next:null};this.length>0?this.tail.next=entry:this.head=entry,this.tail=entry,++this.length},BufferList.prototype.unshift=function(v){var entry={data:v,next:this.head};this.length===0&&(this.tail=entry),this.head=entry,++this.length},BufferList.prototype.shift=function(){if(this.length!==0){var ret=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,ret}},BufferList.prototype.clear=function(){this.head=this.tail=null,this.length=0},BufferList.prototype.join=function(s){if(this.length===0)return"";for(var p=this.head,ret=""+p.data;p=p.next;)ret+=s+p.data;return ret},BufferList.prototype.concat=function(n){if(this.length===0)return bufferShim.alloc(0);if(this.length===1)return this.head.data;for(var ret=bufferShim.allocUnsafe(n>>>0),p=this.head,i=0;p;)p.data.copy(ret,i),i+=p.data.length,p=p.next;return ret}},function(module2,exports2,__webpack_require__){"use strict";var objectKeys=Object.keys||function(obj){var keys2=[];for(var key in obj)keys2.push(key);return keys2};module2.exports=Duplex;var processNextTick=__webpack_require__(15),util=__webpack_require__(18);util.inherits=__webpack_require__(12);var Readable=__webpack_require__(14),Writable=__webpack_require__(22);util.inherits(Duplex,Readable);for(var keys=objectKeys(Writable.prototype),v=0;v<keys.length;v++){var method=keys[v];Duplex.prototype[method]||(Duplex.prototype[method]=Writable.prototype[method])}function Duplex(options){if(!(this instanceof Duplex))return new Duplex(options);Readable.call(this,options),Writable.call(this,options),options&&options.readable===!1&&(this.readable=!1),options&&options.writable===!1&&(this.writable=!1),this.allowHalfOpen=!0,options&&options.allowHalfOpen===!1&&(this.allowHalfOpen=!1),this.once("end",onend)}__name(Duplex,"Duplex");function onend(){this.allowHalfOpen||this._writableState.ended||processNextTick(onEndNT,this)}__name(onend,"onend");function onEndNT(self2){self2.end()}__name(onEndNT,"onEndNT");function forEach(xs,f){for(var i=0,l=xs.length;i<l;i++)f(xs[i],i)}__name(forEach,"forEach")},function(module2,exports2,__webpack_require__){(function(process){"use strict";module2.exports=Writable;var processNextTick=__webpack_require__(15),asyncWrite=!process.browser&&["v0.10","v0.9."].indexOf(process.version.slice(0,5))>-1?setImmediate:processNextTick,Duplex;Writable.WritableState=WritableState;var util=__webpack_require__(18);util.inherits=__webpack_require__(12);var internalUtil={deprecate:__webpack_require__(23)},Stream;(function(){try{Stream=__webpack_require__(11)}catch{}finally{Stream||(Stream=__webpack_require__(8).EventEmitter)}})();var Buffer2=__webpack_require__(2).Buffer,bufferShim=__webpack_require__(17);util.inherits(Writable,Stream);function nop(){}__name(nop,"nop");function WriteReq(chunk,encoding,cb){this.chunk=chunk,this.encoding=encoding,this.callback=cb,this.next=null}__name(WriteReq,"WriteReq");function WritableState(options,stream){Duplex=Duplex||__webpack_require__(21),options=options||{},this.objectMode=!!options.objectMode,stream instanceof Duplex&&(this.objectMode=this.objectMode||!!options.writableObjectMode);var hwm=options.highWaterMark,defaultHwm=this.objectMode?16:16*1024;this.highWaterMark=hwm||hwm===0?hwm:defaultHwm,this.highWaterMark=~~this.highWaterMark,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1;var noDecode=options.decodeStrings===!1;this.decodeStrings=!noDecode,this.defaultEncoding=options.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(er){onwrite(stream,er)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new CorkedRequest(this)}__name(WritableState,"WritableState"),WritableState.prototype.getBuffer=__name(function(){for(var current=this.bufferedRequest,out=[];current;)out.push(current),current=current.next;return out},"getBuffer"),(function(){try{Object.defineProperty(WritableState.prototype,"buffer",{get:internalUtil.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.")})}catch{}})();var realHasInstance;typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(realHasInstance=Function.prototype[Symbol.hasInstance],Object.defineProperty(Writable,Symbol.hasInstance,{value:__name(function(object){return realHasInstance.call(this,object)?!0:object&&object._writableState instanceof WritableState},"value")})):realHasInstance=__name(function(object){return object instanceof this},"realHasInstance");function Writable(options){if(Duplex=Duplex||__webpack_require__(21),!realHasInstance.call(Writable,this)&&!(this instanceof Duplex))return new Writable(options);this._writableState=new WritableState(options,this),this.writable=!0,options&&(typeof options.write=="function"&&(this._write=options.write),typeof options.writev=="function"&&(this._writev=options.writev)),Stream.call(this)}__name(Writable,"Writable"),Writable.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))};function writeAfterEnd(stream,cb){var er=new Error("write after end");stream.emit("error",er),processNextTick(cb,er)}__name(writeAfterEnd,"writeAfterEnd");function validChunk(stream,state,chunk,cb){var valid=!0,er=!1;return chunk===null?er=new TypeError("May not write null values to stream"):typeof chunk!="string"&&chunk!==void 0&&!state.objectMode&&(er=new TypeError("Invalid non-string/buffer chunk")),er&&(stream.emit("error",er),processNextTick(cb,er),valid=!1),valid}__name(validChunk,"validChunk"),Writable.prototype.write=function(chunk,encoding,cb){var state=this._writableState,ret=!1,isBuf=Buffer2.isBuffer(chunk);return typeof encoding=="function"&&(cb=encoding,encoding=null),isBuf?encoding="buffer":encoding||(encoding=state.defaultEncoding),typeof cb!="function"&&(cb=nop),state.ended?writeAfterEnd(this,cb):(isBuf||validChunk(this,state,chunk,cb))&&(state.pendingcb++,ret=writeOrBuffer(this,state,isBuf,chunk,encoding,cb)),ret},Writable.prototype.cork=function(){var state=this._writableState;state.corked++},Writable.prototype.uncork=function(){var state=this._writableState;state.corked&&(state.corked--,!state.writing&&!state.corked&&!state.finished&&!state.bufferProcessing&&state.bufferedRequest&&clearBuffer(this,state))},Writable.prototype.setDefaultEncoding=__name(function(encoding){if(typeof encoding=="string"&&(encoding=encoding.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((encoding+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+encoding);return this._writableState.defaultEncoding=encoding,this},"setDefaultEncoding");function decodeChunk(state,chunk,encoding){return!state.objectMode&&state.decodeStrings!==!1&&typeof chunk=="string"&&(chunk=bufferShim.from(chunk,encoding)),chunk}__name(decodeChunk,"decodeChunk");function writeOrBuffer(stream,state,isBuf,chunk,encoding,cb){isBuf||(chunk=decodeChunk(state,chunk,encoding),Buffer2.isBuffer(chunk)&&(encoding="buffer"));var len=state.objectMode?1:chunk.length;state.length+=len;var ret=state.length<state.highWaterMark;if(ret||(state.needDrain=!0),state.writing||state.corked){var last=state.lastBufferedRequest;state.lastBufferedRequest=new WriteReq(chunk,encoding,cb),last?last.next=state.lastBufferedRequest:state.bufferedRequest=state.lastBufferedRequest,state.bufferedRequestCount+=1}else doWrite(stream,state,!1,len,chunk,encoding,cb);return ret}__name(writeOrBuffer,"writeOrBuffer");function doWrite(stream,state,writev,len,chunk,encoding,cb){state.writelen=len,state.writecb=cb,state.writing=!0,state.sync=!0,writev?stream._writev(chunk,state.onwrite):stream._write(chunk,encoding,state.onwrite),state.sync=!1}__name(doWrite,"doWrite");function onwriteError(stream,state,sync,er,cb){--state.pendingcb,sync?processNextTick(cb,er):cb(er),stream._writableState.errorEmitted=!0,stream.emit("error",er)}__name(onwriteError,"onwriteError");function onwriteStateUpdate(state){state.writing=!1,state.writecb=null,state.length-=state.writelen,state.writelen=0}__name(onwriteStateUpdate,"onwriteStateUpdate");function onwrite(stream,er){var state=stream._writableState,sync=state.sync,cb=state.writecb;if(onwriteStateUpdate(state),er)onwriteError(stream,state,sync,er,cb);else{var finished=needFinish(state);!finished&&!state.corked&&!state.bufferProcessing&&state.bufferedRequest&&clearBuffer(stream,state),sync?asyncWrite(afterWrite,stream,state,finished,cb):afterWrite(stream,state,finished,cb)}}__name(onwrite,"onwrite");function afterWrite(stream,state,finished,cb){finished||onwriteDrain(stream,state),state.pendingcb--,cb(),finishMaybe(stream,state)}__name(afterWrite,"afterWrite");function onwriteDrain(stream,state){state.length===0&&state.needDrain&&(state.needDrain=!1,stream.emit("drain"))}__name(onwriteDrain,"onwriteDrain");function clearBuffer(stream,state){state.bufferProcessing=!0;var entry=state.bufferedRequest;if(stream._writev&&entry&&entry.next){var l=state.bufferedRequestCount,buffer=new Array(l),holder=state.corkedRequestsFree;holder.entry=entry;for(var count=0;entry;)buffer[count]=entry,entry=entry.next,count+=1;doWrite(stream,state,!0,state.length,buffer,"",holder.finish),state.pendingcb++,state.lastBufferedRequest=null,holder.next?(state.corkedRequestsFree=holder.next,holder.next=null):state.corkedRequestsFree=new CorkedRequest(state)}else{for(;entry;){var chunk=entry.chunk,encoding=entry.encoding,cb=entry.callback,len=state.objectMode?1:chunk.length;if(doWrite(stream,state,!1,len,chunk,encoding,cb),entry=entry.next,state.writing)break}entry===null&&(state.lastBufferedRequest=null)}state.bufferedRequestCount=0,state.bufferedRequest=entry,state.bufferProcessing=!1}__name(clearBuffer,"clearBuffer"),Writable.prototype._write=function(chunk,encoding,cb){cb(new Error("_write() is not implemented"))},Writable.prototype._writev=null,Writable.prototype.end=function(chunk,encoding,cb){var state=this._writableState;typeof chunk=="function"?(cb=chunk,chunk=null,encoding=null):typeof encoding=="function"&&(cb=encoding,encoding=null),chunk!=null&&this.write(chunk,encoding),state.corked&&(state.corked=1,this.uncork()),!state.ending&&!state.finished&&endWritable(this,state,cb)};function needFinish(state){return state.ending&&state.length===0&&state.bufferedRequest===null&&!state.finished&&!state.writing}__name(needFinish,"needFinish");function prefinish(stream,state){state.prefinished||(state.prefinished=!0,stream.emit("prefinish"))}__name(prefinish,"prefinish");function finishMaybe(stream,state){var need=needFinish(state);return need&&(state.pendingcb===0?(prefinish(stream,state),state.finished=!0,stream.emit("finish")):prefinish(stream,state)),need}__name(finishMaybe,"finishMaybe");function endWritable(stream,state,cb){state.ending=!0,finishMaybe(stream,state),cb&&(state.finished?processNextTick(cb):stream.once("finish",cb)),state.ended=!0,stream.writable=!1}__name(endWritable,"endWritable");function CorkedRequest(state){var _this=this;this.next=null,this.entry=null,this.finish=function(err){var entry=_this.entry;for(_this.entry=null;entry;){var cb=entry.callback;state.pendingcb--,cb(err),entry=entry.next}state.corkedRequestsFree?state.corkedRequestsFree.next=_this:state.corkedRequestsFree=_this}}__name(CorkedRequest,"CorkedRequest")}).call(exports2,__webpack_require__(6))},function(module2,exports2){(function(global){module2.exports=deprecate;function deprecate(fn,msg){if(config("noDeprecation"))return fn;var warned=!1;function deprecated(){if(!warned){if(config("throwDeprecation"))throw new Error(msg);config("traceDeprecation")?console.trace(msg):console.warn(msg),warned=!0}return fn.apply(this,arguments)}return __name(deprecated,"deprecated"),deprecated}__name(deprecate,"deprecate");function config(name){try{if(!global.localStorage)return!1}catch{return!1}var val=global.localStorage[name];return val==null?!1:String(val).toLowerCase()==="true"}__name(config,"config")}).call(exports2,(function(){return this})())},function(module2,exports2,__webpack_require__){var Buffer2=__webpack_require__(2).Buffer,isBufferEncoding=Buffer2.isEncoding||function(encoding){switch(encoding&&encoding.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function assertEncoding(encoding){if(encoding&&!isBufferEncoding(encoding))throw new Error("Unknown encoding: "+encoding)}__name(assertEncoding,"assertEncoding");var StringDecoder=exports2.StringDecoder=function(encoding){switch(this.encoding=(encoding||"utf8").toLowerCase().replace(/[-_]/,""),assertEncoding(encoding),this.encoding){case"utf8":this.surrogateSize=3;break;case"ucs2":case"utf16le":this.surrogateSize=2,this.detectIncompleteChar=utf16DetectIncompleteChar;break;case"base64":this.surrogateSize=3,this.detectIncompleteChar=base64DetectIncompleteChar;break;default:this.write=passThroughWrite;return}this.charBuffer=new Buffer2(6),this.charReceived=0,this.charLength=0};StringDecoder.prototype.write=function(buffer){for(var charStr="";this.charLength;){var available=buffer.length>=this.charLength-this.charReceived?this.charLength-this.charReceived:buffer.length;if(buffer.copy(this.charBuffer,this.charReceived,0,available),this.charReceived+=available,this.charReceived<this.charLength)return"";buffer=buffer.slice(available,buffer.length),charStr=this.charBuffer.slice(0,this.charLength).toString(this.encoding);var charCode=charStr.charCodeAt(charStr.length-1);if(charCode>=55296&&charCode<=56319){this.charLength+=this.surrogateSize,charStr="";continue}if(this.charReceived=this.charLength=0,buffer.length===0)return charStr;break}this.detectIncompleteChar(buffer);var end=buffer.length;this.charLength&&(buffer.copy(this.charBuffer,0,buffer.length-this.charReceived,end),end-=this.charReceived),charStr+=buffer.toString(this.encoding,0,end);var end=charStr.length-1,charCode=charStr.charCodeAt(end);if(charCode>=55296&&charCode<=56319){var size=this.surrogateSize;return this.charLength+=size,this.charReceived+=size,this.charBuffer.copy(this.charBuffer,size,0,size),buffer.copy(this.charBuffer,0,0,size),charStr.substring(0,end)}return charStr},StringDecoder.prototype.detectIncompleteChar=function(buffer){for(var i=buffer.length>=3?3:buffer.length;i>0;i--){var c=buffer[buffer.length-i];if(i==1&&c>>5==6){this.charLength=2;break}if(i<=2&&c>>4==14){this.charLength=3;break}if(i<=3&&c>>3==30){this.charLength=4;break}}this.charReceived=i},StringDecoder.prototype.end=function(buffer){var res="";if(buffer&&buffer.length&&(res=this.write(buffer)),this.charReceived){var cr=this.charReceived,buf=this.charBuffer,enc=this.encoding;res+=buf.slice(0,cr).toString(enc)}return res};function passThroughWrite(buffer){return buffer.toString(this.encoding)}__name(passThroughWrite,"passThroughWrite");function utf16DetectIncompleteChar(buffer){this.charReceived=buffer.length%2,this.charLength=this.charReceived?2:0}__name(utf16DetectIncompleteChar,"utf16DetectIncompleteChar");function base64DetectIncompleteChar(buffer){this.charReceived=buffer.length%3,this.charLength=this.charReceived?3:0}__name(base64DetectIncompleteChar,"base64DetectIncompleteChar")},function(module2,exports2,__webpack_require__){"use strict";module2.exports=Transform;var Duplex=__webpack_require__(21),util=__webpack_require__(18);util.inherits=__webpack_require__(12),util.inherits(Transform,Duplex);function TransformState(stream){this.afterTransform=function(er,data){return afterTransform(stream,er,data)},this.needTransform=!1,this.transforming=!1,this.writecb=null,this.writechunk=null,this.writeencoding=null}__name(TransformState,"TransformState");function afterTransform(stream,er,data){var ts=stream._transformState;ts.transforming=!1;var cb=ts.writecb;if(!cb)return stream.emit("error",new Error("no writecb in Transform class"));ts.writechunk=null,ts.writecb=null,data!=null&&stream.push(data),cb(er);var rs=stream._readableState;rs.reading=!1,(rs.needReadable||rs.length<rs.highWaterMark)&&stream._read(rs.highWaterMark)}__name(afterTransform,"afterTransform");function Transform(options){if(!(this instanceof Transform))return new Transform(options);Duplex.call(this,options),this._transformState=new TransformState(this);var stream=this;this._readableState.needReadable=!0,this._readableState.sync=!1,options&&(typeof options.transform=="function"&&(this._transform=options.transform),typeof options.flush=="function"&&(this._flush=options.flush)),this.once("prefinish",function(){typeof this._flush=="function"?this._flush(function(er,data){done(stream,er,data)}):done(stream)})}__name(Transform,"Transform"),Transform.prototype.push=function(chunk,encoding){return this._transformState.needTransform=!1,Duplex.prototype.push.call(this,chunk,encoding)},Transform.prototype._transform=function(chunk,encoding,cb){throw new Error("_transform() is not implemented")},Transform.prototype._write=function(chunk,encoding,cb){var ts=this._transformState;if(ts.writecb=cb,ts.writechunk=chunk,ts.writeencoding=encoding,!ts.transforming){var rs=this._readableState;(ts.needTransform||rs.needReadable||rs.length<rs.highWaterMark)&&this._read(rs.highWaterMark)}},Transform.prototype._read=function(n){var ts=this._transformState;ts.writechunk!==null&&ts.writecb&&!ts.transforming?(ts.transforming=!0,this._transform(ts.writechunk,ts.writeencoding,ts.afterTransform)):ts.needTransform=!0};function done(stream,er,data){if(er)return stream.emit("error",er);data!=null&&stream.push(data);var ws=stream._writableState,ts=stream._transformState;if(ws.length)throw new Error("Calling transform done when ws.length != 0");if(ts.transforming)throw new Error("Calling transform done when still transforming");return stream.push(null)}__name(done,"done")},function(module2,exports2,__webpack_require__){"use strict";module2.exports=PassThrough;var Transform=__webpack_require__(25),util=__webpack_require__(18);util.inherits=__webpack_require__(12),util.inherits(PassThrough,Transform);function PassThrough(options){if(!(this instanceof PassThrough))return new PassThrough(options);Transform.call(this,options)}__name(PassThrough,"PassThrough"),PassThrough.prototype._transform=function(chunk,encoding,cb){cb(null,chunk)}},function(module2,exports2,__webpack_require__){module2.exports=__webpack_require__(22)},function(module2,exports2,__webpack_require__){module2.exports=__webpack_require__(21)},function(module2,exports2,__webpack_require__){module2.exports=__webpack_require__(25)},function(module2,exports2,__webpack_require__){module2.exports=__webpack_require__(26)},function(module2,exports2,__webpack_require__){"use strict";var zlib_inflate=__webpack_require__(32),utils=__webpack_require__(33),strings=__webpack_require__(38),c=__webpack_require__(39),msg=__webpack_require__(40),ZStream=__webpack_require__(41),GZheader=__webpack_require__(42),toString=Object.prototype.toString;function Inflate(options){if(!(this instanceof Inflate))return new Inflate(options);this.options=utils.assign({chunkSize:16384,windowBits:0,to:""},options||{});var opt=this.options;opt.raw&&opt.windowBits>=0&&opt.windowBits<16&&(opt.windowBits=-opt.windowBits,opt.windowBits===0&&(opt.windowBits=-15)),opt.windowBits>=0&&opt.windowBits<16&&!(options&&options.windowBits)&&(opt.windowBits+=32),opt.windowBits>15&&opt.windowBits<48&&(opt.windowBits&15)===0&&(opt.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new ZStream,this.strm.avail_out=0;var status=zlib_inflate.inflateInit2(this.strm,opt.windowBits);if(status!==c.Z_OK)throw new Error(msg[status]);this.header=new GZheader,zlib_inflate.inflateGetHeader(this.strm,this.header)}__name(Inflate,"Inflate"),Inflate.prototype.push=function(data,mode){var strm=this.strm,chunkSize=this.options.chunkSize,dictionary=this.options.dictionary,status,_mode,next_out_utf8,tail,utf8str,dict,allowBufError=!1;if(this.ended)return!1;_mode=mode===~~mode?mode:mode===!0?c.Z_FINISH:c.Z_NO_FLUSH,typeof data=="string"?strm.input=strings.binstring2buf(data):toString.call(data)==="[object ArrayBuffer]"?strm.input=new Uint8Array(data):strm.input=data,strm.next_in=0,strm.avail_in=strm.input.length;do{if(strm.avail_out===0&&(strm.output=new utils.Buf8(chunkSize),strm.next_out=0,strm.avail_out=chunkSize),status=zlib_inflate.inflate(strm,c.Z_NO_FLUSH),status===c.Z_NEED_DICT&&dictionary&&(typeof dictionary=="string"?dict=strings.string2buf(dictionary):toString.call(dictionary)==="[object ArrayBuffer]"?dict=new Uint8Array(dictionary):dict=dictionary,status=zlib_inflate.inflateSetDictionary(this.strm,dict)),status===c.Z_BUF_ERROR&&allowBufError===!0&&(status=c.Z_OK,allowBufError=!1),status!==c.Z_STREAM_END&&status!==c.Z_OK)return this.onEnd(status),this.ended=!0,!1;strm.next_out&&(strm.avail_out===0||status===c.Z_STREAM_END||strm.avail_in===0&&(_mode===c.Z_FINISH||_mode===c.Z_SYNC_FLUSH))&&(this.options.to==="string"?(next_out_utf8=strings.utf8border(strm.output,strm.next_out),tail=strm.next_out-next_out_utf8,utf8str=strings.buf2string(strm.output,next_out_utf8),strm.next_out=tail,strm.avail_out=chunkSize-tail,tail&&utils.arraySet(strm.output,strm.output,next_out_utf8,tail,0),this.onData(utf8str)):this.onData(utils.shrinkBuf(strm.output,strm.next_out))),strm.avail_in===0&&strm.avail_out===0&&(allowBufError=!0)}while((strm.avail_in>0||strm.avail_out===0)&&status!==c.Z_STREAM_END);return status===c.Z_STREAM_END&&(_mode=c.Z_FINISH),_mode===c.Z_FINISH?(status=zlib_inflate.inflateEnd(this.strm),this.onEnd(status),this.ended=!0,status===c.Z_OK):(_mode===c.Z_SYNC_FLUSH&&(this.onEnd(c.Z_OK),strm.avail_out=0),!0)},Inflate.prototype.onData=function(chunk){this.chunks.push(chunk)},Inflate.prototype.onEnd=function(status){status===c.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=utils.flattenChunks(this.chunks)),this.chunks=[],this.err=status,this.msg=this.strm.msg};function inflate(input,options){var inflator=new Inflate(options);if(inflator.push(input,!0),inflator.err)throw inflator.msg||msg[inflator.err];return inflator.result}__name(inflate,"inflate");function inflateRaw(input,options){return options=options||{},options.raw=!0,inflate(input,options)}__name(inflateRaw,"inflateRaw"),exports2.Inflate=Inflate,exports2.inflate=inflate,exports2.inflateRaw=inflateRaw,exports2.ungzip=inflate},function(module2,exports2,__webpack_require__){"use strict";var utils=__webpack_require__(33),adler32=__webpack_require__(34),crc32=__webpack_require__(35),inflate_fast=__webpack_require__(36),inflate_table=__webpack_require__(37),CODES=0,LENS=1,DISTS=2,Z_FINISH=4,Z_BLOCK=5,Z_TREES=6,Z_OK=0,Z_STREAM_END=1,Z_NEED_DICT=2,Z_STREAM_ERROR=-2,Z_DATA_ERROR=-3,Z_MEM_ERROR=-4,Z_BUF_ERROR=-5,Z_DEFLATED=8,HEAD=1,FLAGS=2,TIME=3,OS=4,EXLEN=5,EXTRA=6,NAME=7,COMMENT=8,HCRC=9,DICTID=10,DICT=11,TYPE=12,TYPEDO=13,STORED=14,COPY_=15,COPY=16,TABLE=17,LENLENS=18,CODELENS=19,LEN_=20,LEN=21,LENEXT=22,DIST=23,DISTEXT=24,MATCH=25,LIT=26,CHECK=27,LENGTH=28,DONE=29,BAD=30,MEM=31,SYNC=32,ENOUGH_LENS=852,ENOUGH_DISTS=592,MAX_WBITS=15,DEF_WBITS=MAX_WBITS;function zswap32(q){return(q>>>24&255)+(q>>>8&65280)+((q&65280)<<8)+((q&255)<<24)}__name(zswap32,"zswap32");function InflateState(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new utils.Buf16(320),this.work=new utils.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}__name(InflateState,"InflateState");function inflateResetKeep(strm){var state;return!strm||!strm.state?Z_STREAM_ERROR:(state=strm.state,strm.total_in=strm.total_out=state.total=0,strm.msg="",state.wrap&&(strm.adler=state.wrap&1),state.mode=HEAD,state.last=0,state.havedict=0,state.dmax=32768,state.head=null,state.hold=0,state.bits=0,state.lencode=state.lendyn=new utils.Buf32(ENOUGH_LENS),state.distcode=state.distdyn=new utils.Buf32(ENOUGH_DISTS),state.sane=1,state.back=-1,Z_OK)}__name(inflateResetKeep,"inflateResetKeep");function inflateReset(strm){var state;return!strm||!strm.state?Z_STREAM_ERROR:(state=strm.state,state.wsize=0,state.whave=0,state.wnext=0,inflateResetKeep(strm))}__name(inflateReset,"inflateReset");function inflateReset2(strm,windowBits){var wrap,state;return!strm||!strm.state||(state=strm.state,windowBits<0?(wrap=0,windowBits=-windowBits):(wrap=(windowBits>>4)+1,windowBits<48&&(windowBits&=15)),windowBits&&(windowBits<8||windowBits>15))?Z_STREAM_ERROR:(state.window!==null&&state.wbits!==windowBits&&(state.window=null),state.wrap=wrap,state.wbits=windowBits,inflateReset(strm))}__name(inflateReset2,"inflateReset2");function inflateInit2(strm,windowBits){var ret,state;return strm?(state=new InflateState,strm.state=state,state.window=null,ret=inflateReset2(strm,windowBits),ret!==Z_OK&&(strm.state=null),ret):Z_STREAM_ERROR}__name(inflateInit2,"inflateInit2");function inflateInit(strm){return inflateInit2(strm,DEF_WBITS)}__name(inflateInit,"inflateInit");var virgin=!0,lenfix,distfix;function fixedtables(state){if(virgin){var sym;for(lenfix=new utils.Buf32(512),distfix=new utils.Buf32(32),sym=0;sym<144;)state.lens[sym++]=8;for(;sym<256;)state.lens[sym++]=9;for(;sym<280;)state.lens[sym++]=7;for(;sym<288;)state.lens[sym++]=8;for(inflate_table(LENS,state.lens,0,288,lenfix,0,state.work,{bits:9}),sym=0;sym<32;)state.lens[sym++]=5;inflate_table(DISTS,state.lens,0,32,distfix,0,state.work,{bits:5}),virgin=!1}state.lencode=lenfix,state.lenbits=9,state.distcode=distfix,state.distbits=5}__name(fixedtables,"fixedtables");function updatewindow(strm,src,end,copy){var dist,state=strm.state;return state.window===null&&(state.wsize=1<<state.wbits,state.wnext=0,state.whave=0,state.window=new utils.Buf8(state.wsize)),copy>=state.wsize?(utils.arraySet(state.window,src,end-state.wsize,state.wsize,0),state.wnext=0,state.whave=state.wsize):(dist=state.wsize-state.wnext,dist>copy&&(dist=copy),utils.arraySet(state.window,src,end-copy,dist,state.wnext),copy-=dist,copy?(utils.arraySet(state.window,src,end-copy,copy,0),state.wnext=copy,state.whave=state.wsize):(state.wnext+=dist,state.wnext===state.wsize&&(state.wnext=0),state.whave<state.wsize&&(state.whave+=dist))),0}__name(updatewindow,"updatewindow");function inflate(strm,flush){var state,input,output,next,put,have,left,hold,bits,_in,_out,copy,from,from_source,here=0,here_bits,here_op,here_val,last_bits,last_op,last_val,len,ret,hbuf=new utils.Buf8(4),opts,n,order=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!strm||!strm.state||!strm.output||!strm.input&&strm.avail_in!==0)return Z_STREAM_ERROR;state=strm.state,state.mode===TYPE&&(state.mode=TYPEDO),put=strm.next_out,output=strm.output,left=strm.avail_out,next=strm.next_in,input=strm.input,have=strm.avail_in,hold=state.hold,bits=state.bits,_in=have,_out=left,ret=Z_OK;inf_leave:for(;;)switch(state.mode){case HEAD:if(state.wrap===0){state.mode=TYPEDO;break}for(;bits<16;){if(have===0)break inf_leave;have--,hold+=input[next++]<<bits,bits+=8}if(state.wrap&2&&hold===35615){state.check=0,hbuf[0]=hold&255,hbuf[1]=hold>>>8&255,state.check=crc32(state.check,hbuf,2,0),hold=0,bits=0,state.mode=FLAGS;break}if(state.flags=0,state.head&&(state.head.done=!1),!(state.wrap&1)||(((hold&255)<<8)+(hold>>8))%31){strm.msg="incorrect header check",state.mode=BAD;break}if((hold&15)!==Z_DEFLATED){strm.msg="unknown compression method",state.mode=BAD;break}if(hold>>>=4,bits-=4,len=(hold&15)+8,state.wbits===0)state.wbits=len;else if(len>state.wbits){strm.msg="invalid window size",state.mode=BAD;break}state.dmax=1<<len,strm.adler=state.check=1,state.mode=hold&512?DICTID:TYPE,hold=0,bits=0;break;case FLAGS:for(;bits<16;){if(have===0)break inf_leave;have--,hold+=input[next++]<<bits,bits+=8}if(state.flags=hold,(state.flags&255)!==Z_DEFLATED){strm.msg="unknown compression method",state.mode=BAD;break}if(state.flags&57344){strm.msg="unknown header flags set",state.mode=BAD;break}state.head&&(state.head.text=hold>>8&1),state.flags&512&&(hbuf[0]=hold&255,hbuf[1]=hold>>>8&255,state.check=crc32(state.check,hbuf,2,0)),hold=0,bits=0,state.mode=TIME;case TIME:for(;bits<32;){if(have===0)break inf_leave;have--,hold+=input[next++]<<bits,bits+=8}state.head&&(state.head.time=hold),state.flags&512&&(hbuf[0]=hold&255,hbuf[1]=hold>>>8&255,hbuf[2]=hold>>>16&255,hbuf[3]=hold>>>24&255,state.check=crc32(state.check,hbuf,4,0)),hold=0,bits=0,state.mode=OS;case OS:for(;bits<16;){if(have===0)break inf_leave;have--,hold+=input[next++]<<bits,bits+=8}state.head&&(state.head.xflags=hold&255,state.head.os=hold>>8),state.flags&512&&(hbuf[0]=hold&255,hbuf[1]=hold>>>8&255,state.check=crc32(state.check,hbuf,2,0)),hold=0,bits=0,state.mode=EXLEN;case EXLEN:if(state.flags&1024){for(;bits<16;){if(have===0)break inf_leave;have--,hold+=input[next++]<<bits,bits+=8}state.length=hold,state.head&&(state.head.extra_len=hold),state.flags&512&&(hbuf[0]=hold&255,hbuf[1]=hold>>>8&255,state.check=crc32(state.check,hbuf,2,0)),hold=0,bits=0}else state.head&&(state.head.extra=null);state.mode=EXTRA;case EXTRA:if(state.flags&1024&&(copy=state.length,copy>have&&(copy=have),copy&&(state.head&&(len=state.head.extra_len-state.length,state.head.extra||(state.head.extra=new Array(state.head.extra_len)),utils.arraySet(state.head.extra,input,next,copy,len)),state.flags&512&&(state.check=crc32(state.check,input,copy,next)),have-=copy,next+=copy,state.length-=copy),state.length))break inf_leave;state.length=0,state.mode=NAME;case NAME:if(state.flags&2048){if(have===0)break inf_leave;copy=0;do len=input[next+copy++],state.head&&len&&state.length<65536&&(state.head.name+=String.fromCharCode(len));while(len&&copy<have);if(state.flags&512&&(state.check=crc32(state.check,input,copy,next)),have-=copy,next+=copy,len)break inf_leave}else state.head&&(state.head.name=null);state.length=0,state.mode=COMMENT;case COMMENT:if(state.flags&4096){if(have===0)break inf_leave;copy=0;do len=input[next+copy++],state.head&&len&&state.length<65536&&(state.head.comment+=String.fromCharCode(len));while(len&&copy<have);if(state.flags&512&&(state.check=crc32(state.check,input,copy,next)),have-=copy,next+=copy,len)break inf_leave}else state.head&&(state.head.comment=null);state.mode=HCRC;case HCRC:if(state.flags&512){for(;bits<16;){if(have===0)break inf_leave;have--,hold+=input[next++]<<bits,bits+=8}if(hold!==(state.check&65535)){strm.msg="header crc mismatch",state.mode=BAD;break}hold=0,bits=0}state.head&&(state.head.hcrc=state.flags>>9&1,state.head.done=!0),strm.adler=state.check=0,state.mode=TYPE;break;case DICTID:for(;bits<32;){if(have===0)break inf_leave;have--,hold+=input[next++]<<bits,bits+=8}strm.adler=state.check=zswap32(hold),hold=0,bits=0,state.mode=DICT;case DICT:if(state.havedict===0)return strm.next_out=put,strm.avail_out=left,strm.next_in=next,strm.avail_in=have,state.hold=hold,state.bits=bits,Z_NEED_DICT;strm.adler=state.check=1,state.mode=TYPE;case TYPE:if(flush===Z_BLOCK||flush===Z_TREES)break inf_leave;case TYPEDO:if(state.last){hold>>>=bits&7,bits-=bits&7,state.mode=CHECK;break}for(;bits<3;){if(have===0)break inf_leave;have--,hold+=input[next++]<<bits,bits+=8}switch(state.last=hold&1,hold>>>=1,bits-=1,hold&3){case 0:state.mode=STORED;break;case 1:if(fixedtables(state),state.mode=LEN_,flush===Z_TREES){hold>>>=2,bits-=2;break inf_leave}break;case 2:state.mode=TABLE;break;case 3:strm.msg="invalid block type",state.mode=BAD}hold>>>=2,bits-=2;break;case STORED:for(hold>>>=bits&7,bits-=bits&7;bits<32;){if(have===0)break inf_leave;have--,hold+=input[next++]<<bits,bits+=8}if((hold&65535)!==(hold>>>16^65535)){strm.msg="invalid stored block lengths",state.mode=BAD;break}if(state.length=hold&65535,hold=0,bits=0,state.mode=COPY_,flush===Z_TREES)break inf_leave;case COPY_:state.mode=COPY;case COPY:if(copy=state.length,copy){if(copy>have&&(copy=have),copy>left&&(copy=left),copy===0)break inf_leave;utils.arraySet(output,input,next,copy,put),have-=copy,next+=copy,left-=copy,put+=copy,state.length-=copy;break}state.mode=TYPE;break;case TABLE:for(;bits<14;){if(have===0)break inf_leave;have--,hold+=input[next++]<<bits,bits+=8}if(state.nlen=(hold&31)+257,hold>>>=5,bits-=5,state.ndist=(hold&31)+1,hold>>>=5,bits-=5,state.ncode=(hold&15)+4,hold>>>=4,bits-=4,state.nlen>286||state.ndist>30){strm.msg="too many length or distance symbols",state.mode=BAD;break}state.have=0,state.mode=LENLENS;case LENLENS:for(;state.have<state.ncode;){for(;bits<3;){if(have===0)break inf_leave;have--,hold+=input[next++]<<bits,bits+=8}state.lens[order[state.have++]]=hold&7,hold>>>=3,bits-=3}for(;state.have<19;)state.lens[order[state.have++]]=0;if(state.lencode=state.lendyn,state.lenbits=7,opts={bits:state.lenbits},ret=inflate_table(CODES,state.lens,0,19,state.lencode,0,state.work,opts),state.lenbits=opts.bits,ret){strm.msg="invalid code lengths set",state.mode=BAD;break}state.have=0,state.mode=CODELENS;case CODELENS:for(;state.have<state.nlen+state.ndist;){for(;here=state.lencode[hold&(1<<state.lenbits)-1],here_bits=here>>>24,here_op=here>>>16&255,here_val=here&65535,!(here_bits<=bits);){if(have===0)break inf_leave;have--,hold+=input[next++]<<bits,bits+=8}if(here_val<16)hold>>>=here_bits,bits-=here_bits,state.lens[state.have++]=here_val;else{if(here_val===16){for(n=here_bits+2;bits<n;){if(have===0)break inf_leave;have--,hold+=input[next++]<<bits,bits+=8}if(hold>>>=here_bits,bits-=here_bits,state.have===0){strm.msg="invalid bit length repeat",state.mode=BAD;break}len=state.lens[state.have-1],copy=3+(hold&3),hold>>>=2,bits-=2}else if(here_val===17){for(n=here_bits+3;bits<n;){if(have===0)break inf_leave;have--,hold+=input[next++]<<bits,bits+=8}hold>>>=here_bits,bits-=here_bits,len=0,copy=3+(hold&7),hold>>>=3,bits-=3}else{for(n=here_bits+7;bits<n;){if(have===0)break inf_leave;have--,hold+=input[next++]<<bits,bits+=8}hold>>>=here_bits,bits-=here_bits,len=0,copy=11+(hold&127),hold>>>=7,bits-=7}if(state.have+copy>state.nlen+state.ndist){strm.msg="invalid bit length repeat",state.mode=BAD;break}for(;copy--;)state.lens[state.have++]=len}}if(state.mode===BAD)break;if(state.lens[256]===0){strm.msg="invalid code -- missing end-of-block",state.mode=BAD;break}if(state.lenbits=9,opts={bits:state.lenbits},ret=inflate_table(LENS,state.lens,0,state.nlen,state.lencode,0,state.work,opts),state.lenbits=opts.bits,ret){strm.msg="invalid literal/lengths set",state.mode=BAD;break}if(state.distbits=6,state.distcode=state.distdyn,opts={bits:state.distbits},ret=inflate_table(DISTS,state.lens,state.nlen,state.ndist,state.distcode,0,state.work,opts),state.distbits=opts.bits,ret){strm.msg="invalid distances set",state.mode=BAD;break}if(state.mode=LEN_,flush===Z_TREES)break inf_leave;case LEN_:state.mode=LEN;case LEN:if(have>=6&&left>=258){strm.next_out=put,strm.avail_out=left,strm.next_in=next,strm.avail_in=have,state.hold=hold,state.bits=bits,inflate_fast(strm,_out),put=strm.next_out,output=strm.output,left=strm.avail_out,next=strm.next_in,input=strm.input,have=strm.avail_in,hold=state.hold,bits=state.bits,state.mode===TYPE&&(state.back=-1);break}for(state.back=0;here=state.lencode[hold&(1<<state.lenbits)-1],here_bits=here>>>24,here_op=here>>>16&255,here_val=here&65535,!(here_bits<=bits);){if(have===0)break inf_leave;have--,hold+=input[next++]<<bits,bits+=8}if(here_op&&(here_op&240)===0){for(last_bits=here_bits,last_op=here_op,last_val=here_val;here=state.lencode[last_val+((hold&(1<<last_bits+last_op)-1)>>last_bits)],here_bits=here>>>24,here_op=here>>>16&255,here_val=here&65535,!(last_bits+here_bits<=bits);){if(have===0)break inf_leave;have--,hold+=input[next++]<<bits,bits+=8}hold>>>=last_bits,bits-=last_bits,state.back+=last_bits}if(hold>>>=here_bits,bits-=here_bits,state.back+=here_bits,state.length=here_val,here_op===0){state.mode=LIT;break}if(here_op&32){state.back=-1,state.mode=TYPE;break}if(here_op&64){strm.msg="invalid literal/length code",state.mode=BAD;break}state.extra=here_op&15,state.mode=LENEXT;case LENEXT:if(state.extra){for(n=state.extra;bits<n;){if(have===0)break inf_leave;have--,hold+=input[next++]<<bits,bits+=8}state.length+=hold&(1<<state.extra)-1,hold>>>=state.extra,bits-=state.extra,state.back+=state.extra}state.was=state.length,state.mode=DIST;case DIST:for(;here=state.distcode[hold&(1<<state.distbits)-1],here_bits=here>>>24,here_op=here>>>16&255,here_val=here&65535,!(here_bits<=bits);){if(have===0)break inf_leave;have--,hold+=input[next++]<<bits,bits+=8}if((here_op&240)===0){for(last_bits=here_bits,last_op=here_op,last_val=here_val;here=state.distcode[last_val+((hold&(1<<last_bits+last_op)-1)>>last_bits)],here_bits=here>>>24,here_op=here>>>16&255,here_val=here&65535,!(last_bits+here_bits<=bits);){if(have===0)break inf_leave;have--,hold+=input[next++]<<bits,bits+=8}hold>>>=last_bits,bits-=last_bits,state.back+=last_bits}if(hold>>>=here_bits,bits-=here_bits,state.back+=here_bits,here_op&64){strm.msg="invalid distance code",state.mode=BAD;break}state.offset=here_val,state.extra=here_op&15,state.mode=DISTEXT;case DISTEXT:if(state.extra){for(n=state.extra;bits<n;){if(have===0)break inf_leave;have--,hold+=input[next++]<<bits,bits+=8}state.offset+=hold&(1<<state.extra)-1,hold>>>=state.extra,bits-=state.extra,state.back+=state.extra}if(state.offset>state.dmax){strm.msg="invalid distance too far back",state.mode=BAD;break}state.mode=MATCH;case MATCH:if(left===0)break inf_leave;if(copy=_out-left,state.offset>copy){if(copy=state.offset-copy,copy>state.whave&&state.sane){strm.msg="invalid distance too far back",state.mode=BAD;break}copy>state.wnext?(copy-=state.wnext,from=state.wsize-copy):from=state.wnext-copy,copy>state.length&&(copy=state.length),from_source=state.window}else from_source=output,from=put-state.offset,copy=state.length;copy>left&&(copy=left),left-=copy,state.length-=copy;do output[put++]=from_source[from++];while(--copy);state.length===0&&(state.mode=LEN);break;case LIT:if(left===0)break inf_leave;output[put++]=state.length,left--,state.mode=LEN;break;case CHECK:if(state.wrap){for(;bits<32;){if(have===0)break inf_leave;have--,hold|=input[next++]<<bits,bits+=8}if(_out-=left,strm.total_out+=_out,state.total+=_out,_out&&(strm.adler=state.check=state.flags?crc32(state.check,output,_out,put-_out):adler32(state.check,output,_out,put-_out)),_out=left,(state.flags?hold:zswap32(hold))!==state.check){strm.msg="incorrect data check",state.mode=BAD;break}hold=0,bits=0}state.mode=LENGTH;case LENGTH:if(state.wrap&&state.flags){for(;bits<32;){if(have===0)break inf_leave;have--,hold+=input[next++]<<bits,bits+=8}if(hold!==(state.total&4294967295)){strm.msg="incorrect length check",state.mode=BAD;break}hold=0,bits=0}state.mode=DONE;case DONE:ret=Z_STREAM_END;break inf_leave;case BAD:ret=Z_DATA_ERROR;break inf_leave;case MEM:return Z_MEM_ERROR;case SYNC:default:return Z_STREAM_ERROR}return strm.next_out=put,strm.avail_out=left,strm.next_in=next,strm.avail_in=have,state.hold=hold,state.bits=bits,(state.wsize||_out!==strm.avail_out&&state.mode<BAD&&(state.mode<CHECK||flush!==Z_FINISH))&&updatewindow(strm,strm.output,strm.next_out,_out-strm.avail_out)?(state.mode=MEM,Z_MEM_ERROR):(_in-=strm.avail_in,_out-=strm.avail_out,strm.total_in+=_in,strm.total_out+=_out,state.total+=_out,state.wrap&&_out&&(strm.adler=state.check=state.flags?crc32(state.check,output,_out,strm.next_out-_out):adler32(state.check,output,_out,strm.next_out-_out)),strm.data_type=state.bits+(state.last?64:0)+(state.mode===TYPE?128:0)+(state.mode===LEN_||state.mode===COPY_?256:0),(_in===0&&_out===0||flush===Z_FINISH)&&ret===Z_OK&&(ret=Z_BUF_ERROR),ret)}__name(inflate,"inflate");function inflateEnd(strm){if(!strm||!strm.state)return Z_STREAM_ERROR;var state=strm.state;return state.window&&(state.window=null),strm.state=null,Z_OK}__name(inflateEnd,"inflateEnd");function inflateGetHeader(strm,head){var state;return!strm||!strm.state||(state=strm.state,(state.wrap&2)===0)?Z_STREAM_ERROR:(state.head=head,head.done=!1,Z_OK)}__name(inflateGetHeader,"inflateGetHeader");function inflateSetDictionary(strm,dictionary){var dictLength=dictionary.length,state,dictid,ret;return!strm||!strm.state||(state=strm.state,state.wrap!==0&&state.mode!==DICT)?Z_STREAM_ERROR:state.mode===DICT&&(dictid=1,dictid=adler32(dictid,dictionary,dictLength,0),dictid!==state.check)?Z_DATA_ERROR:(ret=updatewindow(strm,dictionary,dictLength,dictLength),ret?(state.mode=MEM,Z_MEM_ERROR):(state.havedict=1,Z_OK))}__name(inflateSetDictionary,"inflateSetDictionary"),exports2.inflateReset=inflateReset,exports2.inflateReset2=inflateReset2,exports2.inflateResetKeep=inflateResetKeep,exports2.inflateInit=inflateInit,exports2.inflateInit2=inflateInit2,exports2.inflate=inflate,exports2.inflateEnd=inflateEnd,exports2.inflateGetHeader=inflateGetHeader,exports2.inflateSetDictionary=inflateSetDictionary,exports2.inflateInfo="pako inflate (from Nodeca project)"},function(module2,exports2){"use strict";var TYPED_OK=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";exports2.assign=function(obj){for(var sources=Array.prototype.slice.call(arguments,1);sources.length;){var source=sources.shift();if(source){if(typeof source!="object")throw new TypeError(source+"must be non-object");for(var p in source)source.hasOwnProperty(p)&&(obj[p]=source[p])}}return obj},exports2.shrinkBuf=function(buf,size){return buf.length===size?buf:buf.subarray?buf.subarray(0,size):(buf.length=size,buf)};var fnTyped={arraySet:__name(function(dest,src,src_offs,len,dest_offs){if(src.subarray&&dest.subarray){dest.set(src.subarray(src_offs,src_offs+len),dest_offs);return}for(var i=0;i<len;i++)dest[dest_offs+i]=src[src_offs+i]},"arraySet"),flattenChunks:__name(function(chunks){var i,l,len,pos,chunk,result;for(len=0,i=0,l=chunks.length;i<l;i++)len+=chunks[i].length;for(result=new Uint8Array(len),pos=0,i=0,l=chunks.length;i<l;i++)chunk=chunks[i],result.set(chunk,pos),pos+=chunk.length;return result},"flattenChunks")},fnUntyped={arraySet:__name(function(dest,src,src_offs,len,dest_offs){for(var i=0;i<len;i++)dest[dest_offs+i]=src[src_offs+i]},"arraySet"),flattenChunks:__name(function(chunks){return[].concat.apply([],chunks)},"flattenChunks")};exports2.setTyped=function(on){on?(exports2.Buf8=Uint8Array,exports2.Buf16=Uint16Array,exports2.Buf32=Int32Array,exports2.assign(exports2,fnTyped)):(exports2.Buf8=Array,exports2.Buf16=Array,exports2.Buf32=Array,exports2.assign(exports2,fnUntyped))},exports2.setTyped(TYPED_OK)},function(module2,exports2){"use strict";function adler32(adler,buf,len,pos){for(var s1=adler&65535|0,s2=adler>>>16&65535|0,n=0;len!==0;){n=len>2e3?2e3:len,len-=n;do s1=s1+buf[pos++]|0,s2=s2+s1|0;while(--n);s1%=65521,s2%=65521}return s1|s2<<16|0}__name(adler32,"adler32"),module2.exports=adler32},function(module2,exports2){"use strict";function makeTable(){for(var c,table=[],n=0;n<256;n++){c=n;for(var k=0;k<8;k++)c=c&1?3988292384^c>>>1:c>>>1;table[n]=c}return table}__name(makeTable,"makeTable");var crcTable=makeTable();function crc32(crc,buf,len,pos){var t=crcTable,end=pos+len;crc^=-1;for(var i=pos;i<end;i++)crc=crc>>>8^t[(crc^buf[i])&255];return crc^-1}__name(crc32,"crc32"),module2.exports=crc32},function(module2,exports2){"use strict";var BAD=30,TYPE=12;module2.exports=__name(function(strm,start){var state,_in,last,_out,beg,end,dmax,wsize,whave,wnext,s_window,hold,bits,lcode,dcode,lmask,dmask,here,op,len,dist,from,from_source,input,output;state=strm.state,_in=strm.next_in,input=strm.input,last=_in+(strm.avail_in-5),_out=strm.next_out,output=strm.output,beg=_out-(start-strm.avail_out),end=_out+(strm.avail_out-257),dmax=state.dmax,wsize=state.wsize,whave=state.whave,wnext=state.wnext,s_window=state.window,hold=state.hold,bits=state.bits,lcode=state.lencode,dcode=state.distcode,lmask=(1<<state.lenbits)-1,dmask=(1<<state.distbits)-1;top:do{bits<15&&(hold+=input[_in++]<<bits,bits+=8,hold+=input[_in++]<<bits,bits+=8),here=lcode[hold&lmask];dolen:for(;;){if(op=here>>>24,hold>>>=op,bits-=op,op=here>>>16&255,op===0)output[_out++]=here&65535;else if(op&16){len=here&65535,op&=15,op&&(bits<op&&(hold+=input[_in++]<<bits,bits+=8),len+=hold&(1<<op)-1,hold>>>=op,bits-=op),bits<15&&(hold+=input[_in++]<<bits,bits+=8,hold+=input[_in++]<<bits,bits+=8),here=dcode[hold&dmask];dodist:for(;;){if(op=here>>>24,hold>>>=op,bits-=op,op=here>>>16&255,op&16){if(dist=here&65535,op&=15,bits<op&&(hold+=input[_in++]<<bits,bits+=8,bits<op&&(hold+=input[_in++]<<bits,bits+=8)),dist+=hold&(1<<op)-1,dist>dmax){strm.msg="invalid distance too far back",state.mode=BAD;break top}if(hold>>>=op,bits-=op,op=_out-beg,dist>op){if(op=dist-op,op>whave&&state.sane){strm.msg="invalid distance too far back",state.mode=BAD;break top}if(from=0,from_source=s_window,wnext===0){if(from+=wsize-op,op<len){len-=op;do output[_out++]=s_window[from++];while(--op);from=_out-dist,from_source=output}}else if(wnext<op){if(from+=wsize+wnext-op,op-=wnext,op<len){len-=op;do output[_out++]=s_window[from++];while(--op);if(from=0,wnext<len){op=wnext,len-=op;do output[_out++]=s_window[from++];while(--op);from=_out-dist,from_source=output}}}else if(from+=wnext-op,op<len){len-=op;do output[_out++]=s_window[from++];while(--op);from=_out-dist,from_source=output}for(;len>2;)output[_out++]=from_source[from++],output[_out++]=from_source[from++],output[_out++]=from_source[from++],len-=3;len&&(output[_out++]=from_source[from++],len>1&&(output[_out++]=from_source[from++]))}else{from=_out-dist;do output[_out++]=output[from++],output[_out++]=output[from++],output[_out++]=output[from++],len-=3;while(len>2);len&&(output[_out++]=output[from++],len>1&&(output[_out++]=output[from++]))}}else if((op&64)===0){here=dcode[(here&65535)+(hold&(1<<op)-1)];continue dodist}else{strm.msg="invalid distance code",state.mode=BAD;break top}break}}else if((op&64)===0){here=lcode[(here&65535)+(hold&(1<<op)-1)];continue dolen}else if(op&32){state.mode=TYPE;break top}else{strm.msg="invalid literal/length code",state.mode=BAD;break top}break}}while(_in<last&&_out<end);len=bits>>3,_in-=len,bits-=len<<3,hold&=(1<<bits)-1,strm.next_in=_in,strm.next_out=_out,strm.avail_in=_in<last?5+(last-_in):5-(_in-last),strm.avail_out=_out<end?257+(end-_out):257-(_out-end),state.hold=hold,state.bits=bits},"inflate_fast")},function(module2,exports2,__webpack_require__){"use strict";var utils=__webpack_require__(33),MAXBITS=15,ENOUGH_LENS=852,ENOUGH_DISTS=592,CODES=0,LENS=1,DISTS=2,lbase=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],lext=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],dbase=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],dext=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];module2.exports=__name(function(type,lens,lens_index,codes,table,table_index,work,opts){var bits=opts.bits,len=0,sym=0,min=0,max=0,root=0,curr=0,drop=0,left=0,used=0,huff=0,incr,fill,low,mask,next,base=null,base_index=0,end,count=new utils.Buf16(MAXBITS+1),offs=new utils.Buf16(MAXBITS+1),extra=null,extra_index=0,here_bits,here_op,here_val;for(len=0;len<=MAXBITS;len++)count[len]=0;for(sym=0;sym<codes;sym++)count[lens[lens_index+sym]]++;for(root=bits,max=MAXBITS;max>=1&&count[max]===0;max--);if(root>max&&(root=max),max===0)return table[table_index++]=1<<24|64<<16|0,table[table_index++]=1<<24|64<<16|0,opts.bits=1,0;for(min=1;min<max&&count[min]===0;min++);for(root<min&&(root=min),left=1,len=1;len<=MAXBITS;len++)if(left<<=1,left-=count[len],left<0)return-1;if(left>0&&(type===CODES||max!==1))return-1;for(offs[1]=0,len=1;len<MAXBITS;len++)offs[len+1]=offs[len]+count[len];for(sym=0;sym<codes;sym++)lens[lens_index+sym]!==0&&(work[offs[lens[lens_index+sym]]++]=sym);if(type===CODES?(base=extra=work,end=19):type===LENS?(base=lbase,base_index-=257,extra=lext,extra_index-=257,end=256):(base=dbase,extra=dext,end=-1),huff=0,sym=0,len=min,next=table_index,curr=root,drop=0,low=-1,used=1<<root,mask=used-1,type===LENS&&used>ENOUGH_LENS||type===DISTS&&used>ENOUGH_DISTS)return 1;for(;;){here_bits=len-drop,work[sym]<end?(here_op=0,here_val=work[sym]):work[sym]>end?(here_op=extra[extra_index+work[sym]],here_val=base[base_index+work[sym]]):(here_op=96,here_val=0),incr=1<<len-drop,fill=1<<curr,min=fill;do fill-=incr,table[next+(huff>>drop)+fill]=here_bits<<24|here_op<<16|here_val|0;while(fill!==0);for(incr=1<<len-1;huff&incr;)incr>>=1;if(incr!==0?(huff&=incr-1,huff+=incr):huff=0,sym++,--count[len]===0){if(len===max)break;len=lens[lens_index+work[sym]]}if(len>root&&(huff&mask)!==low){for(drop===0&&(drop=root),next+=min,curr=len-drop,left=1<<curr;curr+drop<max&&(left-=count[curr+drop],!(left<=0));)curr++,left<<=1;if(used+=1<<curr,type===LENS&&used>ENOUGH_LENS||type===DISTS&&used>ENOUGH_DISTS)return 1;low=huff&mask,table[low]=root<<24|curr<<16|next-table_index|0}}return huff!==0&&(table[next+huff]=len-drop<<24|64<<16|0),opts.bits=root,0},"inflate_table")},function(module2,exports2,__webpack_require__){"use strict";var utils=__webpack_require__(33),STR_APPLY_OK=!0,STR_APPLY_UIA_OK=!0;try{String.fromCharCode.apply(null,[0])}catch{STR_APPLY_OK=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{STR_APPLY_UIA_OK=!1}for(var _utf8len=new utils.Buf8(256),q=0;q<256;q++)_utf8len[q]=q>=252?6:q>=248?5:q>=240?4:q>=224?3:q>=192?2:1;_utf8len[254]=_utf8len[254]=1,exports2.string2buf=function(str){var buf,c,c2,m_pos,i,str_len=str.length,buf_len=0;for(m_pos=0;m_pos<str_len;m_pos++)c=str.charCodeAt(m_pos),(c&64512)===55296&&m_pos+1<str_len&&(c2=str.charCodeAt(m_pos+1),(c2&64512)===56320&&(c=65536+(c-55296<<10)+(c2-56320),m_pos++)),buf_len+=c<128?1:c<2048?2:c<65536?3:4;for(buf=new utils.Buf8(buf_len),i=0,m_pos=0;i<buf_len;m_pos++)c=str.charCodeAt(m_pos),(c&64512)===55296&&m_pos+1<str_len&&(c2=str.charCodeAt(m_pos+1),(c2&64512)===56320&&(c=65536+(c-55296<<10)+(c2-56320),m_pos++)),c<128?buf[i++]=c:c<2048?(buf[i++]=192|c>>>6,buf[i++]=128|c&63):c<65536?(buf[i++]=224|c>>>12,buf[i++]=128|c>>>6&63,buf[i++]=128|c&63):(buf[i++]=240|c>>>18,buf[i++]=128|c>>>12&63,buf[i++]=128|c>>>6&63,buf[i++]=128|c&63);return buf};function buf2binstring(buf,len){if(len<65537&&(buf.subarray&&STR_APPLY_UIA_OK||!buf.subarray&&STR_APPLY_OK))return String.fromCharCode.apply(null,utils.shrinkBuf(buf,len));for(var result="",i=0;i<len;i++)result+=String.fromCharCode(buf[i]);return result}__name(buf2binstring,"buf2binstring"),exports2.buf2binstring=function(buf){return buf2binstring(buf,buf.length)},exports2.binstring2buf=function(str){for(var buf=new utils.Buf8(str.length),i=0,len=buf.length;i<len;i++)buf[i]=str.charCodeAt(i);return buf},exports2.buf2string=function(buf,max){var i,out,c,c_len,len=max||buf.length,utf16buf=new Array(len*2);for(out=0,i=0;i<len;){if(c=buf[i++],c<128){utf16buf[out++]=c;continue}if(c_len=_utf8len[c],c_len>4){utf16buf[out++]=65533,i+=c_len-1;continue}for(c&=c_len===2?31:c_len===3?15:7;c_len>1&&i<len;)c=c<<6|buf[i++]&63,c_len--;if(c_len>1){utf16buf[out++]=65533;continue}c<65536?utf16buf[out++]=c:(c-=65536,utf16buf[out++]=55296|c>>10&1023,utf16buf[out++]=56320|c&1023)}return buf2binstring(utf16buf,out)},exports2.utf8border=function(buf,max){var pos;for(max=max||buf.length,max>buf.length&&(max=buf.length),pos=max-1;pos>=0&&(buf[pos]&192)===128;)pos--;return pos<0||pos===0?max:pos+_utf8len[buf[pos]]>max?pos:max}},function(module2,exports2){"use strict";module2.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},function(module2,exports2){"use strict";module2.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},function(module2,exports2){"use strict";function ZStream(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}__name(ZStream,"ZStream"),module2.exports=ZStream},function(module2,exports2){"use strict";function GZheader(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}__name(GZheader,"GZheader"),module2.exports=GZheader}])})})(browserfs$3,browserfs$3.exports)),browserfs$3.exports}__name(requireBrowserfs,"requireBrowserfs");var browserfsExports=requireBrowserfs();const browserfs=getDefaultExportFromCjs(browserfsExports),browserfs$1=_mergeNamespaces({__proto__:null,default:browserfs},[browserfsExports]);export{browserfs$1 as b};
//# sourceMappingURL=browserfs-DVc30LrS.js.map
